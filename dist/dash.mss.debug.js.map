<<<<<<< Updated upstream
{"version":3,"file":"dash.mss.debug.js","mappings":"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AL,GAAWwe,IAAI,IAAIA,IAAI,CAACxe,GAAb,GAAmBwe,IAAI,CAACxe,GAAxB,GAA8B,IAAzC;AACA,WAAKzG,KAAL,GAAailB,IAAI,IAAIA,IAAI,CAACjlB,KAAb,GAAqBilB,IAAI,CAACjlB,KAAL,CAAWY,KAAX,GAAmB,GAAnB,GAAyBqkB,IAAI,CAACjlB,KAAL,CAAWyJ,GAAzD,GAA+D,IAA5E;AACA,WAAKzD,SAAL,GAAiBif,IAAI,IAAIA,IAAI,CAACjf,SAAb,GAAyBif,IAAI,CAACjf,SAA9B,GAA0C,IAA3D;AACH;;;;;;AAGL3C,eAAe,CAAComB,eAAhB,GAAkC,UAAlC;AACApmB,eAAe,CAACmnB,eAAhB,GAAkC,UAAlC;AAEA,+DAAennB,eAAf;;;;;;;;;;;;;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;IACMC;AACF;AACJ;AACA;AACI,uBAAc;AAAA;;AACV;AACR;AACA;AACA;AACQ,OAAKmnB,KAAL,GAAa,IAAb;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACQ,OAAK7mB,IAAL,GAAY,IAAZ;AACA;AACR;AACA;AACA;;AACQ,OAAK6C,GAAL,GAAW,IAAX;AACA;AACR;AACA;AACA;;AACQ,OAAKikB,SAAL,GAAiB,IAAjB;AACA;AACR;AACA;AACA;;AACQ,OAAK1qB,KAAL,GAAa,IAAb;AACA;AACR;AACA;AACA;;AACQ,OAAK2qB,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,SAAL,GAAiB,IAAjB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,YAAL,GAAoB,IAApB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,KAAL,GAAa,EAAb;AACA;AACR;AACA;AACA;;AACQ,OAAKC,IAAL,GAAY,IAAZ;AAEA;AACR;AACA;AACA;;AACQ,OAAKC,OAAL,GAAe,IAAf;AACA;AACR;AACA;AACA;;AACQ,OAAKC,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,cAAL,GAAsB,IAAtB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,gBAAL,GAAwB,IAAxB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,gBAAL,GAAwB,IAAxB;AACA;AACR;AACA;;AACQ,OAAKC,eAAL,GAAuB,IAAvB;AACH;AAGL;AACA;AACA;AACA;;;IACMC;AACF;AACJ;AACA;AACI,4BAAc;AAAA;;AACV;AACR;AACA;AACA;AACQ,OAAKC,CAAL,GAAS,IAAT;AACA;AACR;AACA;AACA;;AACQ,OAAK1zB,CAAL,GAAS,IAAT;AACA;AACR;AACA;AACA;;AACQ,OAAKnC,CAAL,GAAS,EAAT;AACH;;AAGL0N,WAAW,CAACooB,GAAZ,GAAkB,KAAlB;AACApoB,WAAW,CAACqoB,IAAZ,GAAmB,MAAnB;AACAroB,WAAW,CAACsoB,QAAZ,GAAuB,KAAvB;AACAtoB,WAAW,CAACuoB,oBAAZ,GAAmC,gBAAnC;AACAvoB,WAAW,CAAC+mB,iBAAZ,GAAgC,uBAAhC;AACA/mB,WAAW,CAACwoB,kBAAZ,GAAiC,cAAjC;AACAxoB,WAAW,CAACinB,kBAAZ,GAAiC,cAAjC;AACAjnB,WAAW,CAACyoB,gCAAZ,GAA+C,2BAA/C;AACAzoB,WAAW,CAAC2C,8BAAZ,GAA6C,qBAA7C;AACA3C,WAAW,CAAC0oB,kBAAZ,GAAiC,cAAjC;AACA1oB,WAAW,CAAC2oB,OAAZ,GAAsB,SAAtB;AACA3oB,WAAW,CAAC4oB,qBAAZ,GAAoC,iBAApC;AACA5oB,WAAW,CAAC6oB,UAAZ,GAAyB,OAAzB;;;;;;;UCrLA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCzBA;WACA;WACA;WACA,eAAe,4BAA4B;WAC3C,eAAe;WACf,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAIA;;AACA,IAAItU,OAAO,GAAI,OAAO2M,MAAP,KAAkB,WAAlB,IAAiCA,MAAlC,IAA6C4H,qBAA3D;AAEA,IAAItkB,MAAM,GAAG+P,OAAO,CAAC/P,MAArB;;AACA,IAAI,CAACA,MAAL,EAAa;AACTA,EAAAA,MAAM,GAAG+P,OAAO,CAAC/P,MAAR,GAAiB,EAA1B;AACH;;AAEDA,MAAM,CAACsQ,UAAP,GAAoBA,mDAApB;AAEA,+DAAetQ,MAAf","sources":["webpack://dashjs/webpack/universalModuleDefinition","webpack://dashjs/./externals/BigInteger.js","webpack://dashjs/./src/core/errors/ErrorsBase.js","webpack://dashjs/./src/core/events/EventsBase.js","webpack://dashjs/./src/mss/MssFragmentInfoController.js","webpack://dashjs/./src/mss/MssFragmentMoofProcessor.js","webpack://dashjs/./src/mss/MssFragmentMoovProcessor.js","webpack://dashjs/./src/mss/MssFragmentProcessor.js","webpack://dashjs/./src/mss/MssHandler.js","webpack://dashjs/./src/mss/errors/MssErrors.js","webpack://dashjs/./src/mss/parser/MssParser.js","webpack://dashjs/./src/streaming/MediaPlayerEvents.js","webpack://dashjs/./src/streaming/vo/DashJSError.js","webpack://dashjs/./src/streaming/vo/DataChunk.js","webpack://dashjs/./src/streaming/vo/FragmentRequest.js","webpack://dashjs/./src/streaming/vo/metrics/HTTPRequest.js","webpack://dashjs/webpack/bootstrap","webpack://dashjs/webpack/runtime/compat get default export","webpack://dashjs/webpack/runtime/define property getters","webpack://dashjs/webpack/runtime/global","webpack://dashjs/webpack/runtime/hasOwnProperty shorthand","webpack://dashjs/webpack/runtime/make namespace object","webpack://dashjs/webpack/runtime/node module decorator","webpack://dashjs/./src/mss/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dashjs\"] = factory();\n\telse\n\t\troot[\"dashjs\"] = factory();\n})(self, function() {\nreturn ","var bigInt=function(undefined){\"use strict\";var BASE=1e7,LOG_BASE=7,MAX_INT=9007199254740992,MAX_INT_ARR=smallToArray(MAX_INT),DEFAULT_ALPHABET=\"0123456789abcdefghijklmnopqrstuvwxyz\";var supportsNativeBigInt=typeof BigInt===\"function\";function Integer(v,radix,alphabet,caseSensitive){if(typeof v===\"undefined\")return Integer[0];if(typeof radix!==\"undefined\")return+radix===10&&!alphabet?parseValue(v):parseBase(v,radix,alphabet,caseSensitive);return parseValue(v)}function BigInteger(value,sign){this.value=value;this.sign=sign;this.isSmall=false}BigInteger.prototype=Object.create(Integer.prototype);function SmallInteger(value){this.value=value;this.sign=value<0;this.isSmall=true}SmallInteger.prototype=Object.create(Integer.prototype);function NativeBigInt(value){this.value=value}NativeBigInt.prototype=Object.create(Integer.prototype);function isPrecise(n){return-MAX_INT<n&&n<MAX_INT}function smallToArray(n){if(n<1e7)return[n];if(n<1e14)return[n%1e7,Math.floor(n/1e7)];return[n%1e7,Math.floor(n/1e7)%1e7,Math.floor(n/1e14)]}function arrayToSmall(arr){trim(arr);var length=arr.length;if(length<4&&compareAbs(arr,MAX_INT_ARR)<0){switch(length){case 0:return 0;case 1:return arr[0];case 2:return arr[0]+arr[1]*BASE;default:return arr[0]+(arr[1]+arr[2]*BASE)*BASE}}return arr}function trim(v){var i=v.length;while(v[--i]===0);v.length=i+1}function createArray(length){var x=new Array(length);var i=-1;while(++i<length){x[i]=0}return x}function truncate(n){if(n>0)return Math.floor(n);return Math.ceil(n)}function add(a,b){var l_a=a.length,l_b=b.length,r=new Array(l_a),carry=0,base=BASE,sum,i;for(i=0;i<l_b;i++){sum=a[i]+b[i]+carry;carry=sum>=base?1:0;r[i]=sum-carry*base}while(i<l_a){sum=a[i]+carry;carry=sum===base?1:0;r[i++]=sum-carry*base}if(carry>0)r.push(carry);return r}function addAny(a,b){if(a.length>=b.length)return add(a,b);return add(b,a)}function addSmall(a,carry){var l=a.length,r=new Array(l),base=BASE,sum,i;for(i=0;i<l;i++){sum=a[i]-base+carry;carry=Math.floor(sum/base);r[i]=sum-carry*base;carry+=1}while(carry>0){r[i++]=carry%base;carry=Math.floor(carry/base)}return r}BigInteger.prototype.add=function(v){var n=parseValue(v);if(this.sign!==n.sign){return this.subtract(n.negate())}var a=this.value,b=n.value;if(n.isSmall){return new BigInteger(addSmall(a,Math.abs(b)),this.sign)}return new BigInteger(addAny(a,b),this.sign)};BigInteger.prototype.plus=BigInteger.prototype.add;SmallInteger.prototype.add=function(v){var n=parseValue(v);var a=this.value;if(a<0!==n.sign){return this.subtract(n.negate())}var b=n.value;if(n.isSmall){if(isPrecise(a+b))return new SmallInteger(a+b);b=smallToArray(Math.abs(b))}return new BigInteger(addSmall(b,Math.abs(a)),a<0)};SmallInteger.prototype.plus=SmallInteger.prototype.add;NativeBigInt.prototype.add=function(v){return new NativeBigInt(this.value+parseValue(v).value)};NativeBigInt.prototype.plus=NativeBigInt.prototype.add;function subtract(a,b){var a_l=a.length,b_l=b.length,r=new Array(a_l),borrow=0,base=BASE,i,difference;for(i=0;i<b_l;i++){difference=a[i]-borrow-b[i];if(difference<0){difference+=base;borrow=1}else borrow=0;r[i]=difference}for(i=b_l;i<a_l;i++){difference=a[i]-borrow;if(difference<0)difference+=base;else{r[i++]=difference;break}r[i]=difference}for(;i<a_l;i++){r[i]=a[i]}trim(r);return r}function subtractAny(a,b,sign){var value;if(compareAbs(a,b)>=0){value=subtract(a,b)}else{value=subtract(b,a);sign=!sign}value=arrayToSmall(value);if(typeof value===\"number\"){if(sign)value=-value;return new SmallInteger(value)}return new BigInteger(value,sign)}function subtractSmall(a,b,sign){var l=a.length,r=new Array(l),carry=-b,base=BASE,i,difference;for(i=0;i<l;i++){difference=a[i]+carry;carry=Math.floor(difference/base);difference%=base;r[i]=difference<0?difference+base:difference}r=arrayToSmall(r);if(typeof r===\"number\"){if(sign)r=-r;return new SmallInteger(r)}return new BigInteger(r,sign)}BigInteger.prototype.subtract=function(v){var n=parseValue(v);if(this.sign!==n.sign){return this.add(n.negate())}var a=this.value,b=n.value;if(n.isSmall)return subtractSmall(a,Math.abs(b),this.sign);return subtractAny(a,b,this.sign)};BigInteger.prototype.minus=BigInteger.prototype.subtract;SmallInteger.prototype.subtract=function(v){var n=parseValue(v);var a=this.value;if(a<0!==n.sign){return this.add(n.negate())}var b=n.value;if(n.isSmall){return new SmallInteger(a-b)}return subtractSmall(b,Math.abs(a),a>=0)};SmallInteger.prototype.minus=SmallInteger.prototype.subtract;NativeBigInt.prototype.subtract=function(v){return new NativeBigInt(this.value-parseValue(v).value)};NativeBigInt.prototype.minus=NativeBigInt.prototype.subtract;BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)};SmallInteger.prototype.negate=function(){var sign=this.sign;var small=new SmallInteger(-this.value);small.sign=!sign;return small};NativeBigInt.prototype.negate=function(){return new NativeBigInt(-this.value)};BigInteger.prototype.abs=function(){return new BigInteger(this.value,false)};SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))};NativeBigInt.prototype.abs=function(){return new NativeBigInt(this.value>=0?this.value:-this.value)};function multiplyLong(a,b){var a_l=a.length,b_l=b.length,l=a_l+b_l,r=createArray(l),base=BASE,product,carry,i,a_i,b_j;for(i=0;i<a_l;++i){a_i=a[i];for(var j=0;j<b_l;++j){b_j=b[j];product=a_i*b_j+r[i+j];carry=Math.floor(product/base);r[i+j]=product-carry*base;r[i+j+1]+=carry}}trim(r);return r}function multiplySmall(a,b){var l=a.length,r=new Array(l),base=BASE,carry=0,product,i;for(i=0;i<l;i++){product=a[i]*b+carry;carry=Math.floor(product/base);r[i]=product-carry*base}while(carry>0){r[i++]=carry%base;carry=Math.floor(carry/base)}return r}function shiftLeft(x,n){var r=[];while(n-- >0)r.push(0);return r.concat(x)}function multiplyKaratsuba(x,y){var n=Math.max(x.length,y.length);if(n<=30)return multiplyLong(x,y);n=Math.ceil(n/2);var b=x.slice(n),a=x.slice(0,n),d=y.slice(n),c=y.slice(0,n);var ac=multiplyKaratsuba(a,c),bd=multiplyKaratsuba(b,d),abcd=multiplyKaratsuba(addAny(a,b),addAny(c,d));var product=addAny(addAny(ac,shiftLeft(subtract(subtract(abcd,ac),bd),n)),shiftLeft(bd,2*n));trim(product);return product}function useKaratsuba(l1,l2){return-.012*l1-.012*l2+15e-6*l1*l2>0}BigInteger.prototype.multiply=function(v){var n=parseValue(v),a=this.value,b=n.value,sign=this.sign!==n.sign,abs;if(n.isSmall){if(b===0)return Integer[0];if(b===1)return this;if(b===-1)return this.negate();abs=Math.abs(b);if(abs<BASE){return new BigInteger(multiplySmall(a,abs),sign)}b=smallToArray(abs)}if(useKaratsuba(a.length,b.length))return new BigInteger(multiplyKaratsuba(a,b),sign);return new BigInteger(multiplyLong(a,b),sign)};BigInteger.prototype.times=BigInteger.prototype.multiply;function multiplySmallAndArray(a,b,sign){if(a<BASE){return new BigInteger(multiplySmall(b,a),sign)}return new BigInteger(multiplyLong(b,smallToArray(a)),sign)}SmallInteger.prototype._multiplyBySmall=function(a){if(isPrecise(a.value*this.value)){return new SmallInteger(a.value*this.value)}return multiplySmallAndArray(Math.abs(a.value),smallToArray(Math.abs(this.value)),this.sign!==a.sign)};BigInteger.prototype._multiplyBySmall=function(a){if(a.value===0)return Integer[0];if(a.value===1)return this;if(a.value===-1)return this.negate();return multiplySmallAndArray(Math.abs(a.value),this.value,this.sign!==a.sign)};SmallInteger.prototype.multiply=function(v){return parseValue(v)._multiplyBySmall(this)};SmallInteger.prototype.times=SmallInteger.prototype.multiply;NativeBigInt.prototype.multiply=function(v){return new NativeBigInt(this.value*parseValue(v).value)};NativeBigInt.prototype.times=NativeBigInt.prototype.multiply;function square(a){var l=a.length,r=createArray(l+l),base=BASE,product,carry,i,a_i,a_j;for(i=0;i<l;i++){a_i=a[i];carry=0-a_i*a_i;for(var j=i;j<l;j++){a_j=a[j];product=2*(a_i*a_j)+r[i+j]+carry;carry=Math.floor(product/base);r[i+j]=product-carry*base}r[i+l]=carry}trim(r);return r}BigInteger.prototype.square=function(){return new BigInteger(square(this.value),false)};SmallInteger.prototype.square=function(){var value=this.value*this.value;if(isPrecise(value))return new SmallInteger(value);return new BigInteger(square(smallToArray(Math.abs(this.value))),false)};NativeBigInt.prototype.square=function(v){return new NativeBigInt(this.value*this.value)};function divMod1(a,b){var a_l=a.length,b_l=b.length,base=BASE,result=createArray(b.length),divisorMostSignificantDigit=b[b_l-1],lambda=Math.ceil(base/(2*divisorMostSignificantDigit)),remainder=multiplySmall(a,lambda),divisor=multiplySmall(b,lambda),quotientDigit,shift,carry,borrow,i,l,q;if(remainder.length<=a_l)remainder.push(0);divisor.push(0);divisorMostSignificantDigit=divisor[b_l-1];for(shift=a_l-b_l;shift>=0;shift--){quotientDigit=base-1;if(remainder[shift+b_l]!==divisorMostSignificantDigit){quotientDigit=Math.floor((remainder[shift+b_l]*base+remainder[shift+b_l-1])/divisorMostSignificantDigit)}carry=0;borrow=0;l=divisor.length;for(i=0;i<l;i++){carry+=quotientDigit*divisor[i];q=Math.floor(carry/base);borrow+=remainder[shift+i]-(carry-q*base);carry=q;if(borrow<0){remainder[shift+i]=borrow+base;borrow=-1}else{remainder[shift+i]=borrow;borrow=0}}while(borrow!==0){quotientDigit-=1;carry=0;for(i=0;i<l;i++){carry+=remainder[shift+i]-base+divisor[i];if(carry<0){remainder[shift+i]=carry+base;carry=0}else{remainder[shift+i]=carry;carry=1}}borrow+=carry}result[shift]=quotientDigit}remainder=divModSmall(remainder,lambda)[0];return[arrayToSmall(result),arrayToSmall(remainder)]}function divMod2(a,b){var a_l=a.length,b_l=b.length,result=[],part=[],base=BASE,guess,xlen,highx,highy,check;while(a_l){part.unshift(a[--a_l]);trim(part);if(compareAbs(part,b)<0){result.push(0);continue}xlen=part.length;highx=part[xlen-1]*base+part[xlen-2];highy=b[b_l-1]*base+b[b_l-2];if(xlen>b_l){highx=(highx+1)*base}guess=Math.ceil(highx/highy);do{check=multiplySmall(b,guess);if(compareAbs(check,part)<=0)break;guess--}while(guess);result.push(guess);part=subtract(part,check)}result.reverse();return[arrayToSmall(result),arrayToSmall(part)]}function divModSmall(value,lambda){var length=value.length,quotient=createArray(length),base=BASE,i,q,remainder,divisor;remainder=0;for(i=length-1;i>=0;--i){divisor=remainder*base+value[i];q=truncate(divisor/lambda);remainder=divisor-q*lambda;quotient[i]=q|0}return[quotient,remainder|0]}function divModAny(self,v){var value,n=parseValue(v);if(supportsNativeBigInt){return[new NativeBigInt(self.value/n.value),new NativeBigInt(self.value%n.value)]}var a=self.value,b=n.value;var quotient;if(b===0)throw new Error(\"Cannot divide by zero\");if(self.isSmall){if(n.isSmall){return[new SmallInteger(truncate(a/b)),new SmallInteger(a%b)]}return[Integer[0],self]}if(n.isSmall){if(b===1)return[self,Integer[0]];if(b==-1)return[self.negate(),Integer[0]];var abs=Math.abs(b);if(abs<BASE){value=divModSmall(a,abs);quotient=arrayToSmall(value[0]);var remainder=value[1];if(self.sign)remainder=-remainder;if(typeof quotient===\"number\"){if(self.sign!==n.sign)quotient=-quotient;return[new SmallInteger(quotient),new SmallInteger(remainder)]}return[new BigInteger(quotient,self.sign!==n.sign),new SmallInteger(remainder)]}b=smallToArray(abs)}var comparison=compareAbs(a,b);if(comparison===-1)return[Integer[0],self];if(comparison===0)return[Integer[self.sign===n.sign?1:-1],Integer[0]];if(a.length+b.length<=200)value=divMod1(a,b);else value=divMod2(a,b);quotient=value[0];var qSign=self.sign!==n.sign,mod=value[1],mSign=self.sign;if(typeof quotient===\"number\"){if(qSign)quotient=-quotient;quotient=new SmallInteger(quotient)}else quotient=new BigInteger(quotient,qSign);if(typeof mod===\"number\"){if(mSign)mod=-mod;mod=new SmallInteger(mod)}else mod=new BigInteger(mod,mSign);return[quotient,mod]}BigInteger.prototype.divmod=function(v){var result=divModAny(this,v);return{quotient:result[0],remainder:result[1]}};NativeBigInt.prototype.divmod=SmallInteger.prototype.divmod=BigInteger.prototype.divmod;BigInteger.prototype.divide=function(v){return divModAny(this,v)[0]};NativeBigInt.prototype.over=NativeBigInt.prototype.divide=function(v){return new NativeBigInt(this.value/parseValue(v).value)};SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide;BigInteger.prototype.mod=function(v){return divModAny(this,v)[1]};NativeBigInt.prototype.mod=NativeBigInt.prototype.remainder=function(v){return new NativeBigInt(this.value%parseValue(v).value)};SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod;BigInteger.prototype.pow=function(v){var n=parseValue(v),a=this.value,b=n.value,value,x,y;if(b===0)return Integer[1];if(a===0)return Integer[0];if(a===1)return Integer[1];if(a===-1)return n.isEven()?Integer[1]:Integer[-1];if(n.sign){return Integer[0]}if(!n.isSmall)throw new Error(\"The exponent \"+n.toString()+\" is too large.\");if(this.isSmall){if(isPrecise(value=Math.pow(a,b)))return new SmallInteger(truncate(value))}x=this;y=Integer[1];while(true){if(b&1===1){y=y.times(x);--b}if(b===0)break;b/=2;x=x.square()}return y};SmallInteger.prototype.pow=BigInteger.prototype.pow;NativeBigInt.prototype.pow=function(v){var n=parseValue(v);var a=this.value,b=n.value;var _0=BigInt(0),_1=BigInt(1),_2=BigInt(2);if(b===_0)return Integer[1];if(a===_0)return Integer[0];if(a===_1)return Integer[1];if(a===BigInt(-1))return n.isEven()?Integer[1]:Integer[-1];if(n.isNegative())return new NativeBigInt(_0);var x=this;var y=Integer[1];while(true){if((b&_1)===_1){y=y.times(x);--b}if(b===_0)break;b/=_2;x=x.square()}return y};BigInteger.prototype.modPow=function(exp,mod){exp=parseValue(exp);mod=parseValue(mod);if(mod.isZero())throw new Error(\"Cannot take modPow with modulus 0\");var r=Integer[1],base=this.mod(mod);while(exp.isPositive()){if(base.isZero())return Integer[0];if(exp.isOdd())r=r.multiply(base).mod(mod);exp=exp.divide(2);base=base.square().mod(mod)}return r};NativeBigInt.prototype.modPow=SmallInteger.prototype.modPow=BigInteger.prototype.modPow;function compareAbs(a,b){if(a.length!==b.length){return a.length>b.length?1:-1}for(var i=a.length-1;i>=0;i--){if(a[i]!==b[i])return a[i]>b[i]?1:-1}return 0}BigInteger.prototype.compareAbs=function(v){var n=parseValue(v),a=this.value,b=n.value;if(n.isSmall)return 1;return compareAbs(a,b)};SmallInteger.prototype.compareAbs=function(v){var n=parseValue(v),a=Math.abs(this.value),b=n.value;if(n.isSmall){b=Math.abs(b);return a===b?0:a>b?1:-1}return-1};NativeBigInt.prototype.compareAbs=function(v){var a=this.value;var b=parseValue(v).value;a=a>=0?a:-a;b=b>=0?b:-b;return a===b?0:a>b?1:-1};BigInteger.prototype.compare=function(v){if(v===Infinity){return-1}if(v===-Infinity){return 1}var n=parseValue(v),a=this.value,b=n.value;if(this.sign!==n.sign){return n.sign?1:-1}if(n.isSmall){return this.sign?-1:1}return compareAbs(a,b)*(this.sign?-1:1)};BigInteger.prototype.compareTo=BigInteger.prototype.compare;SmallInteger.prototype.compare=function(v){if(v===Infinity){return-1}if(v===-Infinity){return 1}var n=parseValue(v),a=this.value,b=n.value;if(n.isSmall){return a==b?0:a>b?1:-1}if(a<0!==n.sign){return a<0?-1:1}return a<0?1:-1};SmallInteger.prototype.compareTo=SmallInteger.prototype.compare;NativeBigInt.prototype.compare=function(v){if(v===Infinity){return-1}if(v===-Infinity){return 1}var a=this.value;var b=parseValue(v).value;return a===b?0:a>b?1:-1};NativeBigInt.prototype.compareTo=NativeBigInt.prototype.compare;BigInteger.prototype.equals=function(v){return this.compare(v)===0};NativeBigInt.prototype.eq=NativeBigInt.prototype.equals=SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals;BigInteger.prototype.notEquals=function(v){return this.compare(v)!==0};NativeBigInt.prototype.neq=NativeBigInt.prototype.notEquals=SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals;BigInteger.prototype.greater=function(v){return this.compare(v)>0};NativeBigInt.prototype.gt=NativeBigInt.prototype.greater=SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater;BigInteger.prototype.lesser=function(v){return this.compare(v)<0};NativeBigInt.prototype.lt=NativeBigInt.prototype.lesser=SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser;BigInteger.prototype.greaterOrEquals=function(v){return this.compare(v)>=0};NativeBigInt.prototype.geq=NativeBigInt.prototype.greaterOrEquals=SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals;BigInteger.prototype.lesserOrEquals=function(v){return this.compare(v)<=0};NativeBigInt.prototype.leq=NativeBigInt.prototype.lesserOrEquals=SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals;BigInteger.prototype.isEven=function(){return(this.value[0]&1)===0};SmallInteger.prototype.isEven=function(){return(this.value&1)===0};NativeBigInt.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)};BigInteger.prototype.isOdd=function(){return(this.value[0]&1)===1};SmallInteger.prototype.isOdd=function(){return(this.value&1)===1};NativeBigInt.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)};BigInteger.prototype.isPositive=function(){return!this.sign};SmallInteger.prototype.isPositive=function(){return this.value>0};NativeBigInt.prototype.isPositive=SmallInteger.prototype.isPositive;BigInteger.prototype.isNegative=function(){return this.sign};SmallInteger.prototype.isNegative=function(){return this.value<0};NativeBigInt.prototype.isNegative=SmallInteger.prototype.isNegative;BigInteger.prototype.isUnit=function(){return false};SmallInteger.prototype.isUnit=function(){return Math.abs(this.value)===1};NativeBigInt.prototype.isUnit=function(){return this.abs().value===BigInt(1)};BigInteger.prototype.isZero=function(){return false};SmallInteger.prototype.isZero=function(){return this.value===0};NativeBigInt.prototype.isZero=function(){return this.value===BigInt(0)};BigInteger.prototype.isDivisibleBy=function(v){var n=parseValue(v);if(n.isZero())return false;if(n.isUnit())return true;if(n.compareAbs(2)===0)return this.isEven();return this.mod(n).isZero()};NativeBigInt.prototype.isDivisibleBy=SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy;function isBasicPrime(v){var n=v.abs();if(n.isUnit())return false;if(n.equals(2)||n.equals(3)||n.equals(5))return true;if(n.isEven()||n.isDivisibleBy(3)||n.isDivisibleBy(5))return false;if(n.lesser(49))return true}function millerRabinTest(n,a){var nPrev=n.prev(),b=nPrev,r=0,d,t,i,x;while(b.isEven())b=b.divide(2),r++;next:for(i=0;i<a.length;i++){if(n.lesser(a[i]))continue;x=bigInt(a[i]).modPow(b,n);if(x.isUnit()||x.equals(nPrev))continue;for(d=r-1;d!=0;d--){x=x.square().mod(n);if(x.isUnit())return false;if(x.equals(nPrev))continue next}return false}return true}BigInteger.prototype.isPrime=function(strict){var isPrime=isBasicPrime(this);if(isPrime!==undefined)return isPrime;var n=this.abs();var bits=n.bitLength();if(bits<=64)return millerRabinTest(n,[2,3,5,7,11,13,17,19,23,29,31,37]);var logN=Math.log(2)*bits.toJSNumber();var t=Math.ceil(strict===true?2*Math.pow(logN,2):logN);for(var a=[],i=0;i<t;i++){a.push(bigInt(i+2))}return millerRabinTest(n,a)};NativeBigInt.prototype.isPrime=SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime;BigInteger.prototype.isProbablePrime=function(iterations){var isPrime=isBasicPrime(this);if(isPrime!==undefined)return isPrime;var n=this.abs();var t=iterations===undefined?5:iterations;for(var a=[],i=0;i<t;i++){a.push(bigInt.randBetween(2,n.minus(2)))}return millerRabinTest(n,a)};NativeBigInt.prototype.isProbablePrime=SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime;BigInteger.prototype.modInv=function(n){var t=bigInt.zero,newT=bigInt.one,r=parseValue(n),newR=this.abs(),q,lastT,lastR;while(!newR.isZero()){q=r.divide(newR);lastT=t;lastR=r;t=newT;r=newR;newT=lastT.subtract(q.multiply(newT));newR=lastR.subtract(q.multiply(newR))}if(!r.isUnit())throw new Error(this.toString()+\" and \"+n.toString()+\" are not co-prime\");if(t.compare(0)===-1){t=t.add(n)}if(this.isNegative()){return t.negate()}return t};NativeBigInt.prototype.modInv=SmallInteger.prototype.modInv=BigInteger.prototype.modInv;BigInteger.prototype.next=function(){var value=this.value;if(this.sign){return subtractSmall(value,1,this.sign)}return new BigInteger(addSmall(value,1),this.sign)};SmallInteger.prototype.next=function(){var value=this.value;if(value+1<MAX_INT)return new SmallInteger(value+1);return new BigInteger(MAX_INT_ARR,false)};NativeBigInt.prototype.next=function(){return new NativeBigInt(this.value+BigInt(1))};BigInteger.prototype.prev=function(){var value=this.value;if(this.sign){return new BigInteger(addSmall(value,1),true)}return subtractSmall(value,1,this.sign)};SmallInteger.prototype.prev=function(){var value=this.value;if(value-1>-MAX_INT)return new SmallInteger(value-1);return new BigInteger(MAX_INT_ARR,true)};NativeBigInt.prototype.prev=function(){return new NativeBigInt(this.value-BigInt(1))};var powersOfTwo=[1];while(2*powersOfTwo[powersOfTwo.length-1]<=BASE)powersOfTwo.push(2*powersOfTwo[powersOfTwo.length-1]);var powers2Length=powersOfTwo.length,highestPower2=powersOfTwo[powers2Length-1];function shift_isSmall(n){return Math.abs(n)<=BASE}BigInteger.prototype.shiftLeft=function(v){var n=parseValue(v).toJSNumber();if(!shift_isSmall(n)){throw new Error(String(n)+\" is too large for shifting.\")}if(n<0)return this.shiftRight(-n);var result=this;if(result.isZero())return result;while(n>=powers2Length){result=result.multiply(highestPower2);n-=powers2Length-1}return result.multiply(powersOfTwo[n])};NativeBigInt.prototype.shiftLeft=SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft;BigInteger.prototype.shiftRight=function(v){var remQuo;var n=parseValue(v).toJSNumber();if(!shift_isSmall(n)){throw new Error(String(n)+\" is too large for shifting.\")}if(n<0)return this.shiftLeft(-n);var result=this;while(n>=powers2Length){if(result.isZero()||result.isNegative()&&result.isUnit())return result;remQuo=divModAny(result,highestPower2);result=remQuo[1].isNegative()?remQuo[0].prev():remQuo[0];n-=powers2Length-1}remQuo=divModAny(result,powersOfTwo[n]);return remQuo[1].isNegative()?remQuo[0].prev():remQuo[0]};NativeBigInt.prototype.shiftRight=SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight;function bitwise(x,y,fn){y=parseValue(y);var xSign=x.isNegative(),ySign=y.isNegative();var xRem=xSign?x.not():x,yRem=ySign?y.not():y;var xDigit=0,yDigit=0;var xDivMod=null,yDivMod=null;var result=[];while(!xRem.isZero()||!yRem.isZero()){xDivMod=divModAny(xRem,highestPower2);xDigit=xDivMod[1].toJSNumber();if(xSign){xDigit=highestPower2-1-xDigit}yDivMod=divModAny(yRem,highestPower2);yDigit=yDivMod[1].toJSNumber();if(ySign){yDigit=highestPower2-1-yDigit}xRem=xDivMod[0];yRem=yDivMod[0];result.push(fn(xDigit,yDigit))}var sum=fn(xSign?1:0,ySign?1:0)!==0?bigInt(-1):bigInt(0);for(var i=result.length-1;i>=0;i-=1){sum=sum.multiply(highestPower2).add(bigInt(result[i]))}return sum}BigInteger.prototype.not=function(){return this.negate().prev()};NativeBigInt.prototype.not=SmallInteger.prototype.not=BigInteger.prototype.not;BigInteger.prototype.and=function(n){return bitwise(this,n,function(a,b){return a&b})};NativeBigInt.prototype.and=SmallInteger.prototype.and=BigInteger.prototype.and;BigInteger.prototype.or=function(n){return bitwise(this,n,function(a,b){return a|b})};NativeBigInt.prototype.or=SmallInteger.prototype.or=BigInteger.prototype.or;BigInteger.prototype.xor=function(n){return bitwise(this,n,function(a,b){return a^b})};NativeBigInt.prototype.xor=SmallInteger.prototype.xor=BigInteger.prototype.xor;var LOBMASK_I=1<<30,LOBMASK_BI=(BASE&-BASE)*(BASE&-BASE)|LOBMASK_I;function roughLOB(n){var v=n.value,x=typeof v===\"number\"?v|LOBMASK_I:typeof v===\"bigint\"?v|BigInt(LOBMASK_I):v[0]+v[1]*BASE|LOBMASK_BI;return x&-x}function integerLogarithm(value,base){if(base.compareTo(value)<=0){var tmp=integerLogarithm(value,base.square(base));var p=tmp.p;var e=tmp.e;var t=p.multiply(base);return t.compareTo(value)<=0?{p:t,e:e*2+1}:{p:p,e:e*2}}return{p:bigInt(1),e:0}}BigInteger.prototype.bitLength=function(){var n=this;if(n.compareTo(bigInt(0))<0){n=n.negate().subtract(bigInt(1))}if(n.compareTo(bigInt(0))===0){return bigInt(0)}return bigInt(integerLogarithm(n,bigInt(2)).e).add(bigInt(1))};NativeBigInt.prototype.bitLength=SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;function max(a,b){a=parseValue(a);b=parseValue(b);return a.greater(b)?a:b}function min(a,b){a=parseValue(a);b=parseValue(b);return a.lesser(b)?a:b}function gcd(a,b){a=parseValue(a).abs();b=parseValue(b).abs();if(a.equals(b))return a;if(a.isZero())return b;if(b.isZero())return a;var c=Integer[1],d,t;while(a.isEven()&&b.isEven()){d=min(roughLOB(a),roughLOB(b));a=a.divide(d);b=b.divide(d);c=c.multiply(d)}while(a.isEven()){a=a.divide(roughLOB(a))}do{while(b.isEven()){b=b.divide(roughLOB(b))}if(a.greater(b)){t=b;b=a;a=t}b=b.subtract(a)}while(!b.isZero());return c.isUnit()?a:a.multiply(c)}function lcm(a,b){a=parseValue(a).abs();b=parseValue(b).abs();return a.divide(gcd(a,b)).multiply(b)}function randBetween(a,b){a=parseValue(a);b=parseValue(b);var low=min(a,b),high=max(a,b);var range=high.subtract(low).add(1);if(range.isSmall)return low.add(Math.floor(Math.random()*range));var digits=toBase(range,BASE).value;var result=[],restricted=true;for(var i=0;i<digits.length;i++){var top=restricted?digits[i]:BASE;var digit=truncate(Math.random()*top);result.push(digit);if(digit<top)restricted=false}return low.add(Integer.fromArray(result,BASE,false))}var parseBase=function(text,base,alphabet,caseSensitive){alphabet=alphabet||DEFAULT_ALPHABET;text=String(text);if(!caseSensitive){text=text.toLowerCase();alphabet=alphabet.toLowerCase()}var length=text.length;var i;var absBase=Math.abs(base);var alphabetValues={};for(i=0;i<alphabet.length;i++){alphabetValues[alphabet[i]]=i}for(i=0;i<length;i++){var c=text[i];if(c===\"-\")continue;if(c in alphabetValues){if(alphabetValues[c]>=absBase){if(c===\"1\"&&absBase===1)continue;throw new Error(c+\" is not a valid digit in base \"+base+\".\")}}}base=parseValue(base);var digits=[];var isNegative=text[0]===\"-\";for(i=isNegative?1:0;i<text.length;i++){var c=text[i];if(c in alphabetValues)digits.push(parseValue(alphabetValues[c]));else if(c===\"<\"){var start=i;do{i++}while(text[i]!==\">\"&&i<text.length);digits.push(parseValue(text.slice(start+1,i)))}else throw new Error(c+\" is not a valid character\")}return parseBaseFromArray(digits,base,isNegative)};function parseBaseFromArray(digits,base,isNegative){var val=Integer[0],pow=Integer[1],i;for(i=digits.length-1;i>=0;i--){val=val.add(digits[i].times(pow));pow=pow.times(base)}return isNegative?val.negate():val}function stringify(digit,alphabet){alphabet=alphabet||DEFAULT_ALPHABET;if(digit<alphabet.length){return alphabet[digit]}return\"<\"+digit+\">\"}function toBase(n,base){base=bigInt(base);if(base.isZero()){if(n.isZero())return{value:[0],isNegative:false};throw new Error(\"Cannot convert nonzero numbers to base 0.\")}if(base.equals(-1)){if(n.isZero())return{value:[0],isNegative:false};if(n.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-n.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:false};var arr=Array.apply(null,Array(n.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);arr.unshift([1]);return{value:[].concat.apply([],arr),isNegative:false}}var neg=false;if(n.isNegative()&&base.isPositive()){neg=true;n=n.abs()}if(base.isUnit()){if(n.isZero())return{value:[0],isNegative:false};return{value:Array.apply(null,Array(n.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:neg}}var out=[];var left=n,divmod;while(left.isNegative()||left.compareAbs(base)>=0){divmod=left.divmod(base);left=divmod.quotient;var digit=divmod.remainder;if(digit.isNegative()){digit=base.minus(digit).abs();left=left.next()}out.push(digit.toJSNumber())}out.push(left.toJSNumber());return{value:out.reverse(),isNegative:neg}}function toBaseString(n,base,alphabet){var arr=toBase(n,base);return(arr.isNegative?\"-\":\"\")+arr.value.map(function(x){return stringify(x,alphabet)}).join(\"\")}BigInteger.prototype.toArray=function(radix){return toBase(this,radix)};SmallInteger.prototype.toArray=function(radix){return toBase(this,radix)};NativeBigInt.prototype.toArray=function(radix){return toBase(this,radix)};BigInteger.prototype.toString=function(radix,alphabet){if(radix===undefined)radix=10;if(radix!==10)return toBaseString(this,radix,alphabet);var v=this.value,l=v.length,str=String(v[--l]),zeros=\"0000000\",digit;while(--l>=0){digit=String(v[l]);str+=zeros.slice(digit.length)+digit}var sign=this.sign?\"-\":\"\";return sign+str};SmallInteger.prototype.toString=function(radix,alphabet){if(radix===undefined)radix=10;if(radix!=10)return toBaseString(this,radix,alphabet);return String(this.value)};NativeBigInt.prototype.toString=SmallInteger.prototype.toString;NativeBigInt.prototype.toJSON=BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()};BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)};BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf;SmallInteger.prototype.valueOf=function(){return this.value};SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf;NativeBigInt.prototype.valueOf=NativeBigInt.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function parseStringValue(v){if(isPrecise(+v)){var x=+v;if(x===truncate(x))return supportsNativeBigInt?new NativeBigInt(BigInt(x)):new SmallInteger(x);throw new Error(\"Invalid integer: \"+v)}var sign=v[0]===\"-\";if(sign)v=v.slice(1);var split=v.split(/e/i);if(split.length>2)throw new Error(\"Invalid integer: \"+split.join(\"e\"));if(split.length===2){var exp=split[1];if(exp[0]===\"+\")exp=exp.slice(1);exp=+exp;if(exp!==truncate(exp)||!isPrecise(exp))throw new Error(\"Invalid integer: \"+exp+\" is not a valid exponent.\");var text=split[0];var decimalPlace=text.indexOf(\".\");if(decimalPlace>=0){exp-=text.length-decimalPlace-1;text=text.slice(0,decimalPlace)+text.slice(decimalPlace+1)}if(exp<0)throw new Error(\"Cannot include negative exponent part for integers\");text+=new Array(exp+1).join(\"0\");v=text}var isValid=/^([0-9][0-9]*)$/.test(v);if(!isValid)throw new Error(\"Invalid integer: \"+v);if(supportsNativeBigInt){return new NativeBigInt(BigInt(sign?\"-\"+v:v))}var r=[],max=v.length,l=LOG_BASE,min=max-l;while(max>0){r.push(+v.slice(min,max));min-=l;if(min<0)min=0;max-=l}trim(r);return new BigInteger(r,sign)}function parseNumberValue(v){if(supportsNativeBigInt){return new NativeBigInt(BigInt(v))}if(isPrecise(v)){if(v!==truncate(v))throw new Error(v+\" is not an integer.\");return new SmallInteger(v)}return parseStringValue(v.toString())}function parseValue(v){if(typeof v===\"number\"){return parseNumberValue(v)}if(typeof v===\"string\"){return parseStringValue(v)}if(typeof v===\"bigint\"){return new NativeBigInt(v)}return v}for(var i=0;i<1e3;i++){Integer[i]=parseValue(i);if(i>0)Integer[-i]=parseValue(-i)}Integer.one=Integer[1];Integer.zero=Integer[0];Integer.minusOne=Integer[-1];Integer.max=max;Integer.min=min;Integer.gcd=gcd;Integer.lcm=lcm;Integer.isInstance=function(x){return x instanceof BigInteger||x instanceof SmallInteger||x instanceof NativeBigInt};Integer.randBetween=randBetween;Integer.fromArray=function(digits,base,isNegative){return parseBaseFromArray(digits.map(parseValue),parseValue(base||10),isNegative)};return Integer}();if(typeof module!==\"undefined\"&&module.hasOwnProperty(\"exports\")){module.exports=bigInt}if(typeof define===\"function\"&&define.amd){define(\"big-integer\",[],function(){return bigInt})}","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass ErrorsBase {\n    extend (errors, config) {\n        if (!errors) return;\n\n        let override = config ? config.override : false;\n        let publicOnly = config ? config.publicOnly : false;\n\n\n        for (const err in errors) {\n            if (!errors.hasOwnProperty(err) || (this[err] && !override)) continue;\n            if (publicOnly && errors[err].indexOf('public_') === -1) continue;\n            this[err] = errors[err];\n\n        }\n    }\n}\n\nexport default ErrorsBase;","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass EventsBase {\n    extend (events, config) {\n        if (!events) return;\n\n        let override = config ? config.override : false;\n        let publicOnly = config ? config.publicOnly : false;\n\n\n        for (const evt in events) {\n            if (!events.hasOwnProperty(evt) || (this[evt] && !override)) continue;\n            if (publicOnly && events[evt].indexOf('public_') === -1) continue;\n            this[evt] = events[evt];\n\n        }\n    }\n}\n\nexport default EventsBase;","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport FragmentRequest from '../streaming/vo/FragmentRequest';\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest';\n\nfunction MssFragmentInfoController(config) {\n\n    config = config || {};\n\n    let instance,\n        logger,\n        fragmentModel,\n        started,\n        type,\n        loadFragmentTimeout,\n        startTime,\n        startFragmentTime,\n        index;\n\n    const streamProcessor = config.streamProcessor;\n    const baseURLController = config.baseURLController;\n    const debug = config.debug;\n    const controllerType = 'MssFragmentInfoController';\n\n    function setup() {\n        logger = debug.getLogger(instance);\n    }\n\n    function initialize() {\n        type = streamProcessor.getType();\n        fragmentModel = streamProcessor.getFragmentModel();\n\n        started = false;\n        startTime = null;\n        startFragmentTime = null;\n    }\n\n    function start() {\n        if (started) return;\n\n        logger.debug('Start');\n\n        started = true;\n        index = 0;\n\n        loadNextFragmentInfo();\n    }\n\n    function stop() {\n        if (!started) return;\n\n        logger.debug('Stop');\n\n        clearTimeout(loadFragmentTimeout);\n        started = false;\n        startTime = null;\n        startFragmentTime = null;\n    }\n\n    function reset() {\n        stop();\n    }\n\n    function loadNextFragmentInfo() {\n        if (!started) return;\n\n        // Get last segment from SegmentTimeline\n        const representation = getCurrentRepresentation();\n        const manifest = representation.adaptation.period.mpd.manifest;\n        const adaptation = manifest.Period_asArray[representation.adaptation.period.index].AdaptationSet_asArray[representation.adaptation.index];\n        const segments = adaptation.SegmentTemplate.SegmentTimeline.S_asArray;\n        const segment = segments[segments.length - 1];\n\n        // logger.debug('Last fragment time: ' + (segment.t / adaptation.SegmentTemplate.timescale));\n\n        // Generate segment request\n        const request = getRequestForSegment(adaptation, representation, segment);\n\n        // Send segment request\n        requestFragment.call(this, request);\n    }\n\n    function getRequestForSegment(adaptation, representation, segment) {\n        let timescale = adaptation.SegmentTemplate.timescale;\n        let request = new FragmentRequest();\n\n        request.mediaType = type;\n        request.type = HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE;\n        // request.range = segment.mediaRange;\n        request.startTime = segment.t / timescale;\n        request.duration = segment.d / timescale;\n        request.timescale = timescale;\n        // request.availabilityStartTime = segment.availabilityStartTime;\n        // request.availabilityEndTime = segment.availabilityEndTime;\n        // request.wallStartTime = segment.wallStartTime;\n        request.quality = representation.index;\n        request.index = index++;\n        request.mediaInfo = streamProcessor.getMediaInfo();\n        request.adaptationIndex = representation.adaptation.index;\n        request.representationId = representation.id;\n        request.url = baseURLController.resolve(representation.path).url + adaptation.SegmentTemplate.media;\n        request.url = request.url.replace('$Bandwidth$', representation.bandwidth);\n        request.url = request.url.replace('$Time$', segment.tManifest ? segment.tManifest : segment.t);\n        request.url = request.url.replace('/Fragments(', '/FragmentInfo(');\n\n        return request;\n    }\n\n    function getCurrentRepresentation() {\n        const representationController = streamProcessor.getRepresentationController();\n        const representation = representationController.getCurrentRepresentation();\n        return representation;\n    }\n\n    function requestFragment(request) {\n        // logger.debug('Load FragmentInfo for time: ' + request.startTime);\n        if (streamProcessor.getFragmentModel().isFragmentLoadedOrPending(request)) {\n            // We may have reached end of timeline in case of start-over streams\n            logger.debug('End of timeline');\n            stop();\n            return;\n        }\n\n        fragmentModel.executeRequest(request);\n    }\n\n    function fragmentInfoLoaded (e) {\n        if (!started) return;\n\n        const request = e.request;\n        if (!e.response) {\n            logger.error('Load error', request.url);\n            return;\n        }\n\n        let deltaFragmentTime,\n            deltaTime,\n            delay;\n\n        // logger.debug('FragmentInfo loaded: ', request.url);\n\n        if (startTime === null) {\n            startTime = new Date().getTime();\n        }\n\n        if (!startFragmentTime) {\n            startFragmentTime = request.startTime;\n        }\n\n        // Determine delay before requesting next FragmentInfo\n        deltaTime = (new Date().getTime() - startTime) / 1000;\n        deltaFragmentTime = (request.startTime + request.duration) - startFragmentTime;\n        delay = Math.max(0, (deltaFragmentTime - deltaTime));\n\n        // Set timeout for requesting next FragmentInfo\n        clearTimeout(loadFragmentTimeout);\n        loadFragmentTimeout = setTimeout(function () {\n            loadFragmentTimeout = null;\n            loadNextFragmentInfo();\n        }, delay * 1000);\n    }\n\n    function getType() {\n        return type;\n    }\n\n    instance = {\n        initialize: initialize,\n        controllerType: controllerType,\n        start: start,\n        fragmentInfoLoaded: fragmentInfoLoaded,\n        getType: getType,\n        reset: reset\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssFragmentInfoController.__dashjs_factory_name = 'MssFragmentInfoController';\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentInfoController); /* jshint ignore:line */\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport DashJSError from '../streaming/vo/DashJSError';\nimport MssErrors from './errors/MssErrors';\n\nimport Events from '../streaming/MediaPlayerEvents';\n\n/**\n * @module MssFragmentMoofProcessor\n * @ignore\n * @param {Object} config object\n */\nfunction MssFragmentMoofProcessor(config) {\n\n    config = config || {};\n    let instance,\n        type,\n        logger;\n    const dashMetrics = config.dashMetrics;\n    const playbackController = config.playbackController;\n    const errorHandler = config.errHandler;\n    const eventBus = config.eventBus;\n    const ISOBoxer = config.ISOBoxer;\n    const debug = config.debug;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        type = '';\n    }\n\n    function processTfrf(request, tfrf, tfdt, streamProcessor) {\n        const representationController = streamProcessor.getRepresentationController();\n        const representation = representationController.getCurrentRepresentation();\n\n        const manifest = representation.adaptation.period.mpd.manifest;\n        const adaptation = manifest.Period_asArray[representation.adaptation.period.index].AdaptationSet_asArray[representation.adaptation.index];\n        const timescale = adaptation.SegmentTemplate.timescale;\n\n        type = streamProcessor.getType();\n\n        // Process tfrf only for live streams or start-over static streams (timeShiftBufferDepth > 0)\n        if (manifest.type !== 'dynamic' && !manifest.timeShiftBufferDepth) {\n            return;\n        }\n\n        if (!tfrf) {\n            errorHandler.error(new DashJSError(MssErrors.MSS_NO_TFRF_CODE, MssErrors.MSS_NO_TFRF_MESSAGE));\n            return;\n        }\n\n        // Get adaptation's segment timeline (always a SegmentTimeline in Smooth Streaming use case)\n        const segments = adaptation.SegmentTemplate.SegmentTimeline.S;\n        const entries = tfrf.entry;\n        let entry,\n            segmentTime,\n            range;\n        let segment = null;\n        let t = 0;\n        let endTime;\n        let availabilityStartTime = null;\n\n        if (entries.length === 0) {\n            return;\n        }\n\n        // Consider only first tfrf entry (to avoid pre-condition failure on fragment info requests)\n        entry = entries[0];\n\n        // In case of start-over streams, check if we have reached end of original manifest duration (set in timeShiftBufferDepth)\n        // => then do not update anymore timeline\n        if (manifest.type === 'static') {\n            // Get first segment time\n            segmentTime = segments[0].tManifest ? parseFloat(segments[0].tManifest) : segments[0].t;\n            if (entry.fragment_absolute_time > (segmentTime + (manifest.timeShiftBufferDepth * timescale))) {\n                return;\n            }\n        }\n\n        // logger.debug('entry - t = ', (entry.fragment_absolute_time / timescale));\n\n        // Get last segment time\n        segmentTime = segments[segments.length - 1].tManifest ? parseFloat(segments[segments.length - 1].tManifest) : segments[segments.length - 1].t;\n        // logger.debug('Last segment - t = ', (segmentTime / timescale));\n\n        // Check if we have to append new segment to timeline\n        if (entry.fragment_absolute_time <= segmentTime) {\n            // Update DVR window range => set range end to end time of current segment\n            range = {\n                start: segments[0].t / timescale,\n                end: (tfdt.baseMediaDecodeTime / timescale) + request.duration\n            };\n\n            updateDVR(request.mediaType, range, streamProcessor.getStreamInfo().manifestInfo);\n            return;\n        }\n\n        // logger.debug('Add new segment - t = ', (entry.fragment_absolute_time / timescale));\n        segment = {};\n        segment.t = entry.fragment_absolute_time;\n        segment.d = entry.fragment_duration;\n        // If timestamps starts at 0 relative to 1st segment (dynamic to static) then update segment time\n        if (segments[0].tManifest) {\n            segment.t -= parseFloat(segments[0].tManifest) - segments[0].t;\n            segment.tManifest = entry.fragment_absolute_time;\n        }\n\n        // Patch previous segment duration\n        let lastSegment = segments[segments.length - 1];\n        if (lastSegment.t + lastSegment.d !== segment.t) {\n            logger.debug('Patch segment duration - t = ', lastSegment.t + ', d = ' + lastSegment.d + ' => ' + (segment.t - lastSegment.t));\n            lastSegment.d = segment.t - lastSegment.t;\n        }\n\n        segments.push(segment);\n\n        // In case of static start-over streams, update content duration\n        if (manifest.type === 'static') {\n            if (type === 'video') {\n                segment = segments[segments.length - 1];\n                endTime = (segment.t + segment.d) / timescale;\n                if (endTime > representation.adaptation.period.duration) {\n                    eventBus.trigger(Events.MANIFEST_VALIDITY_CHANGED, { sender: this, newDuration: endTime });\n                }\n            }\n            return;\n        } else {\n            // In case of live streams, update segment timeline according to DVR window\n            if (manifest.timeShiftBufferDepth && manifest.timeShiftBufferDepth > 0) {\n                // Get timestamp of the last segment\n                segment = segments[segments.length - 1];\n                t = segment.t;\n\n                // Determine the segments' availability start time\n                availabilityStartTime = (t - (manifest.timeShiftBufferDepth * timescale)) / timescale;\n\n                // Remove segments prior to availability start time\n                segment = segments[0];\n                endTime = (segment.t + segment.d) / timescale;\n                while (endTime < availabilityStartTime) {\n                    // Check if not currently playing the segment to be removed\n                    if (!playbackController.isPaused() && playbackController.getTime() < endTime) {\n                        break;\n                    }\n                    // logger.debug('Remove segment  - t = ' + (segment.t / timescale));\n                    segments.splice(0, 1);\n                    segment = segments[0];\n                    endTime = (segment.t + segment.d) / timescale;\n                }\n            }\n\n            // Update DVR window range => set range end to end time of current segment\n            range = {\n                start: segments[0].t / timescale,\n                end: (tfdt.baseMediaDecodeTime / timescale) + request.duration\n            };\n\n            updateDVR(type, range, streamProcessor.getStreamInfo().manifestInfo);\n        }\n\n    }\n\n    function updateDVR(type, range, manifestInfo) {\n        if (type !== 'video' && type !== 'audio') return;\n        const dvrInfos = dashMetrics.getCurrentDVRInfo(type);\n        if (!dvrInfos || (range.end > dvrInfos.range.end)) {\n            logger.debug('Update DVR range: [' + range.start + ' - ' + range.end + ']');\n            dashMetrics.addDVRInfo(type, playbackController.getTime(), manifestInfo, range);\n            playbackController.updateCurrentTime(type);\n        }\n    }\n\n    // This function returns the offset of the 1st byte of a child box within a container box\n    function getBoxOffset(parent, type) {\n        let offset = 8;\n        let i = 0;\n\n        for (i = 0; i < parent.boxes.length; i++) {\n            if (parent.boxes[i].type === type) {\n                return offset;\n            }\n            offset += parent.boxes[i].size;\n        }\n        return offset;\n    }\n\n    function convertFragment(e, streamProcessor) {\n        let i;\n\n        // e.request contains request description object\n        // e.response contains fragment bytes\n        const isoFile = ISOBoxer.parseBuffer(e.response);\n        // Update track_Id in tfhd box\n        const tfhd = isoFile.fetch('tfhd');\n        tfhd.track_ID = e.request.mediaInfo.index + 1;\n\n        // Add tfdt box\n        let tfdt = isoFile.fetch('tfdt');\n        const traf = isoFile.fetch('traf');\n        if (tfdt === null) {\n            tfdt = ISOBoxer.createFullBox('tfdt', traf, tfhd);\n            tfdt.version = 1;\n            tfdt.flags = 0;\n            tfdt.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale);\n        }\n\n        const trun = isoFile.fetch('trun');\n\n        // Process tfxd boxes\n        // This box provide absolute timestamp but we take the segment start time for tfdt\n        let tfxd = isoFile.fetch('tfxd');\n        if (tfxd) {\n            tfxd._parent.boxes.splice(tfxd._parent.boxes.indexOf(tfxd), 1);\n            tfxd = null;\n        }\n        let tfrf = isoFile.fetch('tfrf');\n        processTfrf(e.request, tfrf, tfdt, streamProcessor);\n        if (tfrf) {\n            tfrf._parent.boxes.splice(tfrf._parent.boxes.indexOf(tfrf), 1);\n            tfrf = null;\n        }\n\n        // If protected content in PIFF1.1 format (sepiff box = Sample Encryption PIFF)\n        // => convert sepiff box it into a senc box\n        // => create saio and saiz boxes (if not already present)\n        const sepiff = isoFile.fetch('sepiff');\n        if (sepiff !== null) {\n            sepiff.type = 'senc';\n            sepiff.usertype = undefined;\n\n            let saio = isoFile.fetch('saio');\n            if (saio === null) {\n                // Create Sample Auxiliary Information Offsets Box box (saio)\n                saio = ISOBoxer.createFullBox('saio', traf);\n                saio.version = 0;\n                saio.flags = 0;\n                saio.entry_count = 1;\n                saio.offset = [0];\n\n                const saiz = ISOBoxer.createFullBox('saiz', traf);\n                saiz.version = 0;\n                saiz.flags = 0;\n                saiz.sample_count = sepiff.sample_count;\n                saiz.default_sample_info_size = 0;\n                saiz.sample_info_size = [];\n\n                if (sepiff.flags & 0x02) {\n                    // Sub-sample encryption => set sample_info_size for each sample\n                    for (i = 0; i < sepiff.sample_count; i += 1) {\n                        // 10 = 8 (InitializationVector field size) + 2 (subsample_count field size)\n                        // 6 = 2 (BytesOfClearData field size) + 4 (BytesOfEncryptedData field size)\n                        saiz.sample_info_size[i] = 10 + (6 * sepiff.entry[i].NumberOfEntries);\n                    }\n                } else {\n                    // No sub-sample encryption => set default sample_info_size = InitializationVector field size (8)\n                    saiz.default_sample_info_size = 8;\n                }\n            }\n        }\n\n        tfhd.flags &= 0xFFFFFE; // set tfhd.base-data-offset-present to false\n        tfhd.flags |= 0x020000; // set tfhd.default-base-is-moof to true\n        trun.flags |= 0x000001; // set trun.data-offset-present to true\n\n        // Update trun.data_offset field that corresponds to first data byte (inside mdat box)\n        const moof = isoFile.fetch('moof');\n        let length = moof.getLength();\n        trun.data_offset = length + 8;\n\n        // Update saio box offset field according to new senc box offset\n        let saio = isoFile.fetch('saio');\n        if (saio !== null) {\n            let trafPosInMoof = getBoxOffset(moof, 'traf');\n            let sencPosInTraf = getBoxOffset(traf, 'senc');\n            // Set offset from begin fragment to the first IV field in senc box\n            saio.offset[0] = trafPosInMoof + sencPosInTraf + 16; // 16 = box header (12) + sample_count field size (4)\n        }\n\n        // Write transformed/processed fragment into request reponse data\n        e.response = isoFile.write();\n    }\n\n    function updateSegmentList(e, streamProcessor) {\n        // e.request contains request description object\n        // e.response contains fragment bytes\n        if (!e.response) {\n            throw new Error('e.response parameter is missing');\n        }\n\n        const isoFile = ISOBoxer.parseBuffer(e.response);\n        // Update track_Id in tfhd box\n        const tfhd = isoFile.fetch('tfhd');\n        tfhd.track_ID = e.request.mediaInfo.index + 1;\n\n        // Add tfdt box\n        let tfdt = isoFile.fetch('tfdt');\n        let traf = isoFile.fetch('traf');\n        if (tfdt === null) {\n            tfdt = ISOBoxer.createFullBox('tfdt', traf, tfhd);\n            tfdt.version = 1;\n            tfdt.flags = 0;\n            tfdt.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale);\n        }\n\n        let tfrf = isoFile.fetch('tfrf');\n        processTfrf(e.request, tfrf, tfdt, streamProcessor);\n        if (tfrf) {\n            tfrf._parent.boxes.splice(tfrf._parent.boxes.indexOf(tfrf), 1);\n            tfrf = null;\n        }\n    }\n\n    function getType() {\n        return type;\n    }\n\n    instance = {\n        convertFragment: convertFragment,\n        updateSegmentList: updateSegmentList,\n        getType: getType\n    };\n\n    setup();\n    return instance;\n}\n\nMssFragmentMoofProcessor.__dashjs_factory_name = 'MssFragmentMoofProcessor';\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentMoofProcessor); /* jshint ignore:line */\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport MssErrors from './errors/MssErrors';\n\n/**\n * @module MssFragmentMoovProcessor\n * @ignore\n * @param {Object} config object\n */\nfunction MssFragmentMoovProcessor(config) {\n    config = config || {};\n    const NALUTYPE_SPS = 7;\n    const NALUTYPE_PPS = 8;\n    const constants = config.constants;\n    const ISOBoxer = config.ISOBoxer;\n\n    let protectionController = config.protectionController;\n    let instance,\n        period,\n        adaptationSet,\n        representation,\n        contentProtection,\n        timescale,\n        trackId;\n\n    function createFtypBox(isoFile) {\n        let ftyp = ISOBoxer.createBox('ftyp', isoFile);\n        ftyp.major_brand = 'iso6';\n        ftyp.minor_version = 1; // is an informative integer for the minor version of the major brand\n        ftyp.compatible_brands = []; //is a list, to the end of the box, of brands isom, iso6 and msdh\n        ftyp.compatible_brands[0] = 'isom'; // => decimal ASCII value for isom\n        ftyp.compatible_brands[1] = 'iso6'; // => decimal ASCII value for iso6\n        ftyp.compatible_brands[2] = 'msdh'; // => decimal ASCII value for msdh\n\n        return ftyp;\n    }\n\n    function createMoovBox(isoFile) {\n\n        // moov box\n        let moov = ISOBoxer.createBox('moov', isoFile);\n\n        // moov/mvhd\n        createMvhdBox(moov);\n\n        // moov/trak\n        let trak = ISOBoxer.createBox('trak', moov);\n\n        // moov/trak/tkhd\n        createTkhdBox(trak);\n\n        // moov/trak/mdia\n        let mdia = ISOBoxer.createBox('mdia', trak);\n\n        // moov/trak/mdia/mdhd\n        createMdhdBox(mdia);\n\n        // moov/trak/mdia/hdlr\n        createHdlrBox(mdia);\n\n        // moov/trak/mdia/minf\n        let minf = ISOBoxer.createBox('minf', mdia);\n\n        switch (adaptationSet.type) {\n            case constants.VIDEO:\n                // moov/trak/mdia/minf/vmhd\n                createVmhdBox(minf);\n                break;\n            case constants.AUDIO:\n                // moov/trak/mdia/minf/smhd\n                createSmhdBox(minf);\n                break;\n            default:\n                break;\n        }\n\n        // moov/trak/mdia/minf/dinf\n        let dinf = ISOBoxer.createBox('dinf', minf);\n\n        // moov/trak/mdia/minf/dinf/dref\n        createDrefBox(dinf);\n\n        // moov/trak/mdia/minf/stbl\n        let stbl = ISOBoxer.createBox('stbl', minf);\n\n        // Create empty stts, stsc, stco and stsz boxes\n        // Use data field as for codem-isoboxer unknown boxes for setting fields value\n\n        // moov/trak/mdia/minf/stbl/stts\n        let stts = ISOBoxer.createFullBox('stts', stbl);\n        stts._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\n\n        // moov/trak/mdia/minf/stbl/stsc\n        let stsc = ISOBoxer.createFullBox('stsc', stbl);\n        stsc._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\n\n        // moov/trak/mdia/minf/stbl/stco\n        let stco = ISOBoxer.createFullBox('stco', stbl);\n        stco._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\n\n        // moov/trak/mdia/minf/stbl/stsz\n        let stsz = ISOBoxer.createFullBox('stsz', stbl);\n        stsz._data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, sample_size = 0, sample_count = 0\n\n        // moov/trak/mdia/minf/stbl/stsd\n        createStsdBox(stbl);\n\n        // moov/mvex\n        let mvex = ISOBoxer.createBox('mvex', moov);\n\n        // moov/mvex/trex\n        createTrexBox(mvex);\n\n        if (contentProtection && protectionController) {\n            let supportedKS = protectionController.getSupportedKeySystemsFromContentProtection(contentProtection);\n            createProtectionSystemSpecificHeaderBox(moov, supportedKS);\n        }\n    }\n\n    function createMvhdBox(moov) {\n\n        let mvhd = ISOBoxer.createFullBox('mvhd', moov);\n\n        mvhd.version = 1; // version = 1  in order to have 64bits duration value\n\n        mvhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\n        mvhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\n        mvhd.timescale = timescale; // the time-scale for the entire presentation => 10000000 for MSS\n        mvhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the length of the presentation (in the indicated timescale) =>  take duration of period\n        mvhd.rate = 1.0; // 16.16 number, '1.0' = normal playback\n        mvhd.volume = 1.0; // 8.8 number, '1.0' = full volume\n        mvhd.reserved1 = 0;\n        mvhd.reserved2 = [0x0, 0x0];\n        mvhd.matrix = [\n            1, 0, 0, // provides a transformation matrix for the video;\n            0, 1, 0, // (u,v,w) are restricted here to (0,0,1)\n            0, 0, 16384\n        ];\n        mvhd.pre_defined = [0, 0, 0, 0, 0, 0];\n        mvhd.next_track_ID = trackId + 1; // indicates a value to use for the track ID of the next track to be added to this presentation\n\n        return mvhd;\n    }\n\n    function createTkhdBox(trak) {\n\n        let tkhd = ISOBoxer.createFullBox('tkhd', trak);\n\n        tkhd.version = 1; // version = 1  in order to have 64bits duration value\n        tkhd.flags = 0x1 | // Track_enabled (0x000001): Indicates that the track is enabled\n            0x2 | // Track_in_movie (0x000002):  Indicates that the track is used in the presentation\n            0x4; // Track_in_preview (0x000004):  Indicates that the track is used when previewing the presentation\n\n        tkhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\n        tkhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\n        tkhd.track_ID = trackId; // uniquely identifies this track over the entire life-time of this presentation\n        tkhd.reserved1 = 0;\n        tkhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the duration of this track (in the timescale indicated in the Movie Header Box) =>  take duration of period\n        tkhd.reserved2 = [0x0, 0x0];\n        tkhd.layer = 0; // specifies the front-to-back ordering of video tracks; tracks with lower numbers are closer to the viewer => 0 since only one video track\n        tkhd.alternate_group = 0; // specifies a group or collection of tracks => ignore\n        tkhd.volume = 1.0; // '1.0' = full volume\n        tkhd.reserved3 = 0;\n        tkhd.matrix = [\n            1, 0, 0, // provides a transformation matrix for the video;\n            0, 1, 0, // (u,v,w) are restricted here to (0,0,1)\n            0, 0, 16384\n        ];\n        tkhd.width = representation.width; // visual presentation width\n        tkhd.height = representation.height; // visual presentation height\n\n        return tkhd;\n    }\n\n    function createMdhdBox(mdia) {\n\n        let mdhd = ISOBoxer.createFullBox('mdhd', mdia);\n\n        mdhd.version = 1; // version = 1  in order to have 64bits duration value\n\n        mdhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\n        mdhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\n        mdhd.timescale = timescale; // the time-scale for the entire presentation\n        mdhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the duration of this media (in the scale of the timescale). If the duration cannot be determined then duration is set to all 1s.\n        mdhd.language = adaptationSet.lang || 'und'; // declares the language code for this media\n        mdhd.pre_defined = 0;\n\n        return mdhd;\n    }\n\n    function createHdlrBox(mdia) {\n\n        let hdlr = ISOBoxer.createFullBox('hdlr', mdia);\n\n        hdlr.pre_defined = 0;\n        switch (adaptationSet.type) {\n            case constants.VIDEO:\n                hdlr.handler_type = 'vide';\n                break;\n            case constants.AUDIO:\n                hdlr.handler_type = 'soun';\n                break;\n            default:\n                hdlr.handler_type = 'meta';\n                break;\n        }\n        hdlr.name = representation.id;\n        hdlr.reserved = [0, 0, 0];\n\n        return hdlr;\n    }\n\n    function createVmhdBox(minf) {\n\n        let vmhd = ISOBoxer.createFullBox('vmhd', minf);\n\n        vmhd.flags = 1;\n\n        vmhd.graphicsmode = 0; // specifies a composition mode for this video track, from the following enumerated set, which may be extended by derived specifications: copy = 0 copy over the existing image\n        vmhd.opcolor = [0, 0, 0]; // is a set of 3 colour values (red, green, blue) available for use by graphics modes\n\n        return vmhd;\n    }\n\n    function createSmhdBox(minf) {\n\n        let smhd = ISOBoxer.createFullBox('smhd', minf);\n\n        smhd.flags = 1;\n\n        smhd.balance = 0; // is a fixed-point 8.8 number that places mono audio tracks in a stereo space; 0 is centre (the normal value); full left is -1.0 and full right is 1.0.\n        smhd.reserved = 0;\n\n        return smhd;\n    }\n\n    function createDrefBox(dinf) {\n\n        let dref = ISOBoxer.createFullBox('dref', dinf);\n\n        dref.entry_count = 1;\n        dref.entries = [];\n\n        let url = ISOBoxer.createFullBox('url ', dref, false);\n        url.location = '';\n        url.flags = 1;\n\n        dref.entries.push(url);\n\n        return dref;\n    }\n\n    function createStsdBox(stbl) {\n\n        let stsd = ISOBoxer.createFullBox('stsd', stbl);\n\n        stsd.entries = [];\n        switch (adaptationSet.type) {\n            case constants.VIDEO:\n            case constants.AUDIO:\n                stsd.entries.push(createSampleEntry(stsd));\n                break;\n            default:\n                break;\n        }\n\n        stsd.entry_count = stsd.entries.length; // is an integer that counts the actual entries\n        return stsd;\n    }\n\n    function createSampleEntry(stsd) {\n        let codec = representation.codecs.substring(0, representation.codecs.indexOf('.'));\n\n        switch (codec) {\n            case 'avc1':\n                return createAVCVisualSampleEntry(stsd, codec);\n            case 'mp4a':\n                return createMP4AudioSampleEntry(stsd, codec);\n            default:\n                throw {\n                    code: MssErrors.MSS_UNSUPPORTED_CODEC_CODE,\n                    message: MssErrors.MSS_UNSUPPORTED_CODEC_MESSAGE,\n                    data: {\n                        codec: codec\n                    }\n                };\n        }\n    }\n\n    function createAVCVisualSampleEntry(stsd, codec) {\n        let avc1;\n\n        if (contentProtection) {\n            avc1 = ISOBoxer.createBox('encv', stsd, false);\n        } else {\n            avc1 = ISOBoxer.createBox('avc1', stsd, false);\n        }\n\n        // SampleEntry fields\n        avc1.reserved1 = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\n        avc1.data_reference_index = 1;\n\n        // VisualSampleEntry fields\n        avc1.pre_defined1 = 0;\n        avc1.reserved2 = 0;\n        avc1.pre_defined2 = [0, 0, 0];\n        avc1.height = representation.height;\n        avc1.width = representation.width;\n        avc1.horizresolution = 72; // 72 dpi\n        avc1.vertresolution = 72; // 72 dpi\n        avc1.reserved3 = 0;\n        avc1.frame_count = 1; // 1 compressed video frame per sample\n        avc1.compressorname = [\n            0x0A, 0x41, 0x56, 0x43, 0x20, 0x43, 0x6F, 0x64, // = 'AVC Coding';\n            0x69, 0x6E, 0x67, 0x00, 0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n        ];\n        avc1.depth = 0x0018; // 0x0018 – images are in colour with no alpha.\n        avc1.pre_defined3 = 65535;\n        avc1.config = createAVC1ConfigurationRecord();\n        if (contentProtection) {\n            // Create and add Protection Scheme Info Box\n            let sinf = ISOBoxer.createBox('sinf', avc1);\n\n            // Create and add Original Format Box => indicate codec type of the encrypted content\n            createOriginalFormatBox(sinf, codec);\n\n            // Create and add Scheme Type box\n            createSchemeTypeBox(sinf);\n\n            // Create and add Scheme Information Box\n            createSchemeInformationBox(sinf);\n        }\n\n        return avc1;\n    }\n\n    function createAVC1ConfigurationRecord() {\n\n        let avcC = null;\n        let avcCLength = 15; // length = 15 by default (0 SPS and 0 PPS)\n\n        // First get all SPS and PPS from codecPrivateData\n        let sps = [];\n        let pps = [];\n        let AVCProfileIndication = 0;\n        let AVCLevelIndication = 0;\n        let profile_compatibility = 0;\n\n        let nalus = representation.codecPrivateData.split('00000001').slice(1);\n        let naluBytes, naluType;\n\n        for (let i = 0; i < nalus.length; i++) {\n            naluBytes = hexStringtoBuffer(nalus[i]);\n\n            naluType = naluBytes[0] & 0x1F;\n\n            switch (naluType) {\n                case NALUTYPE_SPS:\n                    sps.push(naluBytes);\n                    avcCLength += naluBytes.length + 2; // 2 = sequenceParameterSetLength field length\n                    break;\n                case NALUTYPE_PPS:\n                    pps.push(naluBytes);\n                    avcCLength += naluBytes.length + 2; // 2 = pictureParameterSetLength field length\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        // Get profile and level from SPS\n        if (sps.length > 0) {\n            AVCProfileIndication = sps[0][1];\n            profile_compatibility = sps[0][2];\n            AVCLevelIndication = sps[0][3];\n        }\n\n        // Generate avcC buffer\n        avcC = new Uint8Array(avcCLength);\n\n        let i = 0;\n        // length\n        avcC[i++] = (avcCLength & 0xFF000000) >> 24;\n        avcC[i++] = (avcCLength & 0x00FF0000) >> 16;\n        avcC[i++] = (avcCLength & 0x0000FF00) >> 8;\n        avcC[i++] = (avcCLength & 0x000000FF);\n        avcC.set([0x61, 0x76, 0x63, 0x43], i); // type = 'avcC'\n        i += 4;\n        avcC[i++] = 1; // configurationVersion = 1\n        avcC[i++] = AVCProfileIndication;\n        avcC[i++] = profile_compatibility;\n        avcC[i++] = AVCLevelIndication;\n        avcC[i++] = 0xFF; // '11111' + lengthSizeMinusOne = 3\n        avcC[i++] = 0xE0 | sps.length; // '111' + numOfSequenceParameterSets\n        for (let n = 0; n < sps.length; n++) {\n            avcC[i++] = (sps[n].length & 0xFF00) >> 8;\n            avcC[i++] = (sps[n].length & 0x00FF);\n            avcC.set(sps[n], i);\n            i += sps[n].length;\n        }\n        avcC[i++] = pps.length; // numOfPictureParameterSets\n        for (let n = 0; n < pps.length; n++) {\n            avcC[i++] = (pps[n].length & 0xFF00) >> 8;\n            avcC[i++] = (pps[n].length & 0x00FF);\n            avcC.set(pps[n], i);\n            i += pps[n].length;\n        }\n\n        return avcC;\n    }\n\n    function createMP4AudioSampleEntry(stsd, codec) {\n        let mp4a;\n\n        if (contentProtection) {\n            mp4a = ISOBoxer.createBox('enca', stsd, false);\n        } else {\n            mp4a = ISOBoxer.createBox('mp4a', stsd, false);\n        }\n\n        // SampleEntry fields\n        mp4a.reserved1 = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\n        mp4a.data_reference_index = 1;\n\n        // AudioSampleEntry fields\n        mp4a.reserved2 = [0x0, 0x0];\n        mp4a.channelcount = representation.audioChannels;\n        mp4a.samplesize = 16;\n        mp4a.pre_defined = 0;\n        mp4a.reserved_3 = 0;\n        mp4a.samplerate = representation.audioSamplingRate << 16;\n\n        mp4a.esds = createMPEG4AACESDescriptor();\n\n        if (contentProtection) {\n            // Create and add Protection Scheme Info Box\n            let sinf = ISOBoxer.createBox('sinf', mp4a);\n\n            // Create and add Original Format Box => indicate codec type of the encrypted content\n            createOriginalFormatBox(sinf, codec);\n\n            // Create and add Scheme Type box\n            createSchemeTypeBox(sinf);\n\n            // Create and add Scheme Information Box\n            createSchemeInformationBox(sinf);\n        }\n\n        return mp4a;\n    }\n\n    function createMPEG4AACESDescriptor() {\n\n        // AudioSpecificConfig (see ISO/IEC 14496-3, subpart 1) => corresponds to hex bytes contained in 'codecPrivateData' field\n        let audioSpecificConfig = hexStringtoBuffer(representation.codecPrivateData);\n\n        // ESDS length = esds box header length (= 12) +\n        //               ES_Descriptor header length (= 5) +\n        //               DecoderConfigDescriptor header length (= 15) +\n        //               decoderSpecificInfo header length (= 2) +\n        //               AudioSpecificConfig length (= codecPrivateData length)\n        let esdsLength = 34 + audioSpecificConfig.length;\n        let esds = new Uint8Array(esdsLength);\n\n        let i = 0;\n        // esds box\n        esds[i++] = (esdsLength & 0xFF000000) >> 24; // esds box length\n        esds[i++] = (esdsLength & 0x00FF0000) >> 16; // ''\n        esds[i++] = (esdsLength & 0x0000FF00) >> 8; // ''\n        esds[i++] = (esdsLength & 0x000000FF); // ''\n        esds.set([0x65, 0x73, 0x64, 0x73], i); // type = 'esds'\n        i += 4;\n        esds.set([0, 0, 0, 0], i); // version = 0, flags = 0\n        i += 4;\n        // ES_Descriptor (see ISO/IEC 14496-1 (Systems))\n        esds[i++] = 0x03; // tag = 0x03 (ES_DescrTag)\n        esds[i++] = 20 + audioSpecificConfig.length; // size\n        esds[i++] = (trackId & 0xFF00) >> 8; // ES_ID = track_id\n        esds[i++] = (trackId & 0x00FF); // ''\n        esds[i++] = 0; // flags and streamPriority\n\n        // DecoderConfigDescriptor (see ISO/IEC 14496-1 (Systems))\n        esds[i++] = 0x04; // tag = 0x04 (DecoderConfigDescrTag)\n        esds[i++] = 15 + audioSpecificConfig.length; // size\n        esds[i++] = 0x40; // objectTypeIndication = 0x40 (MPEG-4 AAC)\n        esds[i] = 0x05 << 2; // streamType = 0x05 (Audiostream)\n        esds[i] |= 0 << 1; // upStream = 0\n        esds[i++] |= 1; // reserved = 1\n        esds[i++] = 0xFF; // buffersizeDB = undefined\n        esds[i++] = 0xFF; // ''\n        esds[i++] = 0xFF; // ''\n        esds[i++] = (representation.bandwidth & 0xFF000000) >> 24; // maxBitrate\n        esds[i++] = (representation.bandwidth & 0x00FF0000) >> 16; // ''\n        esds[i++] = (representation.bandwidth & 0x0000FF00) >> 8; // ''\n        esds[i++] = (representation.bandwidth & 0x000000FF); // ''\n        esds[i++] = (representation.bandwidth & 0xFF000000) >> 24; // avgbitrate\n        esds[i++] = (representation.bandwidth & 0x00FF0000) >> 16; // ''\n        esds[i++] = (representation.bandwidth & 0x0000FF00) >> 8; // ''\n        esds[i++] = (representation.bandwidth & 0x000000FF); // ''\n\n        // DecoderSpecificInfo (see ISO/IEC 14496-1 (Systems))\n        esds[i++] = 0x05; // tag = 0x05 (DecSpecificInfoTag)\n        esds[i++] = audioSpecificConfig.length; // size\n        esds.set(audioSpecificConfig, i); // AudioSpecificConfig bytes\n\n        return esds;\n    }\n\n    function createOriginalFormatBox(sinf, codec) {\n        let frma = ISOBoxer.createBox('frma', sinf);\n        frma.data_format = stringToCharCode(codec);\n    }\n\n    function createSchemeTypeBox(sinf) {\n        let schm = ISOBoxer.createFullBox('schm', sinf);\n\n        schm.flags = 0;\n        schm.version = 0;\n        schm.scheme_type = 0x63656E63; // 'cenc' => common encryption\n        schm.scheme_version = 0x00010000; // version set to 0x00010000 (Major version 1, Minor version 0)\n    }\n\n    function createSchemeInformationBox(sinf) {\n        let schi = ISOBoxer.createBox('schi', sinf);\n\n        // Create and add Track Encryption Box\n        createTrackEncryptionBox(schi);\n    }\n\n    function createProtectionSystemSpecificHeaderBox(moov, keySystems) {\n        let pssh_bytes,\n            pssh,\n            i,\n            parsedBuffer;\n\n        for (i = 0; i < keySystems.length; i += 1) {\n            pssh_bytes = keySystems[i].initData;\n            if (pssh_bytes) {\n                parsedBuffer = ISOBoxer.parseBuffer(pssh_bytes);\n                pssh = parsedBuffer.fetch('pssh');\n                if (pssh) {\n                    ISOBoxer.Utils.appendBox(moov, pssh);\n                }\n            }\n        }\n    }\n\n    function createTrackEncryptionBox(schi) {\n        let tenc = ISOBoxer.createFullBox('tenc', schi);\n\n        tenc.flags = 0;\n        tenc.version = 0;\n\n        tenc.default_IsEncrypted = 0x1;\n        tenc.default_IV_size = 8;\n        tenc.default_KID = (contentProtection && (contentProtection.length) > 0 && contentProtection[0]['cenc:default_KID']) ?\n            contentProtection[0]['cenc:default_KID'] : [0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\n    }\n\n    function createTrexBox(moov) {\n        let trex = ISOBoxer.createFullBox('trex', moov);\n\n        trex.track_ID = trackId;\n        trex.default_sample_description_index = 1;\n        trex.default_sample_duration = 0;\n        trex.default_sample_size = 0;\n        trex.default_sample_flags = 0;\n\n        return trex;\n    }\n\n    function hexStringtoBuffer(str) {\n        let buf = new Uint8Array(str.length / 2);\n        let i;\n\n        for (i = 0; i < str.length / 2; i += 1) {\n            buf[i] = parseInt('' + str[i * 2] + str[i * 2 + 1], 16);\n        }\n        return buf;\n    }\n\n    function stringToCharCode(str) {\n        let code = 0;\n        let i;\n\n        for (i = 0; i < str.length; i += 1) {\n            code |= str.charCodeAt(i) << ((str.length - i - 1) * 8);\n        }\n        return code;\n    }\n\n    function generateMoov(rep) {\n        if (!rep || !rep.adaptation) {\n            return;\n        }\n\n        let isoFile,\n            arrayBuffer;\n\n        representation = rep;\n        adaptationSet = representation.adaptation;\n\n        period = adaptationSet.period;\n        trackId = adaptationSet.index + 1;\n        contentProtection = period.mpd.manifest.Period_asArray[period.index].AdaptationSet_asArray[adaptationSet.index].ContentProtection;\n\n        timescale = period.mpd.manifest.Period_asArray[period.index].AdaptationSet_asArray[adaptationSet.index].SegmentTemplate.timescale;\n\n        isoFile = ISOBoxer.createFile();\n        createFtypBox(isoFile);\n        createMoovBox(isoFile);\n\n        arrayBuffer = isoFile.write();\n\n        return arrayBuffer;\n    }\n\n    instance = {\n        generateMoov: generateMoov\n    };\n\n    return instance;\n}\n\nMssFragmentMoovProcessor.__dashjs_factory_name = 'MssFragmentMoovProcessor';\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentMoovProcessor); /* jshint ignore:line */\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport MssFragmentMoofProcessor from './MssFragmentMoofProcessor';\nimport MssFragmentMoovProcessor from './MssFragmentMoovProcessor';\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest';\n\n\n// Add specific box processors not provided by codem-isoboxer library\n\nfunction arrayEqual(arr1, arr2) {\n    return (arr1.length === arr2.length) && arr1.every(function (element, index) {\n        return element === arr2[index];\n    });\n}\n\nfunction saioProcessor() {\n    this._procFullBox();\n    if (this.flags & 1) {\n        this._procField('aux_info_type', 'uint', 32);\n        this._procField('aux_info_type_parameter', 'uint', 32);\n    }\n    this._procField('entry_count', 'uint', 32);\n    this._procFieldArray('offset', this.entry_count, 'uint', (this.version === 1) ? 64 : 32);\n}\n\nfunction saizProcessor() {\n    this._procFullBox();\n    if (this.flags & 1) {\n        this._procField('aux_info_type', 'uint', 32);\n        this._procField('aux_info_type_parameter', 'uint', 32);\n    }\n    this._procField('default_sample_info_size', 'uint', 8);\n    this._procField('sample_count', 'uint', 32);\n    if (this.default_sample_info_size === 0) {\n        this._procFieldArray('sample_info_size', this.sample_count, 'uint', 8);\n    }\n}\n\nfunction sencProcessor() {\n    this._procFullBox();\n    this._procField('sample_count', 'uint', 32);\n    if (this.flags & 1) {\n        this._procField('IV_size', 'uint', 8);\n    }\n    this._procEntries('entry', this.sample_count, function (entry) {\n        this._procEntryField(entry, 'InitializationVector', 'data', 8);\n        if (this.flags & 2) {\n            this._procEntryField(entry, 'NumberOfEntries', 'uint', 16);\n            this._procSubEntries(entry, 'clearAndCryptedData', entry.NumberOfEntries, function (clearAndCryptedData) {\n                this._procEntryField(clearAndCryptedData, 'BytesOfClearData', 'uint', 16);\n                this._procEntryField(clearAndCryptedData, 'BytesOfEncryptedData', 'uint', 32);\n            });\n        }\n    });\n}\n\nfunction uuidProcessor() {\n    let tfxdUserType = [0x6D, 0x1D, 0x9B, 0x05, 0x42, 0xD5, 0x44, 0xE6, 0x80, 0xE2, 0x14, 0x1D, 0xAF, 0xF7, 0x57, 0xB2];\n    let tfrfUserType = [0xD4, 0x80, 0x7E, 0xF2, 0xCA, 0x39, 0x46, 0x95, 0x8E, 0x54, 0x26, 0xCB, 0x9E, 0x46, 0xA7, 0x9F];\n    let sepiffUserType = [0xA2, 0x39, 0x4F, 0x52, 0x5A, 0x9B, 0x4f, 0x14, 0xA2, 0x44, 0x6C, 0x42, 0x7C, 0x64, 0x8D, 0xF4];\n\n    if (arrayEqual(this.usertype, tfxdUserType)) {\n        this._procFullBox();\n        if (this._parsing) {\n            this.type = 'tfxd';\n        }\n        this._procField('fragment_absolute_time', 'uint', (this.version === 1) ? 64 : 32);\n        this._procField('fragment_duration', 'uint', (this.version === 1) ? 64 : 32);\n    }\n\n    if (arrayEqual(this.usertype, tfrfUserType)) {\n        this._procFullBox();\n        if (this._parsing) {\n            this.type = 'tfrf';\n        }\n        this._procField('fragment_count', 'uint', 8);\n        this._procEntries('entry', this.fragment_count, function (entry) {\n            this._procEntryField(entry, 'fragment_absolute_time', 'uint', (this.version === 1) ? 64 : 32);\n            this._procEntryField(entry, 'fragment_duration', 'uint', (this.version === 1) ? 64 : 32);\n        });\n    }\n\n    if (arrayEqual(this.usertype, sepiffUserType)) {\n        if (this._parsing) {\n            this.type = 'sepiff';\n        }\n        sencProcessor.call(this);\n    }\n}\n\nfunction MssFragmentProcessor(config) {\n\n    config = config || {};\n    const context = this.context;\n    const dashMetrics = config.dashMetrics;\n    const playbackController = config.playbackController;\n    const eventBus = config.eventBus;\n    const protectionController = config.protectionController;\n    const ISOBoxer = config.ISOBoxer;\n    const debug = config.debug;\n    let mssFragmentMoovProcessor,\n        mssFragmentMoofProcessor,\n        instance;\n\n    function setup() {\n        ISOBoxer.addBoxProcessor('uuid', uuidProcessor);\n        ISOBoxer.addBoxProcessor('saio', saioProcessor);\n        ISOBoxer.addBoxProcessor('saiz', saizProcessor);\n        ISOBoxer.addBoxProcessor('senc', sencProcessor);\n\n        mssFragmentMoovProcessor = MssFragmentMoovProcessor(context).create({\n            protectionController: protectionController,\n            constants: config.constants,\n            ISOBoxer: ISOBoxer});\n\n        mssFragmentMoofProcessor = MssFragmentMoofProcessor(context).create({\n            dashMetrics: dashMetrics,\n            playbackController: playbackController,\n            ISOBoxer: ISOBoxer,\n            eventBus: eventBus,\n            debug: debug,\n            errHandler: config.errHandler\n        });\n    }\n\n    function generateMoov(rep) {\n        return mssFragmentMoovProcessor.generateMoov(rep);\n    }\n\n    function processFragment(e, streamProcessor) {\n        if (!e || !e.request || !e.response) {\n            throw new Error('e parameter is missing or malformed');\n        }\n\n        if (e.request.type === 'MediaSegment') {\n            // MediaSegment => convert to Smooth Streaming moof format\n            mssFragmentMoofProcessor.convertFragment(e, streamProcessor);\n\n        } else if (e.request.type === HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE) {\n            // FragmentInfo (live) => update segments list\n            mssFragmentMoofProcessor.updateSegmentList(e, streamProcessor);\n\n            // Stop event propagation (FragmentInfo must not be added to buffer)\n            e.sender = null;\n        }\n    }\n\n    instance = {\n        generateMoov,\n        processFragment\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssFragmentProcessor.__dashjs_factory_name = 'MssFragmentProcessor';\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentProcessor); /* jshint ignore:line */\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport DataChunk from '../streaming/vo/DataChunk';\nimport FragmentRequest from '../streaming/vo/FragmentRequest';\nimport MssFragmentInfoController from './MssFragmentInfoController';\nimport MssFragmentProcessor from './MssFragmentProcessor';\nimport MssParser from './parser/MssParser';\nimport MssErrors from './errors/MssErrors';\nimport DashJSError from '../streaming/vo/DashJSError';\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest';\n\nfunction MssHandler(config) {\n\n    config = config || {};\n    const context = this.context;\n    const eventBus = config.eventBus;\n    const events = config.events;\n    const constants = config.constants;\n    const initSegmentType = config.initSegmentType;\n    const playbackController = config.playbackController;\n    const streamController = config.streamController;\n    let mssParser,\n        mssFragmentProcessor,\n        fragmentInfoControllers,\n        instance;\n\n    function setup() {\n        fragmentInfoControllers = [];\n    }\n\n    function createMssFragmentProcessor() {\n        mssFragmentProcessor = MssFragmentProcessor(context).create(config);\n    }\n\n    function getStreamProcessor(type) {\n        return streamController.getActiveStreamProcessors().filter(processor => {\n            return processor.getType() === type;\n        })[0];\n    }\n\n    function getFragmentInfoController(type) {\n        return fragmentInfoControllers.filter(controller => {\n            return (controller.getType() === type);\n        })[0];\n    }\n\n    function createDataChunk(request, streamId, endFragment) {\n        const chunk = new DataChunk();\n\n        chunk.streamId = streamId;\n        chunk.mediaInfo = request.mediaInfo;\n        chunk.segmentType = request.type;\n        chunk.start = request.startTime;\n        chunk.duration = request.duration;\n        chunk.end = chunk.start + chunk.duration;\n        chunk.index = request.index;\n        chunk.quality = request.quality;\n        chunk.representationId = request.representationId;\n        chunk.endFragment = endFragment;\n\n        return chunk;\n    }\n\n    function startFragmentInfoControllers() {\n\n        // Create MssFragmentInfoControllers for each StreamProcessor of active stream (only for audio, video or text)\n        let processors = streamController.getActiveStreamProcessors();\n        processors.forEach(function (processor) {\n            if (processor.getType() === constants.VIDEO ||\n                processor.getType() === constants.AUDIO ||\n                processor.getType() === constants.TEXT) {\n\n                let fragmentInfoController = getFragmentInfoController(processor.getType());\n                if (!fragmentInfoController) {\n                    fragmentInfoController = MssFragmentInfoController(context).create({\n                        streamProcessor: processor,\n                        baseURLController: config.baseURLController,\n                        debug: config.debug\n                    });\n                    fragmentInfoController.initialize();\n                    fragmentInfoControllers.push(fragmentInfoController);\n                }\n                fragmentInfoController.start();\n            }\n        });\n    }\n\n    function stopFragmentInfoControllers() {\n        fragmentInfoControllers.forEach(c => {\n            c.reset();\n        });\n        fragmentInfoControllers = [];\n    }\n\n    function onInitFragmentNeeded(e) {\n        let streamProcessor = getStreamProcessor(e.mediaType);\n        if (!streamProcessor) return;\n\n        // Create init segment request\n        let representationController = streamProcessor.getRepresentationController();\n        let representation = representationController.getCurrentRepresentation();\n        let mediaInfo = streamProcessor.getMediaInfo();\n\n        let request = new FragmentRequest();\n        request.mediaType = representation.adaptation.type;\n        request.type = initSegmentType;\n        request.range = representation.range;\n        request.quality = representation.index;\n        request.mediaInfo = mediaInfo;\n        request.representationId = representation.id;\n\n        const chunk = createDataChunk(request, mediaInfo.streamInfo.id, e.type !== events.FRAGMENT_LOADING_PROGRESS);\n\n        try {\n            // Generate init segment (moov)\n            chunk.bytes = mssFragmentProcessor.generateMoov(representation);\n\n            // Notify init segment has been loaded\n            eventBus.trigger(events.INIT_FRAGMENT_LOADED,\n                { chunk: chunk },\n                { streamId: mediaInfo.streamInfo.id, mediaType: representation.adaptation.type }\n            );\n        } catch (e) {\n            config.errHandler.error(new DashJSError(e.code, e.message, e.data));\n        }\n\n        // Change the sender value to stop event to be propagated\n        e.sender = null;\n    }\n\n    function onSegmentMediaLoaded(e) {\n        if (e.error) return;\n\n        let streamProcessor = getStreamProcessor(e.request.mediaType);\n        if (!streamProcessor) return;\n\n        // Process moof to transcode it from MSS to DASH (or to update segment timeline for SegmentInfo fragments)\n        mssFragmentProcessor.processFragment(e, streamProcessor);\n\n        if (e.request.type === HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE) {\n            // If FragmentInfo loaded, then notify corresponding MssFragmentInfoController\n            let fragmentInfoController = getFragmentInfoController(e.request.mediaType);\n            if (fragmentInfoController) {\n                fragmentInfoController.fragmentInfoLoaded(e);\n            }\n        }\n\n        // Start MssFragmentInfoControllers in case of start-over streams\n        let manifestInfo = e.request.mediaInfo.streamInfo.manifestInfo;\n        if (!manifestInfo.isDynamic && manifestInfo.dvrWindowSize !== Infinity) {\n            startFragmentInfoControllers();\n        }\n    }\n\n    function onPlaybackPaused() {\n        if (playbackController.getIsDynamic() && playbackController.getTime() !== 0) {\n            startFragmentInfoControllers();\n        }\n    }\n\n    function onPlaybackSeeking() {\n        if (playbackController.getIsDynamic() && playbackController.getTime() !== 0) {\n            startFragmentInfoControllers();\n        }\n    }\n\n    function onTTMLPreProcess(ttmlSubtitles) {\n        if (!ttmlSubtitles || !ttmlSubtitles.data) {\n            return;\n        }\n\n        ttmlSubtitles.data = ttmlSubtitles.data.replace(/http:\\/\\/www.w3.org\\/2006\\/10\\/ttaf1/gi, 'http://www.w3.org/ns/ttml');\n    }\n\n    function registerEvents() {\n        eventBus.on(events.INIT_FRAGMENT_NEEDED, onInitFragmentNeeded, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\n        eventBus.on(events.PLAYBACK_PAUSED, onPlaybackPaused, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\n        eventBus.on(events.PLAYBACK_SEEKING, onPlaybackSeeking, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\n        eventBus.on(events.FRAGMENT_LOADING_COMPLETED, onSegmentMediaLoaded, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\n        eventBus.on(events.TTML_TO_PARSE, onTTMLPreProcess, instance);\n    }\n\n    function reset() {\n        if (mssParser) {\n            mssParser.reset();\n            mssParser = undefined;\n        }\n\n        eventBus.off(events.INIT_FRAGMENT_NEEDED, onInitFragmentNeeded, this);\n        eventBus.off(events.PLAYBACK_PAUSED, onPlaybackPaused, this);\n        eventBus.off(events.PLAYBACK_SEEKING, onPlaybackSeeking, this);\n        eventBus.off(events.FRAGMENT_LOADING_COMPLETED, onSegmentMediaLoaded, this);\n        eventBus.off(events.TTML_TO_PARSE, onTTMLPreProcess, this);\n\n        // Reset FragmentInfoControllers\n        stopFragmentInfoControllers();\n    }\n\n    function createMssParser() {\n        mssParser = MssParser(context).create(config);\n        return mssParser;\n    }\n\n    instance = {\n        reset,\n        createMssParser,\n        createMssFragmentProcessor,\n        registerEvents\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssHandler.__dashjs_factory_name = 'MssHandler';\nconst factory = dashjs.FactoryMaker.getClassFactory(MssHandler); /* jshint ignore:line */\nfactory.errors = MssErrors;\ndashjs.FactoryMaker.updateClassFactory(MssHandler.__dashjs_factory_name, factory); /* jshint ignore:line */\nexport default factory; /* jshint ignore:line */\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport ErrorsBase from '../../core/errors/ErrorsBase';\n\n/**\n * @class\n *\n */\nclass MssErrors extends ErrorsBase {\n    constructor() {\n        super();\n        /**\n         * Error code returned when no tfrf box is detected in MSS live stream\n         */\n        this.MSS_NO_TFRF_CODE = 200;\n\n        /**\n         * Error code returned when one of the codecs defined in the manifest is not supported\n         */\n        this.MSS_UNSUPPORTED_CODEC_CODE = 201;\n\n        this.MSS_NO_TFRF_MESSAGE = 'Missing tfrf in live media segment';\n        this.MSS_UNSUPPORTED_CODEC_MESSAGE = 'Unsupported codec';\n    }\n}\n\nlet mssErrors = new MssErrors();\nexport default mssErrors;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * @module MssParser\n * @ignore\n * @param {Object} config object\n */\n\nimport BigInt from '../../../externals/BigInteger';\n\nfunction MssParser(config) {\n    config = config || {};\n    const BASE64 = config.BASE64;\n    const debug = config.debug;\n    const constants = config.constants;\n    const manifestModel = config.manifestModel;\n    const settings = config.settings;\n\n    const DEFAULT_TIME_SCALE = 10000000.0;\n    const SUPPORTED_CODECS = ['AAC', 'AACL', 'AACH', 'AACP', 'AVC1', 'H264', 'TTML', 'DFXP'];\n    // MPEG-DASH Role and accessibility mapping for text tracks according to ETSI TS 103 285 v1.1.1 (section 7.1.2)\n    const ROLE = {\n        'CAPT': 'main',\n        'SUBT': 'alternate',\n        'DESC': 'main'\n    };\n    const ACCESSIBILITY = {\n        'DESC': '2'\n    };\n    const samplingFrequencyIndex = {\n        96000: 0x0,\n        88200: 0x1,\n        64000: 0x2,\n        48000: 0x3,\n        44100: 0x4,\n        32000: 0x5,\n        24000: 0x6,\n        22050: 0x7,\n        16000: 0x8,\n        12000: 0x9,\n        11025: 0xA,\n        8000: 0xB,\n        7350: 0xC\n    };\n    const mimeTypeMap = {\n        'video': 'video/mp4',\n        'audio': 'audio/mp4',\n        'text': 'application/mp4'\n    };\n\n    let instance,\n        logger,\n        initialBufferSettings;\n\n\n    function setup() {\n        logger = debug.getLogger(instance);\n    }\n\n    function getAttributeAsBoolean(node, attrName) {\n        const value = node.getAttribute(attrName);\n        if (!value) return false;\n        return value.toLowerCase() === 'true';\n    }\n\n    function mapPeriod(smoothStreamingMedia, timescale) {\n        const period = {};\n        let streams,\n            adaptation;\n\n        // For each StreamIndex node, create an AdaptationSet element\n        period.AdaptationSet_asArray = [];\n        streams = smoothStreamingMedia.getElementsByTagName('StreamIndex');\n        for (let i = 0; i < streams.length; i++) {\n            adaptation = mapAdaptationSet(streams[i], timescale);\n            if (adaptation !== null) {\n                period.AdaptationSet_asArray.push(adaptation);\n            }\n        }\n\n        if (period.AdaptationSet_asArray.length > 0) {\n            period.AdaptationSet = (period.AdaptationSet_asArray.length > 1) ? period.AdaptationSet_asArray : period.AdaptationSet_asArray[0];\n        }\n\n        return period;\n    }\n\n    function mapAdaptationSet(streamIndex, timescale) {\n        const adaptationSet = {};\n        const representations = [];\n        let segmentTemplate;\n        let qualityLevels,\n            representation,\n            i,\n            index;\n\n        const name = streamIndex.getAttribute('Name');\n        const type = streamIndex.getAttribute('Type');\n        const lang = streamIndex.getAttribute('Language');\n        const fallBackId = lang ? type + '_' + lang : type;\n\n        adaptationSet.id = name || fallBackId;\n        adaptationSet.contentType = type;\n        adaptationSet.lang = lang || 'und';\n        adaptationSet.mimeType = mimeTypeMap[type];\n        adaptationSet.subType = streamIndex.getAttribute('Subtype');\n        adaptationSet.maxWidth = streamIndex.getAttribute('MaxWidth');\n        adaptationSet.maxHeight = streamIndex.getAttribute('MaxHeight');\n\n        // Map text tracks subTypes to MPEG-DASH AdaptationSet role and accessibility (see ETSI TS 103 285 v1.1.1, section 7.1.2)\n        if (adaptationSet.subType) {\n            if (ROLE[adaptationSet.subType]) {\n                let role = {\n                    schemeIdUri: 'urn:mpeg:dash:role:2011',\n                    value: ROLE[adaptationSet.subType]\n                };\n                adaptationSet.Role = role;\n                adaptationSet.Role_asArray = [role];\n            }\n            if (ACCESSIBILITY[adaptationSet.subType]) {\n                let accessibility = {\n                    schemeIdUri: 'urn:tva:metadata:cs:AudioPurposeCS:2007',\n                    value: ACCESSIBILITY[adaptationSet.subType]\n                };\n                adaptationSet.Accessibility = accessibility;\n                adaptationSet.Accessibility_asArray = [accessibility];\n            }\n        }\n\n        // Create a SegmentTemplate with a SegmentTimeline\n        segmentTemplate = mapSegmentTemplate(streamIndex, timescale);\n\n        qualityLevels = streamIndex.getElementsByTagName('QualityLevel');\n        // For each QualityLevel node, create a Representation element\n        for (i = 0; i < qualityLevels.length; i++) {\n            // Propagate BaseURL and mimeType\n            qualityLevels[i].BaseURL = adaptationSet.BaseURL;\n            qualityLevels[i].mimeType = adaptationSet.mimeType;\n\n            // Set quality level id\n            index = qualityLevels[i].getAttribute('Index');\n            qualityLevels[i].Id = adaptationSet.id + ((index !== null) ? ('_' + index) : '');\n\n            // Map Representation to QualityLevel\n            representation = mapRepresentation(qualityLevels[i], streamIndex);\n\n            if (representation !== null) {\n                // Copy SegmentTemplate into Representation\n                representation.SegmentTemplate = segmentTemplate;\n\n                representations.push(representation);\n            }\n        }\n\n        if (representations.length === 0) {\n            return null;\n        }\n\n        adaptationSet.Representation = (representations.length > 1) ? representations : representations[0];\n        adaptationSet.Representation_asArray = representations;\n\n        // Set SegmentTemplate\n        adaptationSet.SegmentTemplate = segmentTemplate;\n\n        return adaptationSet;\n    }\n\n    function mapRepresentation(qualityLevel, streamIndex) {\n        const representation = {};\n        const type = streamIndex.getAttribute('Type');\n        let fourCCValue = null;\n        let width = null;\n        let height = null;\n\n        representation.id = qualityLevel.Id;\n        representation.bandwidth = parseInt(qualityLevel.getAttribute('Bitrate'), 10);\n        representation.mimeType = qualityLevel.mimeType;\n\n        width = parseInt(qualityLevel.getAttribute('MaxWidth'), 10);\n        height = parseInt(qualityLevel.getAttribute('MaxHeight'), 10);\n        if (!isNaN(width)) representation.width = width;\n        if (!isNaN(height)) representation.height = height;\n\n\n        fourCCValue = qualityLevel.getAttribute('FourCC');\n\n        // If FourCC not defined at QualityLevel level, then get it from StreamIndex level\n        if (fourCCValue === null || fourCCValue === '') {\n            fourCCValue = streamIndex.getAttribute('FourCC');\n        }\n\n        // If still not defined (optionnal for audio stream, see https://msdn.microsoft.com/en-us/library/ff728116%28v=vs.95%29.aspx),\n        // then we consider the stream is an audio AAC stream\n        if (fourCCValue === null || fourCCValue === '') {\n            if (type === constants.AUDIO) {\n                fourCCValue = 'AAC';\n            } else if (type === constants.VIDEO) {\n                logger.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type \"video\"');\n                return null;\n            }\n        }\n\n        // Check if codec is supported\n        if (SUPPORTED_CODECS.indexOf(fourCCValue.toUpperCase()) === -1) {\n            // Do not send warning\n            logger.warn('Codec not supported: ' + fourCCValue);\n            return null;\n        }\n\n        // Get codecs value according to FourCC field\n        if (fourCCValue === 'H264' || fourCCValue === 'AVC1') {\n            representation.codecs = getH264Codec(qualityLevel);\n        } else if (fourCCValue.indexOf('AAC') >= 0) {\n            representation.codecs = getAACCodec(qualityLevel, fourCCValue);\n            representation.audioSamplingRate = parseInt(qualityLevel.getAttribute('SamplingRate'), 10);\n            representation.audioChannels = parseInt(qualityLevel.getAttribute('Channels'), 10);\n        } else if (fourCCValue.indexOf('TTML') || fourCCValue.indexOf('DFXP')) {\n            representation.codecs = constants.STPP;\n        }\n\n        representation.codecPrivateData = '' + qualityLevel.getAttribute('CodecPrivateData');\n        representation.BaseURL = qualityLevel.BaseURL;\n\n        return representation;\n    }\n\n    function getH264Codec(qualityLevel) {\n        let codecPrivateData = qualityLevel.getAttribute('CodecPrivateData').toString();\n        let nalHeader,\n            avcoti;\n\n\n        // Extract from the CodecPrivateData field the hexadecimal representation of the following\n        // three bytes in the sequence parameter set NAL unit.\n        // => Find the SPS nal header\n        nalHeader = /00000001[0-9]7/.exec(codecPrivateData);\n        // => Find the 6 characters after the SPS nalHeader (if it exists)\n        avcoti = nalHeader && nalHeader[0] ? (codecPrivateData.substr(codecPrivateData.indexOf(nalHeader[0]) + 10, 6)) : undefined;\n\n        return 'avc1.' + avcoti;\n    }\n\n    function getAACCodec(qualityLevel, fourCCValue) {\n        const samplingRate = parseInt(qualityLevel.getAttribute('SamplingRate'), 10);\n        let codecPrivateData = qualityLevel.getAttribute('CodecPrivateData').toString();\n        let objectType = 0;\n        let codecPrivateDataHex,\n            arr16,\n            indexFreq,\n            extensionSamplingFrequencyIndex;\n\n        //chrome problem, in implicit AAC HE definition, so when AACH is detected in FourCC\n        //set objectType to 5 => strange, it should be 2\n        if (fourCCValue === 'AACH') {\n            objectType = 0x05;\n        }\n        //if codecPrivateData is empty, build it :\n        if (codecPrivateData === undefined || codecPrivateData === '') {\n            objectType = 0x02; //AAC Main Low Complexity => object Type = 2\n            indexFreq = samplingFrequencyIndex[samplingRate];\n            if (fourCCValue === 'AACH') {\n                // 4 bytes :     XXXXX         XXXX          XXXX             XXXX                  XXXXX      XXX   XXXXXXX\n                //           ' ObjectType' 'Freq Index' 'Channels value'   'Extens Sampl Freq'  'ObjectType'  'GAS' 'alignment = 0'\n                objectType = 0x05; // High Efficiency AAC Profile = object Type = 5 SBR\n                codecPrivateData = new Uint8Array(4);\n                extensionSamplingFrequencyIndex = samplingFrequencyIndex[samplingRate * 2]; // in HE AAC Extension Sampling frequence\n                // equals to SamplingRate*2\n                //Freq Index is present for 3 bits in the first byte, last bit is in the second\n                codecPrivateData[0] = (objectType << 3) | (indexFreq >> 1);\n                codecPrivateData[1] = (indexFreq << 7) | (qualityLevel.Channels << 3) | (extensionSamplingFrequencyIndex >> 1);\n                codecPrivateData[2] = (extensionSamplingFrequencyIndex << 7) | (0x02 << 2); // origin object type equals to 2 => AAC Main Low Complexity\n                codecPrivateData[3] = 0x0; //alignment bits\n\n                arr16 = new Uint16Array(2);\n                arr16[0] = (codecPrivateData[0] << 8) + codecPrivateData[1];\n                arr16[1] = (codecPrivateData[2] << 8) + codecPrivateData[3];\n                //convert decimal to hex value\n                codecPrivateDataHex = arr16[0].toString(16);\n                codecPrivateDataHex = arr16[0].toString(16) + arr16[1].toString(16);\n\n            } else {\n                // 2 bytes :     XXXXX         XXXX          XXXX              XXX\n                //           ' ObjectType' 'Freq Index' 'Channels value'   'GAS = 000'\n                codecPrivateData = new Uint8Array(2);\n                //Freq Index is present for 3 bits in the first byte, last bit is in the second\n                codecPrivateData[0] = (objectType << 3) | (indexFreq >> 1);\n                codecPrivateData[1] = (indexFreq << 7) | (parseInt(qualityLevel.getAttribute('Channels'), 10) << 3);\n                // put the 2 bytes in an 16 bits array\n                arr16 = new Uint16Array(1);\n                arr16[0] = (codecPrivateData[0] << 8) + codecPrivateData[1];\n                //convert decimal to hex value\n                codecPrivateDataHex = arr16[0].toString(16);\n            }\n\n            codecPrivateData = '' + codecPrivateDataHex;\n            codecPrivateData = codecPrivateData.toUpperCase();\n            qualityLevel.setAttribute('CodecPrivateData', codecPrivateData);\n        } else if (objectType === 0) {\n            objectType = (parseInt(codecPrivateData.substr(0, 2), 16) & 0xF8) >> 3;\n        }\n\n        return 'mp4a.40.' + objectType;\n    }\n\n    function mapSegmentTemplate(streamIndex, timescale) {\n        const segmentTemplate = {};\n        let mediaUrl,\n            streamIndexTimeScale,\n            url;\n\n        url = streamIndex.getAttribute('Url');\n        mediaUrl = url ? url.replace('{bitrate}', '$Bandwidth$') : null;\n        mediaUrl = mediaUrl ? mediaUrl.replace('{start time}', '$Time$') : null;\n\n        streamIndexTimeScale = streamIndex.getAttribute('TimeScale');\n        streamIndexTimeScale = streamIndexTimeScale ? parseFloat(streamIndexTimeScale) : timescale;\n\n        segmentTemplate.media = mediaUrl;\n        segmentTemplate.timescale = streamIndexTimeScale;\n\n        segmentTemplate.SegmentTimeline = mapSegmentTimeline(streamIndex, segmentTemplate.timescale);\n\n        // Patch: set availabilityTimeOffset to Infinity since segments are available as long as they are present in timeline\n        segmentTemplate.availabilityTimeOffset = 'INF';\n\n        return segmentTemplate;\n    }\n\n    function mapSegmentTimeline(streamIndex, timescale) {\n        const segmentTimeline = {};\n        const chunks = streamIndex.getElementsByTagName('c');\n        const segments = [];\n        let segment,\n            prevSegment,\n            tManifest,\n            i, j, r;\n        let duration = 0;\n\n        for (i = 0; i < chunks.length; i++) {\n            segment = {};\n\n            // Get time 't' attribute value\n            tManifest = chunks[i].getAttribute('t');\n\n            // => segment.tManifest = original timestamp value as a string (for constructing the fragment request url, see DashHandler)\n            // => segment.t = number value of timestamp (maybe rounded value, but only for 0.1 microsecond)\n            if (tManifest && BigInt(tManifest).greater(BigInt(Number.MAX_SAFE_INTEGER))) {\n                segment.tManifest = tManifest;\n            }\n            segment.t = parseFloat(tManifest);\n\n            // Get duration 'd' attribute value\n            segment.d = parseFloat(chunks[i].getAttribute('d'));\n\n            // If 't' not defined for first segment then t=0\n            if ((i === 0) && !segment.t) {\n                segment.t = 0;\n            }\n\n            if (i > 0) {\n                prevSegment = segments[segments.length - 1];\n                // Update previous segment duration if not defined\n                if (!prevSegment.d) {\n                    if (prevSegment.tManifest) {\n                        prevSegment.d = BigInt(tManifest).subtract(BigInt(prevSegment.tManifest)).toJSNumber();\n                    } else {\n                        prevSegment.d = segment.t - prevSegment.t;\n                    }\n                    duration += prevSegment.d;\n                }\n                // Set segment absolute timestamp if not set in manifest\n                if (!segment.t) {\n                    if (prevSegment.tManifest) {\n                        segment.tManifest = BigInt(prevSegment.tManifest).add(BigInt(prevSegment.d)).toString();\n                        segment.t = parseFloat(segment.tManifest);\n                    } else {\n                        segment.t = prevSegment.t + prevSegment.d;\n                    }\n                }\n            }\n\n            if (segment.d) {\n                duration += segment.d;\n            }\n\n            // Create new segment\n            segments.push(segment);\n\n            // Support for 'r' attribute (i.e. \"repeat\" as in MPEG-DASH)\n            r = parseFloat(chunks[i].getAttribute('r'));\n            if (r) {\n\n                for (j = 0; j < (r - 1); j++) {\n                    prevSegment = segments[segments.length - 1];\n                    segment = {};\n                    segment.t = prevSegment.t + prevSegment.d;\n                    segment.d = prevSegment.d;\n                    if (prevSegment.tManifest) {\n                        segment.tManifest = BigInt(prevSegment.tManifest).add(BigInt(prevSegment.d)).toString();\n                    }\n                    duration += segment.d;\n                    segments.push(segment);\n                }\n            }\n        }\n\n        segmentTimeline.S = segments;\n        segmentTimeline.S_asArray = segments;\n        segmentTimeline.duration = duration / timescale;\n\n        return segmentTimeline;\n    }\n\n    function getKIDFromProtectionHeader(protectionHeader) {\n        let prHeader,\n            wrmHeader,\n            xmlReader,\n            KID;\n\n        // Get PlayReady header as byte array (base64 decoded)\n        prHeader = BASE64.decodeArray(protectionHeader.firstChild.data);\n\n        // Get Right Management header (WRMHEADER) from PlayReady header\n        wrmHeader = getWRMHeaderFromPRHeader(prHeader);\n\n        if (wrmHeader) {\n            // Convert from multi-byte to unicode\n            wrmHeader = new Uint16Array(wrmHeader.buffer);\n\n            // Convert to string\n            wrmHeader = String.fromCharCode.apply(null, wrmHeader);\n\n            // Parse <WRMHeader> to get KID field value\n            xmlReader = (new DOMParser()).parseFromString(wrmHeader, 'application/xml');\n            KID = xmlReader.querySelector('KID').textContent;\n\n            // Get KID (base64 decoded) as byte array\n            KID = BASE64.decodeArray(KID);\n\n            // Convert UUID from little-endian to big-endian\n            convertUuidEndianness(KID);\n        }\n\n        return KID;\n    }\n\n    function getWRMHeaderFromPRHeader(prHeader) {\n        let length,\n            recordCount,\n            recordType,\n            recordLength,\n            recordValue;\n        let i = 0;\n\n        // Parse PlayReady header\n\n        // Length - 32 bits (LE format)\n        length = (prHeader[i + 3] << 24) + (prHeader[i + 2] << 16) + (prHeader[i + 1] << 8) + prHeader[i]; // eslint-disable-line\n        i += 4;\n\n        // Record count - 16 bits (LE format)\n        recordCount = (prHeader[i + 1] << 8) + prHeader[i]; // eslint-disable-line\n        i += 2;\n\n        // Parse records\n        while (i < prHeader.length) {\n            // Record type - 16 bits (LE format)\n            recordType = (prHeader[i + 1] << 8) + prHeader[i];\n            i += 2;\n\n            // Check if Rights Management header (record type = 0x01)\n            if (recordType === 0x01) {\n\n                // Record length - 16 bits (LE format)\n                recordLength = (prHeader[i + 1] << 8) + prHeader[i];\n                i += 2;\n\n                // Record value => contains <WRMHEADER>\n                recordValue = new Uint8Array(recordLength);\n                recordValue.set(prHeader.subarray(i, i + recordLength));\n                return recordValue;\n            }\n        }\n\n        return null;\n    }\n\n    function convertUuidEndianness(uuid) {\n        swapBytes(uuid, 0, 3);\n        swapBytes(uuid, 1, 2);\n        swapBytes(uuid, 4, 5);\n        swapBytes(uuid, 6, 7);\n    }\n\n    function swapBytes(bytes, pos1, pos2) {\n        const temp = bytes[pos1];\n        bytes[pos1] = bytes[pos2];\n        bytes[pos2] = temp;\n    }\n\n\n    function createPRContentProtection(protectionHeader) {\n        let pro = {\n            __text: protectionHeader.firstChild.data,\n            __prefix: 'mspr'\n        };\n        return {\n            schemeIdUri: 'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95',\n            value: 'com.microsoft.playready',\n            pro: pro,\n            pro_asArray: pro\n        };\n    }\n\n    function createWidevineContentProtection(KID) {\n        let widevineCP = {\n            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed',\n            value: 'com.widevine.alpha'\n        };\n        if (!KID)\n            return widevineCP;\n        // Create Widevine CENC header (Protocol Buffer) with KID value\n        const wvCencHeader = new Uint8Array(2 + KID.length);\n        wvCencHeader[0] = 0x12;\n        wvCencHeader[1] = 0x10;\n        wvCencHeader.set(KID, 2);\n\n        // Create a pssh box\n        const length = 12 /* box length, type, version and flags */ + 16 /* SystemID */ + 4 /* data length */ + wvCencHeader.length;\n        let pssh = new Uint8Array(length);\n        let i = 0;\n\n        // Set box length value\n        pssh[i++] = (length & 0xFF000000) >> 24;\n        pssh[i++] = (length & 0x00FF0000) >> 16;\n        pssh[i++] = (length & 0x0000FF00) >> 8;\n        pssh[i++] = (length & 0x000000FF);\n\n        // Set type ('pssh'), version (0) and flags (0)\n        pssh.set([0x70, 0x73, 0x73, 0x68, 0x00, 0x00, 0x00, 0x00], i);\n        i += 8;\n\n        // Set SystemID ('edef8ba9-79d6-4ace-a3c8-27dcd51d21ed')\n        pssh.set([0xed, 0xef, 0x8b, 0xa9, 0x79, 0xd6, 0x4a, 0xce, 0xa3, 0xc8, 0x27, 0xdc, 0xd5, 0x1d, 0x21, 0xed], i);\n        i += 16;\n\n        // Set data length value\n        pssh[i++] = (wvCencHeader.length & 0xFF000000) >> 24;\n        pssh[i++] = (wvCencHeader.length & 0x00FF0000) >> 16;\n        pssh[i++] = (wvCencHeader.length & 0x0000FF00) >> 8;\n        pssh[i++] = (wvCencHeader.length & 0x000000FF);\n\n        // Copy Widevine CENC header\n        pssh.set(wvCencHeader, i);\n\n        // Convert to BASE64 string\n        pssh = String.fromCharCode.apply(null, pssh);\n        pssh = BASE64.encodeASCII(pssh);\n\n        widevineCP.pssh = { __text: pssh };\n\n        return widevineCP;\n    }\n\n    function processManifest(xmlDoc) {\n        const manifest = {};\n        const contentProtections = [];\n        const smoothStreamingMedia = xmlDoc.getElementsByTagName('SmoothStreamingMedia')[0];\n        const protection = xmlDoc.getElementsByTagName('Protection')[0];\n        let protectionHeader = null;\n        let period,\n            adaptations,\n            contentProtection,\n            KID,\n            timestampOffset,\n            startTime,\n            segments,\n            timescale,\n            segmentDuration,\n            i, j;\n\n        // Set manifest node properties\n        manifest.protocol = 'MSS';\n        manifest.profiles = 'urn:mpeg:dash:profile:isoff-live:2011';\n        manifest.type = getAttributeAsBoolean(smoothStreamingMedia, 'IsLive') ? 'dynamic' : 'static';\n        timescale = smoothStreamingMedia.getAttribute('TimeScale');\n        manifest.timescale = timescale ? parseFloat(timescale) : DEFAULT_TIME_SCALE;\n        let dvrWindowLength = parseFloat(smoothStreamingMedia.getAttribute('DVRWindowLength'));\n        // If the DVRWindowLength field is omitted for a live presentation or set to 0, the DVR window is effectively infinite\n        if (manifest.type === 'dynamic' && (dvrWindowLength === 0 || isNaN(dvrWindowLength))) {\n            dvrWindowLength = Infinity;\n        }\n        // Star-over\n        if (dvrWindowLength === 0 && getAttributeAsBoolean(smoothStreamingMedia, 'CanSeek')) {\n            dvrWindowLength = Infinity;\n        }\n\n        if (dvrWindowLength > 0) {\n            manifest.timeShiftBufferDepth = dvrWindowLength / manifest.timescale;\n        }\n\n        let duration = parseFloat(smoothStreamingMedia.getAttribute('Duration'));\n        manifest.mediaPresentationDuration = (duration === 0) ? Infinity : duration / manifest.timescale;\n        // By default, set minBufferTime to 2 sec. (but set below according to video segment duration)\n        manifest.minBufferTime = 2;\n        manifest.ttmlTimeIsRelative = true;\n\n        // Live manifest with Duration = start-over\n        if (manifest.type === 'dynamic' && duration > 0) {\n            manifest.type = 'static';\n            // We set timeShiftBufferDepth to initial duration, to be used by MssFragmentController to update segment timeline\n            manifest.timeShiftBufferDepth = duration / manifest.timescale;\n            // Duration will be set according to current segment timeline duration (see below)\n        }\n\n        if (manifest.type === 'dynamic') {\n            manifest.refreshManifestOnSwitchTrack = true; // Refresh manifest when switching tracks\n            manifest.doNotUpdateDVRWindowOnBufferUpdated = true; // DVRWindow is update by MssFragmentMoofPocessor based on tfrf boxes\n            manifest.ignorePostponeTimePeriod = true; // Never update manifest\n            manifest.availabilityStartTime = new Date(null); // Returns 1970\n        }\n\n        // Map period node to manifest root node\n        manifest.Period = mapPeriod(smoothStreamingMedia, manifest.timescale);\n        manifest.Period_asArray = [manifest.Period];\n\n        // Initialize period start time\n        period = manifest.Period;\n        period.start = 0;\n\n        // Uncomment to test live to static manifests\n        // if (manifest.type !== 'static') {\n        //     manifest.type = 'static';\n        //     manifest.mediaPresentationDuration = manifest.timeShiftBufferDepth;\n        //     manifest.timeShiftBufferDepth = null;\n        // }\n\n        // ContentProtection node\n        if (protection !== undefined) {\n            protectionHeader = xmlDoc.getElementsByTagName('ProtectionHeader')[0];\n\n            // Some packagers put newlines into the ProtectionHeader base64 string, which is not good\n            // because this cannot be correctly parsed. Let's just filter out any newlines found in there.\n            protectionHeader.firstChild.data = protectionHeader.firstChild.data.replace(/\\n|\\r/g, '');\n\n            // Get KID (in CENC format) from protection header\n            KID = getKIDFromProtectionHeader(protectionHeader);\n\n            // Create ContentProtection for PlayReady\n            contentProtection = createPRContentProtection(protectionHeader);\n            contentProtection['cenc:default_KID'] = KID;\n            contentProtections.push(contentProtection);\n\n            // Create ContentProtection for Widevine (as a CENC protection)\n            contentProtection = createWidevineContentProtection(KID);\n            contentProtection['cenc:default_KID'] = KID;\n            contentProtections.push(contentProtection);\n\n            manifest.ContentProtection = contentProtections;\n            manifest.ContentProtection_asArray = contentProtections;\n        }\n\n        adaptations = period.AdaptationSet_asArray;\n\n        for (i = 0; i < adaptations.length; i += 1) {\n            adaptations[i].SegmentTemplate.initialization = '$Bandwidth$';\n            // Propagate content protection information into each adaptation\n            if (manifest.ContentProtection !== undefined) {\n                adaptations[i].ContentProtection = manifest.ContentProtection;\n                adaptations[i].ContentProtection_asArray = manifest.ContentProtection_asArray;\n            }\n\n            if (adaptations[i].contentType === 'video') {\n                // Get video segment duration\n                segmentDuration = adaptations[i].SegmentTemplate.SegmentTimeline.S_asArray[0].d / adaptations[i].SegmentTemplate.timescale;\n                // Set minBufferTime to one segment duration\n                manifest.minBufferTime = segmentDuration;\n\n                if (manifest.type === 'dynamic') {\n                    // Match timeShiftBufferDepth to video segment timeline duration\n                    if (manifest.timeShiftBufferDepth > 0 &&\n                        manifest.timeShiftBufferDepth !== Infinity &&\n                        manifest.timeShiftBufferDepth > adaptations[i].SegmentTemplate.SegmentTimeline.duration) {\n                        manifest.timeShiftBufferDepth = adaptations[i].SegmentTemplate.SegmentTimeline.duration;\n                    }\n                }\n            }\n        }\n\n        // Cap minBufferTime to timeShiftBufferDepth\n        manifest.minBufferTime = Math.min(manifest.minBufferTime, (manifest.timeShiftBufferDepth ? manifest.timeShiftBufferDepth : Infinity));\n\n        // In case of live streams:\n        // 1- configure player buffering properties according to target live delay\n        // 2- adapt live delay and then buffers length in case timeShiftBufferDepth is too small compared to target live delay (see PlaybackController.computeLiveDelay())\n        // 3- Set retry attempts and intervals for FragmentInfo requests\n        if (manifest.type === 'dynamic') {\n            let targetLiveDelay = settings.get().streaming.delay.liveDelay;\n            if (!targetLiveDelay) {\n                const liveDelayFragmentCount = settings.get().streaming.delay.liveDelayFragmentCount !== null && !isNaN(settings.get().streaming.delay.liveDelayFragmentCount) ? settings.get().streaming.delay.liveDelayFragmentCount : 4;\n                targetLiveDelay = segmentDuration * liveDelayFragmentCount;\n            }\n            let targetDelayCapping = Math.max(manifest.timeShiftBufferDepth - 10/*END_OF_PLAYLIST_PADDING*/, manifest.timeShiftBufferDepth / 2);\n            let liveDelay = Math.min(targetDelayCapping, targetLiveDelay);\n            // Consider a margin of more than one segment in order to avoid Precondition Failed errors (412), for example if audio and video are not correctly synchronized\n            let bufferTime = liveDelay - (segmentDuration * 1.5);\n\n            // Store initial buffer settings\n            initialBufferSettings = {\n                'streaming': {\n                    'buffer': {\n                        'stableBufferTime': settings.get().streaming.buffer.stableBufferTime,\n                        'bufferTimeAtTopQuality': settings.get().streaming.buffer.bufferTimeAtTopQuality,\n                        'bufferTimeAtTopQualityLongForm': settings.get().streaming.buffer.bufferTimeAtTopQualityLongForm\n                    },\n                    'timeShiftBuffer': {\n                        calcFromSegmentTimeline: settings.get().streaming.timeShiftBuffer.calcFromSegmentTimeline\n                    },\n                    'delay': {\n                        'liveDelay': settings.get().streaming.delay.liveDelay\n                    }\n                }\n            };\n\n            settings.update({\n                'streaming': {\n                    'buffer': {\n                        'stableBufferTime': bufferTime,\n                        'bufferTimeAtTopQuality': bufferTime,\n                        'bufferTimeAtTopQualityLongForm': bufferTime\n                    },\n                    'timeShiftBuffer': {\n                        calcFromSegmentTimeline: true\n                    },\n                    'delay': {\n                        'liveDelay': liveDelay\n                    }\n                }\n            });\n        }\n\n        // Delete Content Protection under root manifest node\n        delete manifest.ContentProtection;\n        delete manifest.ContentProtection_asArray;\n\n        // In case of VOD streams, check if start time is greater than 0\n        // Then determine timestamp offset according to higher audio/video start time\n        // (use case = live stream delinearization)\n        if (manifest.type === 'static') {\n            // In case of start-over stream and manifest reloading (due to track switch)\n            // we consider previous timestampOffset to keep timelines synchronized\n            var prevManifest = manifestModel.getValue();\n            if (prevManifest && prevManifest.timestampOffset) {\n                timestampOffset = prevManifest.timestampOffset;\n            } else {\n                for (i = 0; i < adaptations.length; i++) {\n                    if (adaptations[i].contentType === constants.AUDIO || adaptations[i].contentType === constants.VIDEO) {\n                        segments = adaptations[i].SegmentTemplate.SegmentTimeline.S_asArray;\n                        startTime = segments[0].t;\n                        if (timestampOffset === undefined) {\n                            timestampOffset = startTime;\n                        }\n                        timestampOffset = Math.min(timestampOffset, startTime);\n                        // Correct content duration according to minimum adaptation's segment timeline duration\n                        // in order to force <video> element sending 'ended' event\n                        manifest.mediaPresentationDuration = Math.min(manifest.mediaPresentationDuration, adaptations[i].SegmentTemplate.SegmentTimeline.duration);\n                    }\n                }\n            }\n            if (timestampOffset > 0) {\n                // Patch segment templates timestamps and determine period start time (since audio/video should not be aligned to 0)\n                manifest.timestampOffset = timestampOffset;\n                for (i = 0; i < adaptations.length; i++) {\n                    segments = adaptations[i].SegmentTemplate.SegmentTimeline.S_asArray;\n                    for (j = 0; j < segments.length; j++) {\n                        if (!segments[j].tManifest) {\n                            segments[j].tManifest = segments[j].t.toString();\n                        }\n                        segments[j].t -= timestampOffset;\n                    }\n                    if (adaptations[i].contentType === constants.AUDIO || adaptations[i].contentType === constants.VIDEO) {\n                        period.start = Math.max(segments[0].t, period.start);\n                        adaptations[i].SegmentTemplate.presentationTimeOffset = period.start;\n                    }\n                }\n                period.start /= manifest.timescale;\n            }\n        }\n\n        // Floor the duration to get around precision differences between segments timestamps and MSE buffer timestamps\n        // and then avoid 'ended' event not being raised\n        manifest.mediaPresentationDuration = Math.floor(manifest.mediaPresentationDuration * 1000) / 1000;\n        period.duration = manifest.mediaPresentationDuration;\n\n        return manifest;\n    }\n\n    function parseDOM(data) {\n        let xmlDoc = null;\n\n        if (window.DOMParser) {\n            const parser = new window.DOMParser();\n\n            xmlDoc = parser.parseFromString(data, 'text/xml');\n            if (xmlDoc.getElementsByTagName('parsererror').length > 0) {\n                throw new Error('parsing the manifest failed');\n            }\n        }\n\n        return xmlDoc;\n    }\n\n    function getMatchers() {\n        return null;\n    }\n\n    function getIron() {\n        return null;\n    }\n\n    function internalParse(data) {\n        let xmlDoc = null;\n        let manifest = null;\n\n        const startTime = window.performance.now();\n\n        // Parse the MSS XML manifest\n        xmlDoc = parseDOM(data);\n\n        const xmlParseTime = window.performance.now();\n\n        if (xmlDoc === null) {\n            return null;\n        }\n\n        // Convert MSS manifest into DASH manifest\n        manifest = processManifest(xmlDoc, new Date());\n\n        const mss2dashTime = window.performance.now();\n\n        logger.info('Parsing complete: (xmlParsing: ' + (xmlParseTime - startTime).toPrecision(3) + 'ms, mss2dash: ' + (mss2dashTime - xmlParseTime).toPrecision(3) + 'ms, total: ' + ((mss2dashTime - startTime) / 1000).toPrecision(3) + 's)');\n\n        return manifest;\n    }\n\n    function reset() {\n        // Restore initial buffer settings\n        if (initialBufferSettings) {\n            settings.update(initialBufferSettings);\n        }\n    }\n\n    instance = {\n        parse: internalParse,\n        getMatchers: getMatchers,\n        getIron: getIron,\n        reset: reset\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssParser.__dashjs_factory_name = 'MssParser';\nexport default dashjs.FactoryMaker.getClassFactory(MssParser); /* jshint ignore:line */\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport EventsBase from '../core/events/EventsBase';\n\n/**\n * @class\n * @implements EventsBase\n */\nclass MediaPlayerEvents extends EventsBase {\n\n    /**\n     * @description Public facing external events to be used when developing a player that implements dash.js.\n     */\n    constructor() {\n        super();\n        /**\n         * Triggered when playback will not start yet\n         * as the MPD's availabilityStartTime is in the future.\n         * Check delay property in payload to determine time before playback will start.\n         * @event MediaPlayerEvents#AST_IN_FUTURE\n         */\n        this.AST_IN_FUTURE = 'astInFuture';\n\n        /**\n         * Triggered when the BaseURLs have been updated.\n         * @event MediaPlayerEvents#BASE_URLS_UPDATED\n         */\n        this.BASE_URLS_UPDATED = 'baseUrlsUpdated';\n\n        /**\n         * Triggered when the video element's buffer state changes to stalled.\n         * Check mediaType in payload to determine type (Video, Audio, FragmentedText).\n         * @event MediaPlayerEvents#BUFFER_EMPTY\n         */\n        this.BUFFER_EMPTY = 'bufferStalled';\n\n        /**\n         * Triggered when the video element's buffer state changes to loaded.\n         * Check mediaType in payload to determine type (Video, Audio, FragmentedText).\n         * @event MediaPlayerEvents#BUFFER_LOADED\n         */\n        this.BUFFER_LOADED = 'bufferLoaded';\n\n        /**\n         * Triggered when the video element's buffer state changes, either stalled or loaded. Check payload for state.\n         * @event MediaPlayerEvents#BUFFER_LEVEL_STATE_CHANGED\n         */\n        this.BUFFER_LEVEL_STATE_CHANGED = 'bufferStateChanged';\n\n        /**\n         * Triggered when the buffer level of a media type has been updated\n         * @event MediaPlayerEvents#BUFFER_LEVEL_UPDATED\n         */\n        this.BUFFER_LEVEL_UPDATED = 'bufferLevelUpdated';\n\n        /**\n         * Triggered when a font signalled by a DVB Font Download has been added to the document FontFaceSet interface.\n         * @event MediaPlayerEvents#DVB_FONT_DOWNLOAD_ADDED\n         */\n        this.DVB_FONT_DOWNLOAD_ADDED = 'dvbFontDownloadAdded';\n\n        /**\n         * Triggered when a font signalled by a DVB Font Download has successfully downloaded and the FontFace can be used.\n         * @event MediaPlayerEvents#DVB_FONT_DOWNLOAD_COMPLETE\n         */\n        this.DVB_FONT_DOWNLOAD_COMPLETE = 'dvbFontDownloadComplete';\n\n        /**\n         * Triggered when a font signalled by a DVB Font Download could not be successfully downloaded, so the FontFace will not be used.\n         * @event MediaPlayerEvents#DVB_FONT_DOWNLOAD_FAILED\n         */\n        this.DVB_FONT_DOWNLOAD_FAILED = 'dvbFontDownloadFailed';\n\n        /**\n         * Triggered when a dynamic stream changed to static (transition phase between Live and On-Demand).\n         * @event MediaPlayerEvents#DYNAMIC_TO_STATIC\n         */\n        this.DYNAMIC_TO_STATIC = 'dynamicToStatic';\n\n        /**\n         * Triggered when there is an error from the element or MSE source buffer.\n         * @event MediaPlayerEvents#ERROR\n         */\n        this.ERROR = 'error';\n        /**\n         * Triggered when a fragment download has completed.\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_COMPLETED\n         */\n        this.FRAGMENT_LOADING_COMPLETED = 'fragmentLoadingCompleted';\n\n        /**\n         * Triggered when a partial fragment download has completed.\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_PROGRESS\n         */\n        this.FRAGMENT_LOADING_PROGRESS = 'fragmentLoadingProgress';\n        /**\n         * Triggered when a fragment download has started.\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_STARTED\n         */\n        this.FRAGMENT_LOADING_STARTED = 'fragmentLoadingStarted';\n\n        /**\n         * Triggered when a fragment download is abandoned due to detection of slow download base on the ABR abandon rule..\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_ABANDONED\n         */\n        this.FRAGMENT_LOADING_ABANDONED = 'fragmentLoadingAbandoned';\n\n        /**\n         * Triggered when {@link module:Debug} logger methods are called.\n         * @event MediaPlayerEvents#LOG\n         */\n        this.LOG = 'log';\n\n        /**\n         * Triggered when the manifest load is started\n         * @event MediaPlayerEvents#MANIFEST_LOADING_STARTED\n         */\n        this.MANIFEST_LOADING_STARTED = 'manifestLoadingStarted';\n\n        /**\n         * Triggered when the manifest loading is finished, providing the request object information\n         * @event MediaPlayerEvents#MANIFEST_LOADING_FINISHED\n         */\n        this.MANIFEST_LOADING_FINISHED = 'manifestLoadingFinished';\n\n        /**\n         * Triggered when the manifest load is complete, providing the payload\n         * @event MediaPlayerEvents#MANIFEST_LOADED\n         */\n        this.MANIFEST_LOADED = 'manifestLoaded';\n\n        /**\n         * Triggered anytime there is a change to the overall metrics.\n         * @event MediaPlayerEvents#METRICS_CHANGED\n         */\n        this.METRICS_CHANGED = 'metricsChanged';\n\n        /**\n         * Triggered when an individual metric is added, updated or cleared.\n         * @event MediaPlayerEvents#METRIC_CHANGED\n         */\n        this.METRIC_CHANGED = 'metricChanged';\n\n        /**\n         * Triggered every time a new metric is added.\n         * @event MediaPlayerEvents#METRIC_ADDED\n         */\n        this.METRIC_ADDED = 'metricAdded';\n\n        /**\n         * Triggered every time a metric is updated.\n         * @event MediaPlayerEvents#METRIC_UPDATED\n         */\n        this.METRIC_UPDATED = 'metricUpdated';\n\n        /**\n         * Triggered when a new stream (period) starts.\n         * @event MediaPlayerEvents#PERIOD_SWITCH_STARTED\n         */\n        this.PERIOD_SWITCH_STARTED = 'periodSwitchStarted';\n\n        /**\n         * Triggered at the stream end of a period.\n         * @event MediaPlayerEvents#PERIOD_SWITCH_COMPLETED\n         */\n        this.PERIOD_SWITCH_COMPLETED = 'periodSwitchCompleted';\n\n        /**\n         * Triggered when an ABR up /down switch is initiated; either by user in manual mode or auto mode via ABR rules.\n         * @event MediaPlayerEvents#QUALITY_CHANGE_REQUESTED\n         */\n        this.QUALITY_CHANGE_REQUESTED = 'qualityChangeRequested';\n\n        /**\n         * Triggered when the new ABR quality is being rendered on-screen.\n         * @event MediaPlayerEvents#QUALITY_CHANGE_RENDERED\n         */\n        this.QUALITY_CHANGE_RENDERED = 'qualityChangeRendered';\n\n        /**\n         * Triggered when the new track is being rendered.\n         * @event MediaPlayerEvents#TRACK_CHANGE_RENDERED\n         */\n        this.TRACK_CHANGE_RENDERED = 'trackChangeRendered';\n\n        /**\n         * Triggered when a stream (period) is being loaded\n         * @event MediaPlayerEvents#STREAM_INITIALIZING\n         */\n        this.STREAM_INITIALIZING = 'streamInitializing';\n\n        /**\n         * Triggered when a stream (period) is loaded\n         * @event MediaPlayerEvents#STREAM_UPDATED\n         */\n        this.STREAM_UPDATED = 'streamUpdated';\n\n        /**\n         * Triggered when a stream (period) is activated\n         * @event MediaPlayerEvents#STREAM_ACTIVATED\n         */\n        this.STREAM_ACTIVATED = 'streamActivated';\n\n        /**\n         * Triggered when a stream (period) is deactivated\n         * @event MediaPlayerEvents#STREAM_DEACTIVATED\n         */\n        this.STREAM_DEACTIVATED = 'streamDeactivated';\n\n        /**\n         * Triggered when a stream (period) is activated\n         * @event MediaPlayerEvents#STREAM_INITIALIZED\n         */\n        this.STREAM_INITIALIZED = 'streamInitialized';\n\n        /**\n         * Triggered when the player has been reset.\n         * @event MediaPlayerEvents#STREAM_TEARDOWN_COMPLETE\n         */\n        this.STREAM_TEARDOWN_COMPLETE = 'streamTeardownComplete';\n\n        /**\n         * Triggered once all text tracks detected in the MPD are added to the video element.\n         * @event MediaPlayerEvents#TEXT_TRACKS_ADDED\n         */\n        this.TEXT_TRACKS_ADDED = 'allTextTracksAdded';\n\n        /**\n         * Triggered when a text track is added to the video element's TextTrackList\n         * @event MediaPlayerEvents#TEXT_TRACK_ADDED\n         */\n        this.TEXT_TRACK_ADDED = 'textTrackAdded';\n\n        /**\n         * Triggered when a text track should be shown\n         * @event MediaPlayerEvents#CUE_ENTER\n         */\n        this.CUE_ENTER = 'cueEnter'\n\n        /**\n         * Triggered when a text track should be hidden\n         * @event MediaPlayerEvents#CUE_ENTER\n         */\n        this.CUE_EXIT = 'cueExit'\n\n        /**\n         * Triggered when a throughput measurement based on the last segment request has been stored\n         * @event MediaPlayerEvents#THROUGHPUT_MEASUREMENT_STORED\n         */\n        this.THROUGHPUT_MEASUREMENT_STORED = 'throughputMeasurementStored';\n\n        /**\n         * Triggered when a ttml chunk is parsed.\n         * @event MediaPlayerEvents#TTML_PARSED\n         */\n        this.TTML_PARSED = 'ttmlParsed';\n\n        /**\n         * Triggered when a ttml chunk has to be parsed.\n         * @event MediaPlayerEvents#TTML_TO_PARSE\n         */\n        this.TTML_TO_PARSE = 'ttmlToParse';\n\n        /**\n         * Triggered when a caption is rendered.\n         * @event MediaPlayerEvents#CAPTION_RENDERED\n         */\n        this.CAPTION_RENDERED = 'captionRendered';\n\n        /**\n         * Triggered when the caption container is resized.\n         * @event MediaPlayerEvents#CAPTION_CONTAINER_RESIZE\n         */\n        this.CAPTION_CONTAINER_RESIZE = 'captionContainerResize';\n\n        /**\n         * Sent when enough data is available that the media can be played,\n         * at least for a couple of frames.  This corresponds to the\n         * HAVE_ENOUGH_DATA readyState.\n         * @event MediaPlayerEvents#CAN_PLAY\n         */\n        this.CAN_PLAY = 'canPlay';\n\n        /**\n         * This corresponds to the CAN_PLAY_THROUGH readyState.\n         * @event MediaPlayerEvents#CAN_PLAY_THROUGH\n         */\n        this.CAN_PLAY_THROUGH = 'canPlayThrough';\n\n        /**\n         * Sent when playback completes.\n         * @event MediaPlayerEvents#PLAYBACK_ENDED\n         */\n        this.PLAYBACK_ENDED = 'playbackEnded';\n\n        /**\n         * Sent when an error occurs.  The element's error\n         * attribute contains more information.\n         * @event MediaPlayerEvents#PLAYBACK_ERROR\n         */\n        this.PLAYBACK_ERROR = 'playbackError';\n\n        /**\n         * Sent when playback is not allowed (for example if user gesture is needed).\n         * @event MediaPlayerEvents#PLAYBACK_NOT_ALLOWED\n         */\n        this.PLAYBACK_NOT_ALLOWED = 'playbackNotAllowed';\n\n        /**\n         * The media's metadata has finished loading; all attributes now\n         * contain as much useful information as they're going to.\n         * @event MediaPlayerEvents#PLAYBACK_METADATA_LOADED\n         */\n        this.PLAYBACK_METADATA_LOADED = 'playbackMetaDataLoaded';\n\n        /**\n         * The event is fired when the frame at the current playback position of the media has finished loading;\n         * often the first frame\n         * @event MediaPlayerEvents#PLAYBACK_LOADED_DATA\n         */\n        this.PLAYBACK_LOADED_DATA = 'playbackLoadedData';\n\n        /**\n         * Sent when playback is paused.\n         * @event MediaPlayerEvents#PLAYBACK_PAUSED\n         */\n        this.PLAYBACK_PAUSED = 'playbackPaused';\n\n        /**\n         * Sent when the media begins to play (either for the first time, after having been paused,\n         * or after ending and then restarting).\n         *\n         * @event MediaPlayerEvents#PLAYBACK_PLAYING\n         */\n        this.PLAYBACK_PLAYING = 'playbackPlaying';\n\n        /**\n         * Sent periodically to inform interested parties of progress downloading\n         * the media. Information about the current amount of the media that has\n         * been downloaded is available in the media element's buffered attribute.\n         * @event MediaPlayerEvents#PLAYBACK_PROGRESS\n         */\n        this.PLAYBACK_PROGRESS = 'playbackProgress';\n\n        /**\n         * Sent when the playback speed changes.\n         * @event MediaPlayerEvents#PLAYBACK_RATE_CHANGED\n         */\n        this.PLAYBACK_RATE_CHANGED = 'playbackRateChanged';\n\n        /**\n         * Sent when a seek operation completes.\n         * @event MediaPlayerEvents#PLAYBACK_SEEKED\n         */\n        this.PLAYBACK_SEEKED = 'playbackSeeked';\n\n        /**\n         * Sent when a seek operation begins.\n         * @event MediaPlayerEvents#PLAYBACK_SEEKING\n         */\n        this.PLAYBACK_SEEKING = 'playbackSeeking';\n\n        /**\n         * Sent when the video element reports stalled\n         * @event MediaPlayerEvents#PLAYBACK_STALLED\n         */\n        this.PLAYBACK_STALLED = 'playbackStalled';\n\n        /**\n         * Sent when playback of the media starts after having been paused;\n         * that is, when playback is resumed after a prior pause event.\n         *\n         * @event MediaPlayerEvents#PLAYBACK_STARTED\n         */\n        this.PLAYBACK_STARTED = 'playbackStarted';\n\n        /**\n         * The time indicated by the element's currentTime attribute has changed.\n         * @event MediaPlayerEvents#PLAYBACK_TIME_UPDATED\n         */\n        this.PLAYBACK_TIME_UPDATED = 'playbackTimeUpdated';\n\n        /**\n         * Sent when the video element reports that the volume has changed\n         * @event MediaPlayerEvents#PLAYBACK_VOLUME_CHANGED\n         */\n        this.PLAYBACK_VOLUME_CHANGED = 'playbackVolumeChanged';\n\n        /**\n         * Sent when the media playback has stopped because of a temporary lack of data.\n         *\n         * @event MediaPlayerEvents#PLAYBACK_WAITING\n         */\n        this.PLAYBACK_WAITING = 'playbackWaiting';\n\n        /**\n         * Manifest validity changed - As a result of an MPD validity expiration event.\n         * @event MediaPlayerEvents#MANIFEST_VALIDITY_CHANGED\n         */\n        this.MANIFEST_VALIDITY_CHANGED = 'manifestValidityChanged';\n\n        /**\n         * Dash events are triggered at their respective start points on the timeline.\n         * @event MediaPlayerEvents#EVENT_MODE_ON_START\n         */\n        this.EVENT_MODE_ON_START = 'eventModeOnStart';\n\n        /**\n         * Dash events are triggered as soon as they were parsed.\n         * @event MediaPlayerEvents#EVENT_MODE_ON_RECEIVE\n         */\n        this.EVENT_MODE_ON_RECEIVE = 'eventModeOnReceive';\n\n        /**\n         * Event that is dispatched whenever the player encounters a potential conformance validation that might lead to unexpected/not optimal behavior\n         * @event MediaPlayerEvents#CONFORMANCE_VIOLATION\n         */\n        this.CONFORMANCE_VIOLATION = 'conformanceViolation';\n\n        /**\n         * Event that is dispatched whenever the player switches to a different representation\n         * @event MediaPlayerEvents#REPRESENTATION_SWITCH\n         */\n        this.REPRESENTATION_SWITCH = 'representationSwitch';\n\n        /**\n         * Event that is dispatched whenever an adaptation set is removed due to all representations not being supported.\n         * @event MediaPlayerEvents#ADAPTATION_SET_REMOVED_NO_CAPABILITIES\n         */\n        this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES = 'adaptationSetRemovedNoCapabilities';\n\n        /**\n         * Triggered when a content steering request has completed.\n         * @event MediaPlayerEvents#CONTENT_STEERING_REQUEST_COMPLETED\n         */\n        this.CONTENT_STEERING_REQUEST_COMPLETED = 'contentSteeringRequestCompleted';\n\n        /**\n         * Triggered when an inband prft (ProducerReferenceTime) boxes has been received.\n         * @event MediaPlayerEvents#INBAND_PRFT\n         */\n        this.INBAND_PRFT = 'inbandPrft';\n\n        /**\n         * The streaming attribute of the Managed Media Source is true\n         * @type {string}\n         */\n        this.MANAGED_MEDIA_SOURCE_START_STREAMING = 'managedMediaSourceStartStreaming';\n\n        /**\n         * The streaming attribute of the Managed Media Source is false\n         * @type {string}\n         */\n        this.MANAGED_MEDIA_SOURCE_END_STREAMING = 'managedMediaSourceEndStreaming';\n    }\n}\n\nlet mediaPlayerEvents = new MediaPlayerEvents();\nexport default mediaPlayerEvents;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass DashJSError {\n    constructor(code, message, data) {\n        this.code = code || null;\n        this.message = message || null;\n        this.data = data || null;\n    }\n}\n\nexport default DashJSError;","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * @class\n * @ignore\n */\nclass DataChunk {\n    //Represents a data structure that keep all the necessary info about a single init/media segment\n    constructor() {\n        this.streamId = null;\n        this.mediaInfo = null;\n        this.segmentType = null;\n        this.quality = NaN;\n        this.index = NaN;\n        this.bytes = null;\n        this.start = NaN;\n        this.end = NaN;\n        this.duration = NaN;\n        this.representationId = null;\n        this.endFragment = null;\n    }\n}\n\nexport default DataChunk;","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { HTTPRequest } from '../vo/metrics/HTTPRequest';\n\n/**\n * @class\n * @ignore\n */\nclass FragmentRequest {\n    constructor(url) {\n        this.action = FragmentRequest.ACTION_DOWNLOAD;\n        this.startTime = NaN;\n        this.mediaStartTime = NaN;\n        this.mediaType = null;\n        this.mediaInfo = null;\n        this.type = null;\n        this.duration = NaN;\n        this.timescale = NaN;\n        this.range = null;\n        this.url = url || null;\n        this.serviceLocation = null;\n        this.requestStartDate = null;\n        this.firstByteDate = null;\n        this.requestEndDate = null;\n        this.quality = NaN;\n        this.index = NaN;\n        this.availabilityStartTime = null;\n        this.availabilityEndTime = null;\n        this.wallStartTime = null;\n        this.bytesLoaded = NaN;\n        this.bytesTotal = NaN;\n        this.delayLoadingTime = NaN;\n        this.responseType = 'arraybuffer';\n        this.representationId = null;\n    }\n\n    isInitializationRequest() {\n        return (this.type && this.type === HTTPRequest.INIT_SEGMENT_TYPE);\n    }\n\n    setInfo(info) {\n        this.type = info && info.init ? HTTPRequest.INIT_SEGMENT_TYPE : HTTPRequest.MEDIA_SEGMENT_TYPE;\n        this.url = info && info.url ? info.url : null;\n        this.range = info && info.range ? info.range.start + '-' + info.range.end : null;\n        this.mediaType = info && info.mediaType ? info.mediaType : null;\n    }\n}\n\nFragmentRequest.ACTION_DOWNLOAD = 'download';\nFragmentRequest.ACTION_COMPLETE = 'complete';\n\nexport default FragmentRequest;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc This Object holds reference to the HTTPRequest for manifest, fragment and xlink loading.\n * Members which are not defined in ISO23009-1 Annex D should be prefixed by a _ so that they are ignored\n * by Metrics Reporting code.\n * @ignore\n */\nclass HTTPRequest {\n    /**\n     * @class\n     */\n    constructor() {\n        /**\n         * Identifier of the TCP connection on which the HTTP request was sent.\n         * @public\n         */\n        this.tcpid = null;\n        /**\n         * This is an optional parameter and should not be included in HTTP request/response transactions for progressive download.\n         * The type of the request:\n         * - MPD\n         * - XLink expansion\n         * - Initialization Fragment\n         * - Index Fragment\n         * - Media Fragment\n         * - Bitstream Switching Fragment\n         * - other\n         * @public\n         */\n        this.type = null;\n        /**\n         * The original URL (before any redirects or failures)\n         * @public\n         */\n        this.url = null;\n        /**\n         * The actual URL requested, if different from above\n         * @public\n         */\n        this.actualurl = null;\n        /**\n         * The contents of the byte-range-spec part of the HTTP Range header.\n         * @public\n         */\n        this.range = null;\n        /**\n         * Real-Time | The real time at which the request was sent.\n         * @public\n         */\n        this.trequest = null;\n        /**\n         * Real-Time | The real time at which the first byte of the response was received.\n         * @public\n         */\n        this.tresponse = null;\n        /**\n         * The HTTP response code.\n         * @public\n         */\n        this.responsecode = null;\n        /**\n         * The duration of the throughput trace intervals (ms), for successful requests only.\n         * @public\n         */\n        this.interval = null;\n        /**\n         * Throughput traces, for successful requests only.\n         * @public\n         */\n        this.trace = [];\n        /**\n         * The CMSD static and dynamic values retrieved from CMSD response headers.\n         * @public\n         */\n        this.cmsd = null;\n\n        /**\n         * Type of stream (\"audio\" | \"video\" etc..)\n         * @public\n         */\n        this._stream = null;\n        /**\n         * Real-Time | The real time at which the request finished.\n         * @public\n         */\n        this._tfinish = null;\n        /**\n         * The duration of the media requests, if available, in seconds.\n         * @public\n         */\n        this._mediaduration = null;\n        /**\n         * The media segment quality\n         * @public\n         */\n        this._quality = null;\n        /**\n         * all the response headers from request.\n         * @public\n         */\n        this._responseHeaders = null;\n        /**\n         * The selected service location for the request. string.\n         * @public\n         */\n        this._serviceLocation = null;\n        /**\n         * The type of the loader that was used. Distinguish between fetch loader and xhr loader\n         */\n        this._fileLoaderType = null;\n    }\n}\n\n/**\n * @classdesc This Object holds reference to the progress of the HTTPRequest.\n * @ignore\n */\nclass HTTPRequestTrace {\n    /**\n     * @class\n     */\n    constructor() {\n        /**\n         * Real-Time | Measurement stream start.\n         * @public\n         */\n        this.s = null;\n        /**\n         * Measurement stream duration (ms).\n         * @public\n         */\n        this.d = null;\n        /**\n         * List of integers counting the bytes received in each trace interval within the measurement stream.\n         * @public\n         */\n        this.b = [];\n    }\n}\n\nHTTPRequest.GET = 'GET';\nHTTPRequest.HEAD = 'HEAD';\nHTTPRequest.MPD_TYPE = 'MPD';\nHTTPRequest.XLINK_EXPANSION_TYPE = 'XLinkExpansion';\nHTTPRequest.INIT_SEGMENT_TYPE = 'InitializationSegment';\nHTTPRequest.INDEX_SEGMENT_TYPE = 'IndexSegment';\nHTTPRequest.MEDIA_SEGMENT_TYPE = 'MediaSegment';\nHTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE = 'BitstreamSwitchingSegment';\nHTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE = 'FragmentInfoSegment';\nHTTPRequest.DVB_REPORTING_TYPE = 'DVBReporting';\nHTTPRequest.LICENSE = 'license';\nHTTPRequest.CONTENT_STEERING_TYPE = 'ContentSteering';\nHTTPRequest.OTHER_TYPE = 'other';\n\nexport {HTTPRequest, HTTPRequestTrace};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport MssHandler from './MssHandler';\n\n// Shove both of these into the global scope\nvar context = (typeof window !== 'undefined' && window) || global;\n\nvar dashjs = context.dashjs;\nif (!dashjs) {\n    dashjs = context.dashjs = {};\n}\n\ndashjs.MssHandler = MssHandler;\n\nexport default dashjs;\nexport { MssHandler };\n"],"names":["bigInt","undefined","BASE","LOG_BASE","MAX_INT","MAX_INT_ARR","smallToArray","DEFAULT_ALPHABET","supportsNativeBigInt","BigInt","Integer","v","radix","alphabet","caseSensitive","parseValue","parseBase","BigInteger","value","sign","isSmall","prototype","Object","create","SmallInteger","NativeBigInt","isPrecise","n","Math","floor","arrayToSmall","arr","trim","length","compareAbs","i","createArray","x","Array","truncate","ceil","add","a","b","l_a","l_b","r","carry","base","sum","push","addAny","addSmall","l","subtract","negate","abs","plus","a_l","b_l","borrow","difference","subtractAny","subtractSmall","minus","small","multiplyLong","product","a_i","b_j","j","multiplySmall","shiftLeft","concat","multiplyKaratsuba","y","max","slice","d","c","ac","bd","abcd","useKaratsuba","l1","l2","multiply","times","multiplySmallAndArray","_multiplyBySmall","square","a_j","divMod1","result","divisorMostSignificantDigit","lambda","remainder","divisor","quotientDigit","shift","q","divModSmall","divMod2","part","guess","xlen","highx","highy","check","unshift","reverse","quotient","divModAny","self","Error","comparison","qSign","mod","mSign","divmod","divide","over","pow","isEven","toString","_0","_1","_2","isNegative","modPow","exp","isZero","isPositive","isOdd","compare","Infinity","compareTo","equals","eq","notEquals","neq","greater","gt","lesser","lt","greaterOrEquals","geq","lesserOrEquals","leq","isUnit","isDivisibleBy","isBasicPrime","millerRabinTest","nPrev","prev","t","next","isPrime","strict","bits","bitLength","logN","log","toJSNumber","isProbablePrime","iterations","randBetween","modInv","zero","newT","one","newR","lastT","lastR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","String","shiftRight","remQuo","bitwise","fn","xSign","ySign","xRem","not","yRem","xDigit","yDigit","xDivMod","yDivMod","and","or","xor","LOBMASK_I","LOBMASK_BI","roughLOB","integerLogarithm","tmp","p","e","min","gcd","lcm","low","high","range","random","digits","toBase","restricted","top","digit","fromArray","text","toLowerCase","absBase","alphabetValues","start","parseBaseFromArray","val","stringify","apply","map","valueOf","neg","Number","out","left","toBaseString","join","toArray","str","zeros","toJSON","parseInt","parseStringValue","split","decimalPlace","indexOf","isValid","test","parseNumberValue","minusOne","isInstance","module","hasOwnProperty","exports","define","amd","ErrorsBase","errors","config","override","publicOnly","err","EventsBase","events","evt","FragmentRequest","HTTPRequest","MssFragmentInfoController","instance","logger","fragmentModel","started","type","loadFragmentTimeout","startTime","startFragmentTime","index","streamProcessor","baseURLController","debug","controllerType","setup","getLogger","initialize","getType","getFragmentModel","loadNextFragmentInfo","stop","clearTimeout","reset","representation","getCurrentRepresentation","manifest","adaptation","period","mpd","Period_asArray","AdaptationSet_asArray","segments","SegmentTemplate","SegmentTimeline","S_asArray","segment","request","getRequestForSegment","requestFragment","call","timescale","mediaType","MSS_FRAGMENT_INFO_SEGMENT_TYPE","duration","quality","mediaInfo","getMediaInfo","adaptationIndex","representationId","id","url","resolve","path","media","replace","bandwidth","tManifest","representationController","getRepresentationController","isFragmentLoadedOrPending","executeRequest","fragmentInfoLoaded","response","error","deltaFragmentTime","deltaTime","delay","Date","getTime","setTimeout","__dashjs_factory_name","dashjs","FactoryMaker","getClassFactory","DashJSError","MssErrors","Events","MssFragmentMoofProcessor","dashMetrics","playbackController","errorHandler","errHandler","eventBus","ISOBoxer","processTfrf","tfrf","tfdt","timeShiftBufferDepth","MSS_NO_TFRF_CODE","MSS_NO_TFRF_MESSAGE","S","entries","entry","segmentTime","endTime","availabilityStartTime","parseFloat","fragment_absolute_time","end","baseMediaDecodeTime","updateDVR","getStreamInfo","manifestInfo","fragment_duration","lastSegment","trigger","MANIFEST_VALIDITY_CHANGED","sender","newDuration","isPaused","splice","dvrInfos","getCurrentDVRInfo","addDVRInfo","updateCurrentTime","getBoxOffset","parent","offset","boxes","size","convertFragment","isoFile","parseBuffer","tfhd","fetch","track_ID","traf","createFullBox","version","flags","trun","tfxd","_parent","sepiff","usertype","saio","entry_count","saiz","sample_count","default_sample_info_size","sample_info_size","NumberOfEntries","moof","getLength","data_offset","trafPosInMoof","sencPosInTraf","write","updateSegmentList","MssFragmentMoovProcessor","NALUTYPE_SPS","NALUTYPE_PPS","constants","protectionController","adaptationSet","contentProtection","trackId","createFtypBox","ftyp","createBox","major_brand","minor_version","compatible_brands","createMoovBox","moov","createMvhdBox","trak","createTkhdBox","mdia","createMdhdBox","createHdlrBox","minf","VIDEO","createVmhdBox","AUDIO","createSmhdBox","dinf","createDrefBox","stbl","stts","_data","stsc","stco","stsz","createStsdBox","mvex","createTrexBox","supportedKS","getSupportedKeySystemsFromContentProtection","createProtectionSystemSpecificHeaderBox","mvhd","creation_time","modification_time","round","rate","volume","reserved1","reserved2","matrix","pre_defined","next_track_ID","tkhd","layer","alternate_group","reserved3","width","height","mdhd","language","lang","hdlr","handler_type","name","reserved","vmhd","graphicsmode","opcolor","smhd","balance","dref","location","stsd","createSampleEntry","codec","codecs","substring","createAVCVisualSampleEntry","createMP4AudioSampleEntry","code","MSS_UNSUPPORTED_CODEC_CODE","message","MSS_UNSUPPORTED_CODEC_MESSAGE","data","avc1","data_reference_index","pre_defined1","pre_defined2","horizresolution","vertresolution","frame_count","compressorname","depth","pre_defined3","createAVC1ConfigurationRecord","sinf","createOriginalFormatBox","createSchemeTypeBox","createSchemeInformationBox","avcC","avcCLength","sps","pps","AVCProfileIndication","AVCLevelIndication","profile_compatibility","nalus","codecPrivateData","naluBytes","naluType","hexStringtoBuffer","Uint8Array","set","mp4a","channelcount","audioChannels","samplesize","reserved_3","samplerate","audioSamplingRate","esds","createMPEG4AACESDescriptor","audioSpecificConfig","esdsLength","frma","data_format","stringToCharCode","schm","scheme_type","scheme_version","schi","createTrackEncryptionBox","keySystems","pssh_bytes","pssh","parsedBuffer","initData","Utils","appendBox","tenc","default_IsEncrypted","default_IV_size","default_KID","trex","default_sample_description_index","default_sample_duration","default_sample_size","default_sample_flags","buf","charCodeAt","generateMoov","rep","arrayBuffer","ContentProtection","createFile","arrayEqual","arr1","arr2","every","element","saioProcessor","_procFullBox","_procField","_procFieldArray","saizProcessor","sencProcessor","_procEntries","_procEntryField","_procSubEntries","clearAndCryptedData","uuidProcessor","tfxdUserType","tfrfUserType","sepiffUserType","_parsing","fragment_count","MssFragmentProcessor","context","mssFragmentMoovProcessor","mssFragmentMoofProcessor","addBoxProcessor","processFragment","DataChunk","MssParser","MssHandler","initSegmentType","streamController","mssParser","mssFragmentProcessor","fragmentInfoControllers","createMssFragmentProcessor","getStreamProcessor","getActiveStreamProcessors","filter","processor","getFragmentInfoController","controller","createDataChunk","streamId","endFragment","chunk","segmentType","startFragmentInfoControllers","processors","forEach","TEXT","fragmentInfoController","stopFragmentInfoControllers","onInitFragmentNeeded","streamInfo","FRAGMENT_LOADING_PROGRESS","bytes","INIT_FRAGMENT_LOADED","onSegmentMediaLoaded","isDynamic","dvrWindowSize","onPlaybackPaused","getIsDynamic","onPlaybackSeeking","onTTMLPreProcess","ttmlSubtitles","registerEvents","on","INIT_FRAGMENT_NEEDED","priority","getSingletonFactoryByName","getClassName","EVENT_PRIORITY_HIGH","PLAYBACK_PAUSED","PLAYBACK_SEEKING","FRAGMENT_LOADING_COMPLETED","TTML_TO_PARSE","off","createMssParser","factory","updateClassFactory","mssErrors","BASE64","manifestModel","settings","DEFAULT_TIME_SCALE","SUPPORTED_CODECS","ROLE","ACCESSIBILITY","samplingFrequencyIndex","mimeTypeMap","initialBufferSettings","getAttributeAsBoolean","node","attrName","getAttribute","mapPeriod","smoothStreamingMedia","streams","getElementsByTagName","mapAdaptationSet","AdaptationSet","streamIndex","representations","segmentTemplate","qualityLevels","fallBackId","contentType","mimeType","subType","maxWidth","maxHeight","role","schemeIdUri","Role","Role_asArray","accessibility","Accessibility","Accessibility_asArray","mapSegmentTemplate","BaseURL","Id","mapRepresentation","Representation","Representation_asArray","qualityLevel","fourCCValue","isNaN","toUpperCase","warn","getH264Codec","getAACCodec","STPP","nalHeader","avcoti","exec","substr","samplingRate","objectType","codecPrivateDataHex","arr16","indexFreq","extensionSamplingFrequencyIndex","Channels","Uint16Array","setAttribute","mediaUrl","streamIndexTimeScale","mapSegmentTimeline","availabilityTimeOffset","segmentTimeline","chunks","prevSegment","MAX_SAFE_INTEGER","getKIDFromProtectionHeader","protectionHeader","prHeader","wrmHeader","xmlReader","KID","decodeArray","firstChild","getWRMHeaderFromPRHeader","buffer","fromCharCode","DOMParser","parseFromString","querySelector","textContent","convertUuidEndianness","recordCount","recordType","recordLength","recordValue","subarray","uuid","swapBytes","pos1","pos2","temp","createPRContentProtection","pro","__text","__prefix","pro_asArray","createWidevineContentProtection","widevineCP","wvCencHeader","encodeASCII","processManifest","xmlDoc","contentProtections","protection","adaptations","timestampOffset","segmentDuration","protocol","profiles","dvrWindowLength","mediaPresentationDuration","minBufferTime","ttmlTimeIsRelative","refreshManifestOnSwitchTrack","doNotUpdateDVRWindowOnBufferUpdated","ignorePostponeTimePeriod","Period","ContentProtection_asArray","initialization","targetLiveDelay","get","streaming","liveDelay","liveDelayFragmentCount","targetDelayCapping","bufferTime","stableBufferTime","bufferTimeAtTopQuality","bufferTimeAtTopQualityLongForm","calcFromSegmentTimeline","timeShiftBuffer","update","prevManifest","getValue","presentationTimeOffset","parseDOM","window","parser","getMatchers","getIron","internalParse","performance","now","xmlParseTime","mss2dashTime","info","toPrecision","parse","MediaPlayerEvents","AST_IN_FUTURE","BASE_URLS_UPDATED","BUFFER_EMPTY","BUFFER_LOADED","BUFFER_LEVEL_STATE_CHANGED","BUFFER_LEVEL_UPDATED","DVB_FONT_DOWNLOAD_ADDED","DVB_FONT_DOWNLOAD_COMPLETE","DVB_FONT_DOWNLOAD_FAILED","DYNAMIC_TO_STATIC","ERROR","FRAGMENT_LOADING_STARTED","FRAGMENT_LOADING_ABANDONED","LOG","MANIFEST_LOADING_STARTED","MANIFEST_LOADING_FINISHED","MANIFEST_LOADED","METRICS_CHANGED","METRIC_CHANGED","METRIC_ADDED","METRIC_UPDATED","PERIOD_SWITCH_STARTED","PERIOD_SWITCH_COMPLETED","QUALITY_CHANGE_REQUESTED","QUALITY_CHANGE_RENDERED","TRACK_CHANGE_RENDERED","STREAM_INITIALIZING","STREAM_UPDATED","STREAM_ACTIVATED","STREAM_DEACTIVATED","STREAM_INITIALIZED","STREAM_TEARDOWN_COMPLETE","TEXT_TRACKS_ADDED","TEXT_TRACK_ADDED","CUE_ENTER","CUE_EXIT","THROUGHPUT_MEASUREMENT_STORED","TTML_PARSED","CAPTION_RENDERED","CAPTION_CONTAINER_RESIZE","CAN_PLAY","CAN_PLAY_THROUGH","PLAYBACK_ENDED","PLAYBACK_ERROR","PLAYBACK_NOT_ALLOWED","PLAYBACK_METADATA_LOADED","PLAYBACK_LOADED_DATA","PLAYBACK_PLAYING","PLAYBACK_PROGRESS","PLAYBACK_RATE_CHANGED","PLAYBACK_SEEKED","PLAYBACK_STALLED","PLAYBACK_STARTED","PLAYBACK_TIME_UPDATED","PLAYBACK_VOLUME_CHANGED","PLAYBACK_WAITING","EVENT_MODE_ON_START","EVENT_MODE_ON_RECEIVE","CONFORMANCE_VIOLATION","REPRESENTATION_SWITCH","ADAPTATION_SET_REMOVED_NO_CAPABILITIES","CONTENT_STEERING_REQUEST_COMPLETED","INBAND_PRFT","MANAGED_MEDIA_SOURCE_START_STREAMING","MANAGED_MEDIA_SOURCE_END_STREAMING","mediaPlayerEvents","NaN","action","ACTION_DOWNLOAD","mediaStartTime","serviceLocation","requestStartDate","firstByteDate","requestEndDate","availabilityEndTime","wallStartTime","bytesLoaded","bytesTotal","delayLoadingTime","responseType","INIT_SEGMENT_TYPE","init","MEDIA_SEGMENT_TYPE","ACTION_COMPLETE","tcpid","actualurl","trequest","tresponse","responsecode","interval","trace","cmsd","_stream","_tfinish","_mediaduration","_quality","_responseHeaders","_serviceLocation","_fileLoaderType","HTTPRequestTrace","s","GET","HEAD","MPD_TYPE","XLINK_EXPANSION_TYPE","INDEX_SEGMENT_TYPE","BITSTREAM_SWITCHING_SEGMENT_TYPE","DVB_REPORTING_TYPE","LICENSE","CONTENT_STEERING_TYPE","OTHER_TYPE","global"],"sourceRoot":""}
=======
{"version":3,"file":"dash.mss.debug.js","mappings":"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","sources":["webpack://dashjs/webpack/universalModuleDefinition","webpack://dashjs/./externals/BigInteger.js","webpack://dashjs/./src/core/FactoryMaker.js","webpack://dashjs/./src/core/errors/ErrorsBase.js","webpack://dashjs/./src/core/events/EventsBase.js","webpack://dashjs/./src/mss/MssFragmentInfoController.js","webpack://dashjs/./src/mss/MssFragmentMoofProcessor.js","webpack://dashjs/./src/mss/MssFragmentMoovProcessor.js","webpack://dashjs/./src/mss/MssFragmentProcessor.js","webpack://dashjs/./src/mss/MssHandler.js","webpack://dashjs/./src/mss/errors/MssErrors.js","webpack://dashjs/./src/mss/parser/MssParser.js","webpack://dashjs/./src/streaming/MediaPlayerEvents.js","webpack://dashjs/./src/streaming/constants/ProtectionConstants.js","webpack://dashjs/./src/streaming/vo/DashJSError.js","webpack://dashjs/./src/streaming/vo/DataChunk.js","webpack://dashjs/./src/streaming/vo/FragmentRequest.js","webpack://dashjs/./src/streaming/vo/metrics/HTTPRequest.js","webpack://dashjs/webpack/bootstrap","webpack://dashjs/webpack/runtime/define property getters","webpack://dashjs/webpack/runtime/hasOwnProperty shorthand","webpack://dashjs/webpack/runtime/make namespace object","webpack://dashjs/./src/mss/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dashjs\"] = factory();\n\telse\n\t\troot[\"dashjs\"] = factory();\n})(self, function() {\nreturn ","var bigInt = function (undefined) {\n    'use strict';\n    var BASE = 1e7, LOG_BASE = 7, MAX_INT = 9007199254740992, MAX_INT_ARR = smallToArray(MAX_INT),\n        DEFAULT_ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz';\n    var supportsNativeBigInt = typeof BigInt === 'function';\n\n    function Integer(v, radix, alphabet, caseSensitive) {\n        if (typeof v === 'undefined') return Integer[0];\n        if (typeof radix !== 'undefined') return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\n        return parseValue(v)\n    }\n\n    function BigInteger(value, sign) {\n        this.value = value;\n        this.sign = sign;\n        this.isSmall = false\n    }\n\n    BigInteger.prototype = Object.create(Integer.prototype);\n\n    function SmallInteger(value) {\n        this.value = value;\n        this.sign = value < 0;\n        this.isSmall = true\n    }\n\n    SmallInteger.prototype = Object.create(Integer.prototype);\n\n    function NativeBigInt(value) {\n        this.value = value\n    }\n\n    NativeBigInt.prototype = Object.create(Integer.prototype);\n\n    function isPrecise(n) {\n        return -MAX_INT < n && n < MAX_INT\n    }\n\n    function smallToArray(n) {\n        if (n < 1e7) return [n];\n        if (n < 1e14) return [n % 1e7, Math.floor(n / 1e7)];\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)]\n    }\n\n    function arrayToSmall(arr) {\n        trim(arr);\n        var length = arr.length;\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\n            switch (length) {\n                case 0:\n                    return 0;\n                case 1:\n                    return arr[0];\n                case 2:\n                    return arr[0] + arr[1] * BASE;\n                default:\n                    return arr[0] + (arr[1] + arr[2] * BASE) * BASE\n            }\n        }\n        return arr\n    }\n\n    function trim(v) {\n        var i = v.length;\n        while (v[--i] === 0) ;\n        v.length = i + 1\n    }\n\n    function createArray(length) {\n        var x = new Array(length);\n        var i = -1;\n        while (++i < length) {\n            x[i] = 0\n        }\n        return x\n    }\n\n    function truncate(n) {\n        if (n > 0) return Math.floor(n);\n        return Math.ceil(n)\n    }\n\n    function add(a, b) {\n        var l_a = a.length, l_b = b.length, r = new Array(l_a), carry = 0, base = BASE, sum, i;\n        for (i = 0; i < l_b; i++) {\n            sum = a[i] + b[i] + carry;\n            carry = sum >= base ? 1 : 0;\n            r[i] = sum - carry * base\n        }\n        while (i < l_a) {\n            sum = a[i] + carry;\n            carry = sum === base ? 1 : 0;\n            r[i++] = sum - carry * base\n        }\n        if (carry > 0) r.push(carry);\n        return r\n    }\n\n    function addAny(a, b) {\n        if (a.length >= b.length) return add(a, b);\n        return add(b, a)\n    }\n\n    function addSmall(a, carry) {\n        var l = a.length, r = new Array(l), base = BASE, sum, i;\n        for (i = 0; i < l; i++) {\n            sum = a[i] - base + carry;\n            carry = Math.floor(sum / base);\n            r[i] = sum - carry * base;\n            carry += 1\n        }\n        while (carry > 0) {\n            r[i++] = carry % base;\n            carry = Math.floor(carry / base)\n        }\n        return r\n    }\n\n    BigInteger.prototype.add = function (v) {\n        var n = parseValue(v);\n        if (this.sign !== n.sign) {\n            return this.subtract(n.negate())\n        }\n        var a = this.value, b = n.value;\n        if (n.isSmall) {\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign)\n        }\n        return new BigInteger(addAny(a, b), this.sign)\n    };\n    BigInteger.prototype.plus = BigInteger.prototype.add;\n    SmallInteger.prototype.add = function (v) {\n        var n = parseValue(v);\n        var a = this.value;\n        if (a < 0 !== n.sign) {\n            return this.subtract(n.negate())\n        }\n        var b = n.value;\n        if (n.isSmall) {\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\n            b = smallToArray(Math.abs(b))\n        }\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0)\n    };\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\n    NativeBigInt.prototype.add = function (v) {\n        return new NativeBigInt(this.value + parseValue(v).value)\n    };\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\n\n    function subtract(a, b) {\n        var a_l = a.length, b_l = b.length, r = new Array(a_l), borrow = 0, base = BASE, i, difference;\n        for (i = 0; i < b_l; i++) {\n            difference = a[i] - borrow - b[i];\n            if (difference < 0) {\n                difference += base;\n                borrow = 1\n            } else borrow = 0;\n            r[i] = difference\n        }\n        for (i = b_l; i < a_l; i++) {\n            difference = a[i] - borrow;\n            if (difference < 0) difference += base; else {\n                r[i++] = difference;\n                break\n            }\n            r[i] = difference\n        }\n        for (; i < a_l; i++) {\n            r[i] = a[i]\n        }\n        trim(r);\n        return r\n    }\n\n    function subtractAny(a, b, sign) {\n        var value;\n        if (compareAbs(a, b) >= 0) {\n            value = subtract(a, b)\n        } else {\n            value = subtract(b, a);\n            sign = !sign\n        }\n        value = arrayToSmall(value);\n        if (typeof value === 'number') {\n            if (sign) value = -value;\n            return new SmallInteger(value)\n        }\n        return new BigInteger(value, sign)\n    }\n\n    function subtractSmall(a, b, sign) {\n        var l = a.length, r = new Array(l), carry = -b, base = BASE, i, difference;\n        for (i = 0; i < l; i++) {\n            difference = a[i] + carry;\n            carry = Math.floor(difference / base);\n            difference %= base;\n            r[i] = difference < 0 ? difference + base : difference\n        }\n        r = arrayToSmall(r);\n        if (typeof r === 'number') {\n            if (sign) r = -r;\n            return new SmallInteger(r)\n        }\n        return new BigInteger(r, sign)\n    }\n\n    BigInteger.prototype.subtract = function (v) {\n        var n = parseValue(v);\n        if (this.sign !== n.sign) {\n            return this.add(n.negate())\n        }\n        var a = this.value, b = n.value;\n        if (n.isSmall) return subtractSmall(a, Math.abs(b), this.sign);\n        return subtractAny(a, b, this.sign)\n    };\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\n    SmallInteger.prototype.subtract = function (v) {\n        var n = parseValue(v);\n        var a = this.value;\n        if (a < 0 !== n.sign) {\n            return this.add(n.negate())\n        }\n        var b = n.value;\n        if (n.isSmall) {\n            return new SmallInteger(a - b)\n        }\n        return subtractSmall(b, Math.abs(a), a >= 0)\n    };\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\n    NativeBigInt.prototype.subtract = function (v) {\n        return new NativeBigInt(this.value - parseValue(v).value)\n    };\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\n    BigInteger.prototype.negate = function () {\n        return new BigInteger(this.value, !this.sign)\n    };\n    SmallInteger.prototype.negate = function () {\n        var sign = this.sign;\n        var small = new SmallInteger(-this.value);\n        small.sign = !sign;\n        return small\n    };\n    NativeBigInt.prototype.negate = function () {\n        return new NativeBigInt(-this.value)\n    };\n    BigInteger.prototype.abs = function () {\n        return new BigInteger(this.value, false)\n    };\n    SmallInteger.prototype.abs = function () {\n        return new SmallInteger(Math.abs(this.value))\n    };\n    NativeBigInt.prototype.abs = function () {\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value)\n    };\n\n    function multiplyLong(a, b) {\n        var a_l = a.length, b_l = b.length, l = a_l + b_l, r = createArray(l), base = BASE, product, carry, i, a_i, b_j;\n        for (i = 0; i < a_l; ++i) {\n            a_i = a[i];\n            for (var j = 0; j < b_l; ++j) {\n                b_j = b[j];\n                product = a_i * b_j + r[i + j];\n                carry = Math.floor(product / base);\n                r[i + j] = product - carry * base;\n                r[i + j + 1] += carry\n            }\n        }\n        trim(r);\n        return r\n    }\n\n    function multiplySmall(a, b) {\n        var l = a.length, r = new Array(l), base = BASE, carry = 0, product, i;\n        for (i = 0; i < l; i++) {\n            product = a[i] * b + carry;\n            carry = Math.floor(product / base);\n            r[i] = product - carry * base\n        }\n        while (carry > 0) {\n            r[i++] = carry % base;\n            carry = Math.floor(carry / base)\n        }\n        return r\n    }\n\n    function shiftLeft(x, n) {\n        var r = [];\n        while (n-- > 0) r.push(0);\n        return r.concat(x)\n    }\n\n    function multiplyKaratsuba(x, y) {\n        var n = Math.max(x.length, y.length);\n        if (n <= 30) return multiplyLong(x, y);\n        n = Math.ceil(n / 2);\n        var b = x.slice(n), a = x.slice(0, n), d = y.slice(n), c = y.slice(0, n);\n        var ac = multiplyKaratsuba(a, c), bd = multiplyKaratsuba(b, d),\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\n        trim(product);\n        return product\n    }\n\n    function useKaratsuba(l1, l2) {\n        return -.012 * l1 - .012 * l2 + 15e-6 * l1 * l2 > 0\n    }\n\n    BigInteger.prototype.multiply = function (v) {\n        var n = parseValue(v), a = this.value, b = n.value, sign = this.sign !== n.sign, abs;\n        if (n.isSmall) {\n            if (b === 0) return Integer[0];\n            if (b === 1) return this;\n            if (b === -1) return this.negate();\n            abs = Math.abs(b);\n            if (abs < BASE) {\n                return new BigInteger(multiplySmall(a, abs), sign)\n            }\n            b = smallToArray(abs)\n        }\n        if (useKaratsuba(a.length, b.length)) return new BigInteger(multiplyKaratsuba(a, b), sign);\n        return new BigInteger(multiplyLong(a, b), sign)\n    };\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\n\n    function multiplySmallAndArray(a, b, sign) {\n        if (a < BASE) {\n            return new BigInteger(multiplySmall(b, a), sign)\n        }\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign)\n    }\n\n    SmallInteger.prototype._multiplyBySmall = function (a) {\n        if (isPrecise(a.value * this.value)) {\n            return new SmallInteger(a.value * this.value)\n        }\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign)\n    };\n    BigInteger.prototype._multiplyBySmall = function (a) {\n        if (a.value === 0) return Integer[0];\n        if (a.value === 1) return this;\n        if (a.value === -1) return this.negate();\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign)\n    };\n    SmallInteger.prototype.multiply = function (v) {\n        return parseValue(v)._multiplyBySmall(this)\n    };\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\n    NativeBigInt.prototype.multiply = function (v) {\n        return new NativeBigInt(this.value * parseValue(v).value)\n    };\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\n\n    function square(a) {\n        var l = a.length, r = createArray(l + l), base = BASE, product, carry, i, a_i, a_j;\n        for (i = 0; i < l; i++) {\n            a_i = a[i];\n            carry = 0 - a_i * a_i;\n            for (var j = i; j < l; j++) {\n                a_j = a[j];\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\n                carry = Math.floor(product / base);\n                r[i + j] = product - carry * base\n            }\n            r[i + l] = carry\n        }\n        trim(r);\n        return r\n    }\n\n    BigInteger.prototype.square = function () {\n        return new BigInteger(square(this.value), false)\n    };\n    SmallInteger.prototype.square = function () {\n        var value = this.value * this.value;\n        if (isPrecise(value)) return new SmallInteger(value);\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false)\n    };\n    NativeBigInt.prototype.square = function (v) {\n        return new NativeBigInt(this.value * this.value)\n    };\n\n    function divMod1(a, b) {\n        var a_l = a.length, b_l = b.length, base = BASE, result = createArray(b.length),\n            divisorMostSignificantDigit = b[b_l - 1], lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\n            remainder = multiplySmall(a, lambda), divisor = multiplySmall(b, lambda), quotientDigit, shift, carry,\n            borrow, i, l, q;\n        if (remainder.length <= a_l) remainder.push(0);\n        divisor.push(0);\n        divisorMostSignificantDigit = divisor[b_l - 1];\n        for (shift = a_l - b_l; shift >= 0; shift--) {\n            quotientDigit = base - 1;\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit)\n            }\n            carry = 0;\n            borrow = 0;\n            l = divisor.length;\n            for (i = 0; i < l; i++) {\n                carry += quotientDigit * divisor[i];\n                q = Math.floor(carry / base);\n                borrow += remainder[shift + i] - (carry - q * base);\n                carry = q;\n                if (borrow < 0) {\n                    remainder[shift + i] = borrow + base;\n                    borrow = -1\n                } else {\n                    remainder[shift + i] = borrow;\n                    borrow = 0\n                }\n            }\n            while (borrow !== 0) {\n                quotientDigit -= 1;\n                carry = 0;\n                for (i = 0; i < l; i++) {\n                    carry += remainder[shift + i] - base + divisor[i];\n                    if (carry < 0) {\n                        remainder[shift + i] = carry + base;\n                        carry = 0\n                    } else {\n                        remainder[shift + i] = carry;\n                        carry = 1\n                    }\n                }\n                borrow += carry\n            }\n            result[shift] = quotientDigit\n        }\n        remainder = divModSmall(remainder, lambda)[0];\n        return [arrayToSmall(result), arrayToSmall(remainder)]\n    }\n\n    function divMod2(a, b) {\n        var a_l = a.length, b_l = b.length, result = [], part = [], base = BASE, guess, xlen, highx, highy, check;\n        while (a_l) {\n            part.unshift(a[--a_l]);\n            trim(part);\n            if (compareAbs(part, b) < 0) {\n                result.push(0);\n                continue\n            }\n            xlen = part.length;\n            highx = part[xlen - 1] * base + part[xlen - 2];\n            highy = b[b_l - 1] * base + b[b_l - 2];\n            if (xlen > b_l) {\n                highx = (highx + 1) * base\n            }\n            guess = Math.ceil(highx / highy);\n            do {\n                check = multiplySmall(b, guess);\n                if (compareAbs(check, part) <= 0) break;\n                guess--\n            } while (guess);\n            result.push(guess);\n            part = subtract(part, check)\n        }\n        result.reverse();\n        return [arrayToSmall(result), arrayToSmall(part)]\n    }\n\n    function divModSmall(value, lambda) {\n        var length = value.length, quotient = createArray(length), base = BASE, i, q, remainder, divisor;\n        remainder = 0;\n        for (i = length - 1; i >= 0; --i) {\n            divisor = remainder * base + value[i];\n            q = truncate(divisor / lambda);\n            remainder = divisor - q * lambda;\n            quotient[i] = q | 0\n        }\n        return [quotient, remainder | 0]\n    }\n\n    function divModAny(self, v) {\n        var value, n = parseValue(v);\n        if (supportsNativeBigInt) {\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)]\n        }\n        var a = self.value, b = n.value;\n        var quotient;\n        if (b === 0) throw new Error('Cannot divide by zero');\n        if (self.isSmall) {\n            if (n.isSmall) {\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)]\n            }\n            return [Integer[0], self]\n        }\n        if (n.isSmall) {\n            if (b === 1) return [self, Integer[0]];\n            if (b == -1) return [self.negate(), Integer[0]];\n            var abs = Math.abs(b);\n            if (abs < BASE) {\n                value = divModSmall(a, abs);\n                quotient = arrayToSmall(value[0]);\n                var remainder = value[1];\n                if (self.sign) remainder = -remainder;\n                if (typeof quotient === 'number') {\n                    if (self.sign !== n.sign) quotient = -quotient;\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)]\n                }\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)]\n            }\n            b = smallToArray(abs)\n        }\n        var comparison = compareAbs(a, b);\n        if (comparison === -1) return [Integer[0], self];\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\n        if (a.length + b.length <= 200) value = divMod1(a, b); else value = divMod2(a, b);\n        quotient = value[0];\n        var qSign = self.sign !== n.sign, mod = value[1], mSign = self.sign;\n        if (typeof quotient === 'number') {\n            if (qSign) quotient = -quotient;\n            quotient = new SmallInteger(quotient)\n        } else quotient = new BigInteger(quotient, qSign);\n        if (typeof mod === 'number') {\n            if (mSign) mod = -mod;\n            mod = new SmallInteger(mod)\n        } else mod = new BigInteger(mod, mSign);\n        return [quotient, mod]\n    }\n\n    BigInteger.prototype.divmod = function (v) {\n        var result = divModAny(this, v);\n        return { quotient: result[0], remainder: result[1] }\n    };\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\n    BigInteger.prototype.divide = function (v) {\n        return divModAny(this, v)[0]\n    };\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\n        return new NativeBigInt(this.value / parseValue(v).value)\n    };\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\n    BigInteger.prototype.mod = function (v) {\n        return divModAny(this, v)[1]\n    };\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\n        return new NativeBigInt(this.value % parseValue(v).value)\n    };\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\n    BigInteger.prototype.pow = function (v) {\n        var n = parseValue(v), a = this.value, b = n.value, value, x, y;\n        if (b === 0) return Integer[1];\n        if (a === 0) return Integer[0];\n        if (a === 1) return Integer[1];\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\n        if (n.sign) {\n            return Integer[0]\n        }\n        if (!n.isSmall) throw new Error('The exponent ' + n.toString() + ' is too large.');\n        if (this.isSmall) {\n            if (isPrecise(value = Math.pow(a, b))) return new SmallInteger(truncate(value))\n        }\n        x = this;\n        y = Integer[1];\n        while (true) {\n            if (b & 1 === 1) {\n                y = y.times(x);\n                --b\n            }\n            if (b === 0) break;\n            b /= 2;\n            x = x.square()\n        }\n        return y\n    };\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\n    NativeBigInt.prototype.pow = function (v) {\n        var n = parseValue(v);\n        var a = this.value, b = n.value;\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\n        if (b === _0) return Integer[1];\n        if (a === _0) return Integer[0];\n        if (a === _1) return Integer[1];\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\n        if (n.isNegative()) return new NativeBigInt(_0);\n        var x = this;\n        var y = Integer[1];\n        while (true) {\n            if ((b & _1) === _1) {\n                y = y.times(x);\n                --b\n            }\n            if (b === _0) break;\n            b /= _2;\n            x = x.square()\n        }\n        return y\n    };\n    BigInteger.prototype.modPow = function (exp, mod) {\n        exp = parseValue(exp);\n        mod = parseValue(mod);\n        if (mod.isZero()) throw new Error('Cannot take modPow with modulus 0');\n        var r = Integer[1], base = this.mod(mod);\n        while (exp.isPositive()) {\n            if (base.isZero()) return Integer[0];\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\n            exp = exp.divide(2);\n            base = base.square().mod(mod)\n        }\n        return r\n    };\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\n\n    function compareAbs(a, b) {\n        if (a.length !== b.length) {\n            return a.length > b.length ? 1 : -1\n        }\n        for (var i = a.length - 1; i >= 0; i--) {\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1\n        }\n        return 0\n    }\n\n    BigInteger.prototype.compareAbs = function (v) {\n        var n = parseValue(v), a = this.value, b = n.value;\n        if (n.isSmall) return 1;\n        return compareAbs(a, b)\n    };\n    SmallInteger.prototype.compareAbs = function (v) {\n        var n = parseValue(v), a = Math.abs(this.value), b = n.value;\n        if (n.isSmall) {\n            b = Math.abs(b);\n            return a === b ? 0 : a > b ? 1 : -1\n        }\n        return -1\n    };\n    NativeBigInt.prototype.compareAbs = function (v) {\n        var a = this.value;\n        var b = parseValue(v).value;\n        a = a >= 0 ? a : -a;\n        b = b >= 0 ? b : -b;\n        return a === b ? 0 : a > b ? 1 : -1\n    };\n    BigInteger.prototype.compare = function (v) {\n        if (v === Infinity) {\n            return -1\n        }\n        if (v === -Infinity) {\n            return 1\n        }\n        var n = parseValue(v), a = this.value, b = n.value;\n        if (this.sign !== n.sign) {\n            return n.sign ? 1 : -1\n        }\n        if (n.isSmall) {\n            return this.sign ? -1 : 1\n        }\n        return compareAbs(a, b) * (this.sign ? -1 : 1)\n    };\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\n    SmallInteger.prototype.compare = function (v) {\n        if (v === Infinity) {\n            return -1\n        }\n        if (v === -Infinity) {\n            return 1\n        }\n        var n = parseValue(v), a = this.value, b = n.value;\n        if (n.isSmall) {\n            return a == b ? 0 : a > b ? 1 : -1\n        }\n        if (a < 0 !== n.sign) {\n            return a < 0 ? -1 : 1\n        }\n        return a < 0 ? 1 : -1\n    };\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\n    NativeBigInt.prototype.compare = function (v) {\n        if (v === Infinity) {\n            return -1\n        }\n        if (v === -Infinity) {\n            return 1\n        }\n        var a = this.value;\n        var b = parseValue(v).value;\n        return a === b ? 0 : a > b ? 1 : -1\n    };\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\n    BigInteger.prototype.equals = function (v) {\n        return this.compare(v) === 0\n    };\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\n    BigInteger.prototype.notEquals = function (v) {\n        return this.compare(v) !== 0\n    };\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\n    BigInteger.prototype.greater = function (v) {\n        return this.compare(v) > 0\n    };\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\n    BigInteger.prototype.lesser = function (v) {\n        return this.compare(v) < 0\n    };\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\n    BigInteger.prototype.greaterOrEquals = function (v) {\n        return this.compare(v) >= 0\n    };\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\n    BigInteger.prototype.lesserOrEquals = function (v) {\n        return this.compare(v) <= 0\n    };\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\n    BigInteger.prototype.isEven = function () {\n        return (this.value[0] & 1) === 0\n    };\n    SmallInteger.prototype.isEven = function () {\n        return (this.value & 1) === 0\n    };\n    NativeBigInt.prototype.isEven = function () {\n        return (this.value & BigInt(1)) === BigInt(0)\n    };\n    BigInteger.prototype.isOdd = function () {\n        return (this.value[0] & 1) === 1\n    };\n    SmallInteger.prototype.isOdd = function () {\n        return (this.value & 1) === 1\n    };\n    NativeBigInt.prototype.isOdd = function () {\n        return (this.value & BigInt(1)) === BigInt(1)\n    };\n    BigInteger.prototype.isPositive = function () {\n        return !this.sign\n    };\n    SmallInteger.prototype.isPositive = function () {\n        return this.value > 0\n    };\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\n    BigInteger.prototype.isNegative = function () {\n        return this.sign\n    };\n    SmallInteger.prototype.isNegative = function () {\n        return this.value < 0\n    };\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\n    BigInteger.prototype.isUnit = function () {\n        return false\n    };\n    SmallInteger.prototype.isUnit = function () {\n        return Math.abs(this.value) === 1\n    };\n    NativeBigInt.prototype.isUnit = function () {\n        return this.abs().value === BigInt(1)\n    };\n    BigInteger.prototype.isZero = function () {\n        return false\n    };\n    SmallInteger.prototype.isZero = function () {\n        return this.value === 0\n    };\n    NativeBigInt.prototype.isZero = function () {\n        return this.value === BigInt(0)\n    };\n    BigInteger.prototype.isDivisibleBy = function (v) {\n        var n = parseValue(v);\n        if (n.isZero()) return false;\n        if (n.isUnit()) return true;\n        if (n.compareAbs(2) === 0) return this.isEven();\n        return this.mod(n).isZero()\n    };\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\n\n    function isBasicPrime(v) {\n        var n = v.abs();\n        if (n.isUnit()) return false;\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\n        if (n.lesser(49)) return true\n    }\n\n    function millerRabinTest(n, a) {\n        var nPrev = n.prev(), b = nPrev, r = 0, d, t, i, x;\n        while (b.isEven()) b = b.divide(2), r++;\n        next:for (i = 0; i < a.length; i++) {\n            if (n.lesser(a[i])) continue;\n            x = bigInt(a[i]).modPow(b, n);\n            if (x.isUnit() || x.equals(nPrev)) continue;\n            for (d = r - 1; d != 0; d--) {\n                x = x.square().mod(n);\n                if (x.isUnit()) return false;\n                if (x.equals(nPrev)) continue next\n            }\n            return false\n        }\n        return true\n    }\n\n    BigInteger.prototype.isPrime = function (strict) {\n        var isPrime = isBasicPrime(this);\n        if (isPrime !== undefined) return isPrime;\n        var n = this.abs();\n        var bits = n.bitLength();\n        if (bits <= 64) return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\n        var logN = Math.log(2) * bits.toJSNumber();\n        var t = Math.ceil(strict === true ? 2 * Math.pow(logN, 2) : logN);\n        for (var a = [], i = 0; i < t; i++) {\n            a.push(bigInt(i + 2))\n        }\n        return millerRabinTest(n, a)\n    };\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\n    BigInteger.prototype.isProbablePrime = function (iterations) {\n        var isPrime = isBasicPrime(this);\n        if (isPrime !== undefined) return isPrime;\n        var n = this.abs();\n        var t = iterations === undefined ? 5 : iterations;\n        for (var a = [], i = 0; i < t; i++) {\n            a.push(bigInt.randBetween(2, n.minus(2)))\n        }\n        return millerRabinTest(n, a)\n    };\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\n    BigInteger.prototype.modInv = function (n) {\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\n        while (!newR.isZero()) {\n            q = r.divide(newR);\n            lastT = t;\n            lastR = r;\n            t = newT;\n            r = newR;\n            newT = lastT.subtract(q.multiply(newT));\n            newR = lastR.subtract(q.multiply(newR))\n        }\n        if (!r.isUnit()) throw new Error(this.toString() + ' and ' + n.toString() + ' are not co-prime');\n        if (t.compare(0) === -1) {\n            t = t.add(n)\n        }\n        if (this.isNegative()) {\n            return t.negate()\n        }\n        return t\n    };\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\n    BigInteger.prototype.next = function () {\n        var value = this.value;\n        if (this.sign) {\n            return subtractSmall(value, 1, this.sign)\n        }\n        return new BigInteger(addSmall(value, 1), this.sign)\n    };\n    SmallInteger.prototype.next = function () {\n        var value = this.value;\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\n        return new BigInteger(MAX_INT_ARR, false)\n    };\n    NativeBigInt.prototype.next = function () {\n        return new NativeBigInt(this.value + BigInt(1))\n    };\n    BigInteger.prototype.prev = function () {\n        var value = this.value;\n        if (this.sign) {\n            return new BigInteger(addSmall(value, 1), true)\n        }\n        return subtractSmall(value, 1, this.sign)\n    };\n    SmallInteger.prototype.prev = function () {\n        var value = this.value;\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\n        return new BigInteger(MAX_INT_ARR, true)\n    };\n    NativeBigInt.prototype.prev = function () {\n        return new NativeBigInt(this.value - BigInt(1))\n    };\n    var powersOfTwo = [1];\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\n\n    function shift_isSmall(n) {\n        return Math.abs(n) <= BASE\n    }\n\n    BigInteger.prototype.shiftLeft = function (v) {\n        var n = parseValue(v).toJSNumber();\n        if (!shift_isSmall(n)) {\n            throw new Error(String(n) + ' is too large for shifting.')\n        }\n        if (n < 0) return this.shiftRight(-n);\n        var result = this;\n        if (result.isZero()) return result;\n        while (n >= powers2Length) {\n            result = result.multiply(highestPower2);\n            n -= powers2Length - 1\n        }\n        return result.multiply(powersOfTwo[n])\n    };\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\n    BigInteger.prototype.shiftRight = function (v) {\n        var remQuo;\n        var n = parseValue(v).toJSNumber();\n        if (!shift_isSmall(n)) {\n            throw new Error(String(n) + ' is too large for shifting.')\n        }\n        if (n < 0) return this.shiftLeft(-n);\n        var result = this;\n        while (n >= powers2Length) {\n            if (result.isZero() || result.isNegative() && result.isUnit()) return result;\n            remQuo = divModAny(result, highestPower2);\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\n            n -= powers2Length - 1\n        }\n        remQuo = divModAny(result, powersOfTwo[n]);\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0]\n    };\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\n\n    function bitwise(x, y, fn) {\n        y = parseValue(y);\n        var xSign = x.isNegative(), ySign = y.isNegative();\n        var xRem = xSign ? x.not() : x, yRem = ySign ? y.not() : y;\n        var xDigit = 0, yDigit = 0;\n        var xDivMod = null, yDivMod = null;\n        var result = [];\n        while (!xRem.isZero() || !yRem.isZero()) {\n            xDivMod = divModAny(xRem, highestPower2);\n            xDigit = xDivMod[1].toJSNumber();\n            if (xSign) {\n                xDigit = highestPower2 - 1 - xDigit\n            }\n            yDivMod = divModAny(yRem, highestPower2);\n            yDigit = yDivMod[1].toJSNumber();\n            if (ySign) {\n                yDigit = highestPower2 - 1 - yDigit\n            }\n            xRem = xDivMod[0];\n            yRem = yDivMod[0];\n            result.push(fn(xDigit, yDigit))\n        }\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\n        for (var i = result.length - 1; i >= 0; i -= 1) {\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]))\n        }\n        return sum\n    }\n\n    BigInteger.prototype.not = function () {\n        return this.negate().prev()\n    };\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\n    BigInteger.prototype.and = function (n) {\n        return bitwise(this, n, function (a, b) {\n            return a & b\n        })\n    };\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\n    BigInteger.prototype.or = function (n) {\n        return bitwise(this, n, function (a, b) {\n            return a | b\n        })\n    };\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\n    BigInteger.prototype.xor = function (n) {\n        return bitwise(this, n, function (a, b) {\n            return a ^ b\n        })\n    };\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\n\n    function roughLOB(n) {\n        var v = n.value,\n            x = typeof v === 'number' ? v | LOBMASK_I : typeof v === 'bigint' ? v | BigInt(LOBMASK_I) : v[0] + v[1] * BASE | LOBMASK_BI;\n        return x & -x\n    }\n\n    function integerLogarithm(value, base) {\n        if (base.compareTo(value) <= 0) {\n            var tmp = integerLogarithm(value, base.square(base));\n            var p = tmp.p;\n            var e = tmp.e;\n            var t = p.multiply(base);\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 }\n        }\n        return { p: bigInt(1), e: 0 }\n    }\n\n    BigInteger.prototype.bitLength = function () {\n        var n = this;\n        if (n.compareTo(bigInt(0)) < 0) {\n            n = n.negate().subtract(bigInt(1))\n        }\n        if (n.compareTo(bigInt(0)) === 0) {\n            return bigInt(0)\n        }\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1))\n    };\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\n\n    function max(a, b) {\n        a = parseValue(a);\n        b = parseValue(b);\n        return a.greater(b) ? a : b\n    }\n\n    function min(a, b) {\n        a = parseValue(a);\n        b = parseValue(b);\n        return a.lesser(b) ? a : b\n    }\n\n    function gcd(a, b) {\n        a = parseValue(a).abs();\n        b = parseValue(b).abs();\n        if (a.equals(b)) return a;\n        if (a.isZero()) return b;\n        if (b.isZero()) return a;\n        var c = Integer[1], d, t;\n        while (a.isEven() && b.isEven()) {\n            d = min(roughLOB(a), roughLOB(b));\n            a = a.divide(d);\n            b = b.divide(d);\n            c = c.multiply(d)\n        }\n        while (a.isEven()) {\n            a = a.divide(roughLOB(a))\n        }\n        do {\n            while (b.isEven()) {\n                b = b.divide(roughLOB(b))\n            }\n            if (a.greater(b)) {\n                t = b;\n                b = a;\n                a = t\n            }\n            b = b.subtract(a)\n        } while (!b.isZero());\n        return c.isUnit() ? a : a.multiply(c)\n    }\n\n    function lcm(a, b) {\n        a = parseValue(a).abs();\n        b = parseValue(b).abs();\n        return a.divide(gcd(a, b)).multiply(b)\n    }\n\n    function randBetween(a, b) {\n        a = parseValue(a);\n        b = parseValue(b);\n        var low = min(a, b), high = max(a, b);\n        var range = high.subtract(low).add(1);\n        if (range.isSmall) return low.add(Math.floor(Math.random() * range));\n        var digits = toBase(range, BASE).value;\n        var result = [], restricted = true;\n        for (var i = 0; i < digits.length; i++) {\n            var top = restricted ? digits[i] : BASE;\n            var digit = truncate(Math.random() * top);\n            result.push(digit);\n            if (digit < top) restricted = false\n        }\n        return low.add(Integer.fromArray(result, BASE, false))\n    }\n\n    var parseBase = function (text, base, alphabet, caseSensitive) {\n        alphabet = alphabet || DEFAULT_ALPHABET;\n        text = String(text);\n        if (!caseSensitive) {\n            text = text.toLowerCase();\n            alphabet = alphabet.toLowerCase()\n        }\n        var length = text.length;\n        var i;\n        var absBase = Math.abs(base);\n        var alphabetValues = {};\n        for (i = 0; i < alphabet.length; i++) {\n            alphabetValues[alphabet[i]] = i\n        }\n        for (i = 0; i < length; i++) {\n            var c = text[i];\n            if (c === '-') continue;\n            if (c in alphabetValues) {\n                if (alphabetValues[c] >= absBase) {\n                    if (c === '1' && absBase === 1) continue;\n                    throw new Error(c + ' is not a valid digit in base ' + base + '.')\n                }\n            }\n        }\n        base = parseValue(base);\n        var digits = [];\n        var isNegative = text[0] === '-';\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\n            var c = text[i];\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c])); else if (c === '<') {\n                var start = i;\n                do {\n                    i++\n                } while (text[i] !== '>' && i < text.length);\n                digits.push(parseValue(text.slice(start + 1, i)))\n            } else throw new Error(c + ' is not a valid character')\n        }\n        return parseBaseFromArray(digits, base, isNegative)\n    };\n\n    function parseBaseFromArray(digits, base, isNegative) {\n        var val = Integer[0], pow = Integer[1], i;\n        for (i = digits.length - 1; i >= 0; i--) {\n            val = val.add(digits[i].times(pow));\n            pow = pow.times(base)\n        }\n        return isNegative ? val.negate() : val\n    }\n\n    function stringify(digit, alphabet) {\n        alphabet = alphabet || DEFAULT_ALPHABET;\n        if (digit < alphabet.length) {\n            return alphabet[digit]\n        }\n        return '<' + digit + '>'\n    }\n\n    function toBase(n, base) {\n        base = bigInt(base);\n        if (base.isZero()) {\n            if (n.isZero()) return { value: [0], isNegative: false };\n            throw new Error('Cannot convert nonzero numbers to base 0.')\n        }\n        if (base.equals(-1)) {\n            if (n.isZero()) return { value: [0], isNegative: false };\n            if (n.isNegative()) return {\n                value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber())).map(Array.prototype.valueOf, [1, 0])),\n                isNegative: false\n            };\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1)).map(Array.prototype.valueOf, [0, 1]);\n            arr.unshift([1]);\n            return { value: [].concat.apply([], arr), isNegative: false }\n        }\n        var neg = false;\n        if (n.isNegative() && base.isPositive()) {\n            neg = true;\n            n = n.abs()\n        }\n        if (base.isUnit()) {\n            if (n.isZero()) return { value: [0], isNegative: false };\n            return { value: Array.apply(null, Array(n.toJSNumber())).map(Number.prototype.valueOf, 1), isNegative: neg }\n        }\n        var out = [];\n        var left = n, divmod;\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\n            divmod = left.divmod(base);\n            left = divmod.quotient;\n            var digit = divmod.remainder;\n            if (digit.isNegative()) {\n                digit = base.minus(digit).abs();\n                left = left.next()\n            }\n            out.push(digit.toJSNumber())\n        }\n        out.push(left.toJSNumber());\n        return { value: out.reverse(), isNegative: neg }\n    }\n\n    function toBaseString(n, base, alphabet) {\n        var arr = toBase(n, base);\n        return (arr.isNegative ? '-' : '') + arr.value.map(function (x) {\n            return stringify(x, alphabet)\n        }).join('')\n    }\n\n    BigInteger.prototype.toArray = function (radix) {\n        return toBase(this, radix)\n    };\n    SmallInteger.prototype.toArray = function (radix) {\n        return toBase(this, radix)\n    };\n    NativeBigInt.prototype.toArray = function (radix) {\n        return toBase(this, radix)\n    };\n    BigInteger.prototype.toString = function (radix, alphabet) {\n        if (radix === undefined) radix = 10;\n        if (radix !== 10) return toBaseString(this, radix, alphabet);\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = '0000000', digit;\n        while (--l >= 0) {\n            digit = String(v[l]);\n            str += zeros.slice(digit.length) + digit\n        }\n        var sign = this.sign ? '-' : '';\n        return sign + str\n    };\n    SmallInteger.prototype.toString = function (radix, alphabet) {\n        if (radix === undefined) radix = 10;\n        if (radix != 10) return toBaseString(this, radix, alphabet);\n        return String(this.value)\n    };\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () {\n        return this.toString()\n    };\n    BigInteger.prototype.valueOf = function () {\n        return parseInt(this.toString(), 10)\n    };\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\n    SmallInteger.prototype.valueOf = function () {\n        return this.value\n    };\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\n        return parseInt(this.toString(), 10)\n    };\n\n    function parseStringValue(v) {\n        if (isPrecise(+v)) {\n            var x = +v;\n            if (x === truncate(x)) return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\n            throw new Error('Invalid integer: ' + v)\n        }\n        var sign = v[0] === '-';\n        if (sign) v = v.slice(1);\n        var split = v.split(/e/i);\n        if (split.length > 2) throw new Error('Invalid integer: ' + split.join('e'));\n        if (split.length === 2) {\n            var exp = split[1];\n            if (exp[0] === '+') exp = exp.slice(1);\n            exp = +exp;\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error('Invalid integer: ' + exp + ' is not a valid exponent.');\n            var text = split[0];\n            var decimalPlace = text.indexOf('.');\n            if (decimalPlace >= 0) {\n                exp -= text.length - decimalPlace - 1;\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1)\n            }\n            if (exp < 0) throw new Error('Cannot include negative exponent part for integers');\n            text += new Array(exp + 1).join('0');\n            v = text\n        }\n        var isValid = /^([0-9][0-9]*)$/.test(v);\n        if (!isValid) throw new Error('Invalid integer: ' + v);\n        if (supportsNativeBigInt) {\n            return new NativeBigInt(BigInt(sign ? '-' + v : v))\n        }\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\n        while (max > 0) {\n            r.push(+v.slice(min, max));\n            min -= l;\n            if (min < 0) min = 0;\n            max -= l\n        }\n        trim(r);\n        return new BigInteger(r, sign)\n    }\n\n    function parseNumberValue(v) {\n        if (supportsNativeBigInt) {\n            return new NativeBigInt(BigInt(v))\n        }\n        if (isPrecise(v)) {\n            if (v !== truncate(v)) throw new Error(v + ' is not an integer.');\n            return new SmallInteger(v)\n        }\n        return parseStringValue(v.toString())\n    }\n\n    function parseValue(v) {\n        if (typeof v === 'number') {\n            return parseNumberValue(v)\n        }\n        if (typeof v === 'string') {\n            return parseStringValue(v)\n        }\n        if (typeof v === 'bigint') {\n            return new NativeBigInt(v)\n        }\n        return v\n    }\n\n    for (var i = 0; i < 1e3; i++) {\n        Integer[i] = parseValue(i);\n        if (i > 0) Integer[-i] = parseValue(-i)\n    }\n    Integer.one = Integer[1];\n    Integer.zero = Integer[0];\n    Integer.minusOne = Integer[-1];\n    Integer.max = max;\n    Integer.min = min;\n    Integer.gcd = gcd;\n    Integer.lcm = lcm;\n    Integer.isInstance = function (x) {\n        return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt\n    };\n    Integer.randBetween = randBetween;\n    Integer.fromArray = function (digits, base, isNegative) {\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative)\n    };\n    return Integer\n}();\nif (typeof module !== 'undefined' && module.hasOwnProperty('exports')) {\n    module.exports = bigInt\n}\nif (typeof define === 'function' && define.amd) {\n    define('big-integer', [], function () {\n        return bigInt\n    })\n}\n\nexport default bigInt\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @module FactoryMaker\n * @ignore\n */\nconst FactoryMaker = (function () {\n\n    let instance;\n    let singletonContexts = [];\n    const singletonFactories = {};\n    const classFactories = {};\n\n    function extend(name, childInstance, override, context) {\n        if (!context[name] && childInstance) {\n            context[name] = {\n                instance: childInstance,\n                override: override\n            };\n        }\n    }\n\n    /**\n     * Use this method from your extended object.  this.factory is injected into your object.\n     * this.factory.getSingletonInstance(this.context, 'VideoModel')\n     * will return the video model for use in the extended object.\n     *\n     * @param {Object} context - injected into extended object as this.context\n     * @param {string} className - string name found in all dash.js objects\n     * with name __dashjs_factory_name Will be at the bottom. Will be the same as the object's name.\n     * @returns {*} Context aware instance of specified singleton name.\n     * @memberof module:FactoryMaker\n     * @instance\n     */\n    function getSingletonInstance(context, className) {\n        for (const i in singletonContexts) {\n            const obj = singletonContexts[i];\n            if (obj.context === context && obj.name === className) {\n                return obj.instance;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Use this method to add an singleton instance to the system.  Useful for unit testing to mock objects etc.\n     *\n     * @param {Object} context\n     * @param {string} className\n     * @param {Object} instance\n     * @memberof module:FactoryMaker\n     * @instance\n     */\n    function setSingletonInstance(context, className, instance) {\n        for (const i in singletonContexts) {\n            const obj = singletonContexts[i];\n            if (obj.context === context && obj.name === className) {\n                singletonContexts[i].instance = instance;\n                return;\n            }\n        }\n        singletonContexts.push({\n            name: className,\n            context: context,\n            instance: instance\n        });\n    }\n\n    /**\n     * Use this method to remove all singleton instances associated with a particular context.\n     *\n     * @param {Object} context\n     * @memberof module:FactoryMaker\n     * @instance\n     */\n    function deleteSingletonInstances(context) {\n        singletonContexts = singletonContexts.filter(x => x.context !== context);\n    }\n\n    /*------------------------------------------------------------------------------------------*/\n\n    // Factories storage Management\n\n    /*------------------------------------------------------------------------------------------*/\n\n    function getFactoryByName(name, factoriesArray) {\n        return factoriesArray[name];\n    }\n\n    function updateFactory(name, factory, factoriesArray) {\n        if (name in factoriesArray) {\n            factoriesArray[name] = factory;\n        }\n    }\n\n    /*------------------------------------------------------------------------------------------*/\n\n    // Class Factories Management\n\n    /*------------------------------------------------------------------------------------------*/\n\n    function updateClassFactory(name, factory) {\n        updateFactory(name, factory, classFactories);\n    }\n\n    function getClassFactoryByName(name) {\n        return getFactoryByName(name, classFactories);\n    }\n\n    function getClassFactory(classConstructor) {\n        let factory = getFactoryByName(classConstructor.__dashjs_factory_name, classFactories);\n\n        if (!factory) {\n            factory = function (context) {\n                if (context === undefined) {\n                    context = {};\n                }\n                return {\n                    create: function () {\n                        return merge(classConstructor, context, arguments);\n                    }\n                };\n            };\n\n            classFactories[classConstructor.__dashjs_factory_name] = factory; // store factory\n        }\n        return factory;\n    }\n\n    /*------------------------------------------------------------------------------------------*/\n\n    // Singleton Factory MAangement\n\n    /*------------------------------------------------------------------------------------------*/\n\n    function updateSingletonFactory(name, factory) {\n        updateFactory(name, factory, singletonFactories);\n    }\n\n    function getSingletonFactoryByName(name) {\n        return getFactoryByName(name, singletonFactories);\n    }\n\n    function getSingletonFactory(classConstructor) {\n        let factory = getFactoryByName(classConstructor.__dashjs_factory_name, singletonFactories);\n        if (!factory) {\n            factory = function (context) {\n                let instance;\n                if (context === undefined) {\n                    context = {};\n                }\n                return {\n                    getInstance: function () {\n                        // If we don't have an instance yet check for one on the context\n                        if (!instance) {\n                            instance = getSingletonInstance(context, classConstructor.__dashjs_factory_name);\n                        }\n                        // If there's no instance on the context then create one\n                        if (!instance) {\n                            instance = merge(classConstructor, context, arguments);\n                            singletonContexts.push({\n                                name: classConstructor.__dashjs_factory_name,\n                                context: context,\n                                instance: instance\n                            });\n                        }\n                        return instance;\n                    }\n                };\n            };\n            singletonFactories[classConstructor.__dashjs_factory_name] = factory; // store factory\n        }\n\n        return factory;\n    }\n\n    function merge(classConstructor, context, args) {\n\n        let classInstance;\n        const className = classConstructor.__dashjs_factory_name;\n        const extensionObject = context[className];\n\n        if (extensionObject) {\n\n            let extension = extensionObject.instance;\n\n            if (extensionObject.override) { //Override public methods in parent but keep parent.\n\n                classInstance = classConstructor.apply({context}, args);\n                extension = extension.apply({\n                    context,\n                    factory: instance,\n                    parent: classInstance\n                }, args);\n\n                for (const prop in extension) {\n                    if (classInstance.hasOwnProperty(prop)) {\n                        classInstance[prop] = extension[prop];\n                    }\n                }\n\n            } else { //replace parent object completely with new object. Same as dijon.\n\n                return extension.apply({\n                    context,\n                    factory: instance\n                }, args);\n\n            }\n        } else {\n            // Create new instance of the class\n            classInstance = classConstructor.apply({context}, args);\n        }\n\n        // Add getClassName function to class instance prototype (used by Debug)\n        classInstance.getClassName = function () {return className;};\n\n        return classInstance;\n    }\n\n    instance = {\n        extend: extend,\n        getSingletonInstance: getSingletonInstance,\n        setSingletonInstance: setSingletonInstance,\n        deleteSingletonInstances: deleteSingletonInstances,\n        getSingletonFactory: getSingletonFactory,\n        getSingletonFactoryByName: getSingletonFactoryByName,\n        updateSingletonFactory: updateSingletonFactory,\n        getClassFactory: getClassFactory,\n        getClassFactoryByName: getClassFactoryByName,\n        updateClassFactory: updateClassFactory\n    };\n\n    return instance;\n\n}());\n\nexport default FactoryMaker;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass ErrorsBase {\n    extend(errors, config) {\n        if (!errors) {\n            return;\n        }\n\n        let override = config ? config.override : false;\n        let publicOnly = config ? config.publicOnly : false;\n\n\n        for (const err in errors) {\n            if (!errors.hasOwnProperty(err) || (this[err] && !override)) {\n                continue;\n            }\n            if (publicOnly && errors[err].indexOf('public_') === -1) {\n                continue;\n            }\n            this[err] = errors[err];\n\n        }\n    }\n}\n\nexport default ErrorsBase;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass EventsBase {\n    extend(events, config) {\n        if (!events) {\n            return;\n        }\n\n        let override = config ? config.override : false;\n        let publicOnly = config ? config.publicOnly : false;\n\n\n        for (const evt in events) {\n            if (!events.hasOwnProperty(evt) || (this[evt] && !override)) {\n                continue;\n            }\n            if (publicOnly && events[evt].indexOf('public_') === -1) {\n                continue;\n            }\n            this[evt] = events[evt];\n\n        }\n    }\n}\n\nexport default EventsBase;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport FragmentRequest from '../streaming/vo/FragmentRequest.js';\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest.js';\nimport FactoryMaker from '../core/FactoryMaker.js';\n\nfunction MssFragmentInfoController(config) {\n\n    config = config || {};\n\n    let instance,\n        logger,\n        fragmentModel,\n        started,\n        type,\n        loadFragmentTimeout,\n        startTime,\n        startFragmentTime,\n        index;\n\n    const streamProcessor = config.streamProcessor;\n    const baseURLController = config.baseURLController;\n    const debug = config.debug;\n    const controllerType = 'MssFragmentInfoController';\n\n    function setup() {\n        logger = debug.getLogger(instance);\n    }\n\n    function initialize() {\n        type = streamProcessor.getType();\n        fragmentModel = streamProcessor.getFragmentModel();\n\n        started = false;\n        startTime = null;\n        startFragmentTime = null;\n    }\n\n    function start() {\n        if (started) {\n            return;\n        }\n\n        logger.debug('Start');\n\n        started = true;\n        index = 0;\n\n        loadNextFragmentInfo();\n    }\n\n    function stop() {\n        if (!started) {\n            return;\n        }\n\n        logger.debug('Stop');\n\n        clearTimeout(loadFragmentTimeout);\n        started = false;\n        startTime = null;\n        startFragmentTime = null;\n    }\n\n    function reset() {\n        stop();\n    }\n\n    function loadNextFragmentInfo() {\n        if (!started) {\n            return;\n        }\n\n        // Get last segment from SegmentTimeline\n        const representation = getCurrentRepresentation();\n        const manifest = representation.adaptation.period.mpd.manifest;\n        const adaptation = manifest.Period[representation.adaptation.period.index].AdaptationSet[representation.adaptation.index];\n        const segments = adaptation.SegmentTemplate.SegmentTimeline.S;\n        const segment = segments[segments.length - 1];\n\n        // logger.debug('Last fragment time: ' + (segment.t / adaptation.SegmentTemplate.timescale));\n\n        // Generate segment request\n        const request = getRequestForSegment(adaptation, representation, segment);\n\n        // Send segment request\n        requestFragment.call(this, request);\n    }\n\n    function getRequestForSegment(adaptation, representation, segment) {\n        let timescale = adaptation.SegmentTemplate.timescale;\n        let request = new FragmentRequest();\n\n        request.mediaType = type;\n        request.type = HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE;\n        // request.range = segment.mediaRange;\n        request.startTime = segment.t / timescale;\n        request.duration = segment.d / timescale;\n        request.timescale = timescale;\n        // request.availabilityStartTime = segment.availabilityStartTime;\n        // request.availabilityEndTime = segment.availabilityEndTime;\n        // request.wallStartTime = segment.wallStartTime;\n        request.bandwidth = representation.bandwidth;\n        request.index = index++;\n        request.adaptationIndex = representation.adaptation.index;\n        request.representation = representation;\n        request.url = baseURLController.resolve(representation.path).url + adaptation.SegmentTemplate.media;\n        request.url = request.url.replace('$Bandwidth$', representation.bandwidth);\n        request.url = request.url.replace('$Time$', segment.tManifest ? segment.tManifest : segment.t);\n        request.url = request.url.replace('/Fragments(', '/FragmentInfo(');\n\n        return request;\n    }\n\n    function getCurrentRepresentation() {\n        const representationController = streamProcessor.getRepresentationController();\n        const representation = representationController.getCurrentRepresentation();\n        return representation;\n    }\n\n    function requestFragment(request) {\n        // logger.debug('Load FragmentInfo for time: ' + request.startTime);\n        if (streamProcessor.getFragmentModel().isFragmentLoadedOrPending(request)) {\n            // We may have reached end of timeline in case of start-over streams\n            logger.debug('End of timeline');\n            stop();\n            return;\n        }\n\n        fragmentModel.executeRequest(request);\n    }\n\n    function fragmentInfoLoaded(e) {\n        if (!started) {\n            return;\n        }\n\n        const request = e.request;\n        if (!e.response) {\n            logger.error('Load error', request.url);\n            return;\n        }\n\n        let deltaFragmentTime,\n            deltaTime,\n            delay;\n\n        // logger.debug('FragmentInfo loaded: ', request.url);\n\n        if (startTime === null) {\n            startTime = new Date().getTime();\n        }\n\n        if (!startFragmentTime) {\n            startFragmentTime = request.startTime;\n        }\n\n        // Determine delay before requesting next FragmentInfo\n        deltaTime = (new Date().getTime() - startTime) / 1000;\n        deltaFragmentTime = (request.startTime + request.duration) - startFragmentTime;\n        delay = Math.max(0, (deltaFragmentTime - deltaTime));\n\n        // Set timeout for requesting next FragmentInfo\n        clearTimeout(loadFragmentTimeout);\n        loadFragmentTimeout = setTimeout(function () {\n            loadFragmentTimeout = null;\n            loadNextFragmentInfo();\n        }, delay * 1000);\n    }\n\n    function getType() {\n        return type;\n    }\n\n    instance = {\n        initialize: initialize,\n        controllerType: controllerType,\n        start: start,\n        fragmentInfoLoaded: fragmentInfoLoaded,\n        getType: getType,\n        reset: reset\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssFragmentInfoController.__dashjs_factory_name = 'MssFragmentInfoController';\nexport default FactoryMaker.getClassFactory(MssFragmentInfoController);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport DashJSError from '../streaming/vo/DashJSError.js';\nimport MssErrors from './errors/MssErrors.js';\n\nimport Events from '../streaming/MediaPlayerEvents.js';\nimport FactoryMaker from '../core/FactoryMaker.js';\n\n/**\n * @module MssFragmentMoofProcessor\n * @ignore\n * @param {Object} config object\n */\nfunction MssFragmentMoofProcessor(config) {\n\n    config = config || {};\n    let instance,\n        type,\n        logger;\n    const dashMetrics = config.dashMetrics;\n    const playbackController = config.playbackController;\n    const errorHandler = config.errHandler;\n    const eventBus = config.eventBus;\n    const ISOBoxer = config.ISOBoxer;\n    const debug = config.debug;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        type = '';\n    }\n\n    function processTfrf(request, tfrf, tfdt, streamProcessor) {\n        const representationController = streamProcessor.getRepresentationController();\n        const representation = representationController.getCurrentRepresentation();\n\n        const manifest = representation.adaptation.period.mpd.manifest;\n        const adaptation = manifest.Period[representation.adaptation.period.index].AdaptationSet[representation.adaptation.index];\n        const timescale = adaptation.SegmentTemplate.timescale;\n\n        type = streamProcessor.getType();\n\n        // Process tfrf only for live streams or start-over static streams (timeShiftBufferDepth > 0)\n        if (manifest.type !== 'dynamic' && !manifest.timeShiftBufferDepth) {\n            return;\n        }\n\n        if (!tfrf) {\n            errorHandler.error(new DashJSError(MssErrors.MSS_NO_TFRF_CODE, MssErrors.MSS_NO_TFRF_MESSAGE));\n            return;\n        }\n\n        // Get adaptation's segment timeline (always a SegmentTimeline in Smooth Streaming use case)\n        const segments = adaptation.SegmentTemplate.SegmentTimeline.S;\n        const entries = tfrf.entry;\n        let entry,\n            segmentTime,\n            range;\n        let segment = null;\n        let t = 0;\n        let endTime;\n        let availabilityStartTime = null;\n\n        if (entries.length === 0) {\n            return;\n        }\n\n        // Consider only first tfrf entry (to avoid pre-condition failure on fragment info requests)\n        entry = entries[0];\n\n        // In case of start-over streams, check if we have reached end of original manifest duration (set in timeShiftBufferDepth)\n        // => then do not update anymore timeline\n        if (manifest.type === 'static') {\n            // Get first segment time\n            segmentTime = segments[0].tManifest ? parseFloat(segments[0].tManifest) : segments[0].t;\n            if (entry.fragment_absolute_time > (segmentTime + (manifest.timeShiftBufferDepth * timescale))) {\n                return;\n            }\n        }\n\n        // logger.debug('entry - t = ', (entry.fragment_absolute_time / timescale));\n\n        // Get last segment time\n        segmentTime = segments[segments.length - 1].tManifest ? parseFloat(segments[segments.length - 1].tManifest) : segments[segments.length - 1].t;\n        // logger.debug('Last segment - t = ', (segmentTime / timescale));\n\n        // Check if we have to append new segment to timeline\n        if (entry.fragment_absolute_time <= segmentTime) {\n            // Update DVR window range => set range end to end time of current segment\n            range = {\n                start: segments[0].t / timescale,\n                end: (tfdt.baseMediaDecodeTime / timescale) + request.duration\n            };\n\n            updateDVR(request.mediaType, range, streamProcessor.getStreamInfo().manifestInfo);\n            return;\n        }\n\n        // logger.debug('Add new segment - t = ', (entry.fragment_absolute_time / timescale));\n        segment = {};\n        segment.t = entry.fragment_absolute_time;\n        segment.d = entry.fragment_duration;\n        // If timestamps starts at 0 relative to 1st segment (dynamic to static) then update segment time\n        if (segments[0].tManifest) {\n            segment.t -= parseFloat(segments[0].tManifest) - segments[0].t;\n            segment.tManifest = entry.fragment_absolute_time;\n        }\n\n        // Patch previous segment duration\n        let lastSegment = segments[segments.length - 1];\n        if (lastSegment.t + lastSegment.d !== segment.t) {\n            logger.debug('Patch segment duration - t = ', lastSegment.t + ', d = ' + lastSegment.d + ' => ' + (segment.t - lastSegment.t));\n            lastSegment.d = segment.t - lastSegment.t;\n        }\n\n        segments.push(segment);\n\n        // In case of static start-over streams, update content duration\n        if (manifest.type === 'static') {\n            if (type === 'video') {\n                segment = segments[segments.length - 1];\n                endTime = (segment.t + segment.d) / timescale;\n                if (endTime > representation.adaptation.period.duration) {\n                    eventBus.trigger(Events.MANIFEST_VALIDITY_CHANGED, { sender: this, newDuration: endTime });\n                }\n            }\n            return;\n        } else {\n            // In case of live streams, update segment timeline according to DVR window\n            if (manifest.timeShiftBufferDepth && manifest.timeShiftBufferDepth > 0) {\n                // Get timestamp of the last segment\n                segment = segments[segments.length - 1];\n                t = segment.t;\n\n                // Determine the segments' availability start time\n                availabilityStartTime = (t - (manifest.timeShiftBufferDepth * timescale)) / timescale;\n\n                // Remove segments prior to availability start time\n                segment = segments[0];\n                endTime = (segment.t + segment.d) / timescale;\n                while (endTime < availabilityStartTime) {\n                    // Check if not currently playing the segment to be removed\n                    if (!playbackController.isPaused() && playbackController.getTime() < endTime) {\n                        break;\n                    }\n                    // logger.debug('Remove segment  - t = ' + (segment.t / timescale));\n                    segments.splice(0, 1);\n                    segment = segments[0];\n                    endTime = (segment.t + segment.d) / timescale;\n                }\n            }\n\n            // Update DVR window range => set range end to end time of current segment\n            range = {\n                start: segments[0].t / timescale,\n                end: (tfdt.baseMediaDecodeTime / timescale) + request.duration\n            };\n\n            updateDVR(type, range, streamProcessor.getStreamInfo().manifestInfo);\n        }\n\n    }\n\n    function updateDVR(type, range, manifestInfo) {\n        if (type !== 'video' && type !== 'audio') {\n            return;\n        }\n        const dvrInfos = dashMetrics.getCurrentDVRInfo(type);\n        if (!dvrInfos || (range.end > dvrInfos.range.end)) {\n            logger.debug('Update DVR range: [' + range.start + ' - ' + range.end + ']');\n            dashMetrics.addDVRInfo(type, playbackController.getTime(), manifestInfo, range);\n            playbackController.updateCurrentTime(type);\n        }\n    }\n\n    // This function returns the offset of the 1st byte of a child box within a container box\n    function getBoxOffset(parent, type) {\n        let offset = 8;\n        let i = 0;\n\n        for (i = 0; i < parent.boxes.length; i++) {\n            if (parent.boxes[i].type === type) {\n                return offset;\n            }\n            offset += parent.boxes[i].size;\n        }\n        return offset;\n    }\n\n    function convertFragment(e, streamProcessor) {\n        let i;\n\n        // e.request contains request description object\n        // e.response contains fragment bytes\n        const isoFile = ISOBoxer.parseBuffer(e.response);\n        // Update track_Id in tfhd box\n        const tfhd = isoFile.fetch('tfhd');\n        tfhd.track_ID = e.request.representation.mediaInfo.index + 1;\n\n        // Add tfdt box\n        let tfdt = isoFile.fetch('tfdt');\n        const traf = isoFile.fetch('traf');\n        if (tfdt === null) {\n            tfdt = ISOBoxer.createFullBox('tfdt', traf, tfhd);\n            tfdt.version = 1;\n            tfdt.flags = 0;\n            tfdt.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale);\n        }\n\n        const trun = isoFile.fetch('trun');\n\n        // Process tfxd boxes\n        // This box provide absolute timestamp but we take the segment start time for tfdt\n        let tfxd = isoFile.fetch('tfxd');\n        if (tfxd) {\n            tfxd._parent.boxes.splice(tfxd._parent.boxes.indexOf(tfxd), 1);\n            tfxd = null;\n        }\n        let tfrf = isoFile.fetch('tfrf');\n        processTfrf(e.request, tfrf, tfdt, streamProcessor);\n        if (tfrf) {\n            tfrf._parent.boxes.splice(tfrf._parent.boxes.indexOf(tfrf), 1);\n            tfrf = null;\n        }\n\n        // If protected content in PIFF1.1 format (sepiff box = Sample Encryption PIFF)\n        // => convert sepiff box it into a senc box\n        // => create saio and saiz boxes (if not already present)\n        const sepiff = isoFile.fetch('sepiff');\n        if (sepiff !== null) {\n            sepiff.type = 'senc';\n            sepiff.usertype = undefined;\n\n            let saio = isoFile.fetch('saio');\n            if (saio === null) {\n                // Create Sample Auxiliary Information Offsets Box box (saio)\n                saio = ISOBoxer.createFullBox('saio', traf);\n                saio.version = 0;\n                saio.flags = 0;\n                saio.entry_count = 1;\n                saio.offset = [0];\n\n                const saiz = ISOBoxer.createFullBox('saiz', traf);\n                saiz.version = 0;\n                saiz.flags = 0;\n                saiz.sample_count = sepiff.sample_count;\n                saiz.default_sample_info_size = 0;\n                saiz.sample_info_size = [];\n\n                if (sepiff.flags & 0x02) {\n                    // Sub-sample encryption => set sample_info_size for each sample\n                    for (i = 0; i < sepiff.sample_count; i += 1) {\n                        // 10 = 8 (InitializationVector field size) + 2 (subsample_count field size)\n                        // 6 = 2 (BytesOfClearData field size) + 4 (BytesOfEncryptedData field size)\n                        saiz.sample_info_size[i] = 10 + (6 * sepiff.entry[i].NumberOfEntries);\n                    }\n                } else {\n                    // No sub-sample encryption => set default sample_info_size = InitializationVector field size (8)\n                    saiz.default_sample_info_size = 8;\n                }\n            }\n        }\n\n        tfhd.flags &= 0xFFFFFE; // set tfhd.base-data-offset-present to false\n        tfhd.flags |= 0x020000; // set tfhd.default-base-is-moof to true\n        trun.flags |= 0x000001; // set trun.data-offset-present to true\n\n        // Update trun.data_offset field that corresponds to first data byte (inside mdat box)\n        const moof = isoFile.fetch('moof');\n        let length = moof.getLength();\n        trun.data_offset = length + 8;\n\n        // Update saio box offset field according to new senc box offset\n        let saio = isoFile.fetch('saio');\n        if (saio !== null) {\n            let trafPosInMoof = getBoxOffset(moof, 'traf');\n            let sencPosInTraf = getBoxOffset(traf, 'senc');\n            // Set offset from begin fragment to the first IV field in senc box\n            saio.offset[0] = trafPosInMoof + sencPosInTraf + 16; // 16 = box header (12) + sample_count field size (4)\n        }\n\n        // Write transformed/processed fragment into request reponse data\n        e.response = isoFile.write();\n    }\n\n    function updateSegmentList(e, streamProcessor) {\n        // e.request contains request description object\n        // e.response contains fragment bytes\n        if (!e.response) {\n            throw new Error('e.response parameter is missing');\n        }\n\n        const isoFile = ISOBoxer.parseBuffer(e.response);\n        // Update track_Id in tfhd box\n        const tfhd = isoFile.fetch('tfhd');\n        tfhd.track_ID = e.request.representation.mediaInfo.index + 1;\n\n        // Add tfdt box\n        let tfdt = isoFile.fetch('tfdt');\n        let traf = isoFile.fetch('traf');\n        if (tfdt === null) {\n            tfdt = ISOBoxer.createFullBox('tfdt', traf, tfhd);\n            tfdt.version = 1;\n            tfdt.flags = 0;\n            tfdt.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale);\n        }\n\n        let tfrf = isoFile.fetch('tfrf');\n        processTfrf(e.request, tfrf, tfdt, streamProcessor);\n        if (tfrf) {\n            tfrf._parent.boxes.splice(tfrf._parent.boxes.indexOf(tfrf), 1);\n            tfrf = null;\n        }\n    }\n\n    function getType() {\n        return type;\n    }\n\n    instance = {\n        convertFragment,\n        updateSegmentList,\n        getType\n    };\n\n    setup();\n    return instance;\n}\n\nMssFragmentMoofProcessor.__dashjs_factory_name = 'MssFragmentMoofProcessor';\nexport default FactoryMaker.getClassFactory(MssFragmentMoofProcessor);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport MssErrors from './errors/MssErrors.js';\nimport FactoryMaker from '../core/FactoryMaker.js';\n\n/**\n * @module MssFragmentMoovProcessor\n * @ignore\n * @param {Object} config object\n */\nfunction MssFragmentMoovProcessor(config) {\n    config = config || {};\n    const NALUTYPE_SPS = 7;\n    const NALUTYPE_PPS = 8;\n    const constants = config.constants;\n    const ISOBoxer = config.ISOBoxer;\n\n    let protectionController = config.protectionController;\n    let instance,\n        period,\n        adaptationSet,\n        representation,\n        contentProtection,\n        timescale,\n        trackId;\n\n    function createFtypBox(isoFile) {\n        let ftyp = ISOBoxer.createBox('ftyp', isoFile);\n        ftyp.major_brand = 'iso6';\n        ftyp.minor_version = 1; // is an informative integer for the minor version of the major brand\n        ftyp.compatible_brands = []; //is a list, to the end of the box, of brands isom, iso6 and msdh\n        ftyp.compatible_brands[0] = 'isom'; // => decimal ASCII value for isom\n        ftyp.compatible_brands[1] = 'iso6'; // => decimal ASCII value for iso6\n        ftyp.compatible_brands[2] = 'msdh'; // => decimal ASCII value for msdh\n\n        return ftyp;\n    }\n\n    function createMoovBox(isoFile) {\n\n        // moov box\n        let moov = ISOBoxer.createBox('moov', isoFile);\n\n        // moov/mvhd\n        createMvhdBox(moov);\n\n        // moov/trak\n        let trak = ISOBoxer.createBox('trak', moov);\n\n        // moov/trak/tkhd\n        createTkhdBox(trak);\n\n        // moov/trak/mdia\n        let mdia = ISOBoxer.createBox('mdia', trak);\n\n        // moov/trak/mdia/mdhd\n        createMdhdBox(mdia);\n\n        // moov/trak/mdia/hdlr\n        createHdlrBox(mdia);\n\n        // moov/trak/mdia/minf\n        let minf = ISOBoxer.createBox('minf', mdia);\n\n        switch (adaptationSet.type) {\n            case constants.VIDEO:\n                // moov/trak/mdia/minf/vmhd\n                createVmhdBox(minf);\n                break;\n            case constants.AUDIO:\n                // moov/trak/mdia/minf/smhd\n                createSmhdBox(minf);\n                break;\n            default:\n                break;\n        }\n\n        // moov/trak/mdia/minf/dinf\n        let dinf = ISOBoxer.createBox('dinf', minf);\n\n        // moov/trak/mdia/minf/dinf/dref\n        createDrefBox(dinf);\n\n        // moov/trak/mdia/minf/stbl\n        let stbl = ISOBoxer.createBox('stbl', minf);\n\n        // Create empty stts, stsc, stco and stsz boxes\n        // Use data field as for codem-isoboxer unknown boxes for setting fields value\n\n        // moov/trak/mdia/minf/stbl/stts\n        let stts = ISOBoxer.createFullBox('stts', stbl);\n        stts._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\n\n        // moov/trak/mdia/minf/stbl/stsc\n        let stsc = ISOBoxer.createFullBox('stsc', stbl);\n        stsc._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\n\n        // moov/trak/mdia/minf/stbl/stco\n        let stco = ISOBoxer.createFullBox('stco', stbl);\n        stco._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\n\n        // moov/trak/mdia/minf/stbl/stsz\n        let stsz = ISOBoxer.createFullBox('stsz', stbl);\n        stsz._data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, sample_size = 0, sample_count = 0\n\n        // moov/trak/mdia/minf/stbl/stsd\n        createStsdBox(stbl);\n\n        // moov/mvex\n        let mvex = ISOBoxer.createBox('mvex', moov);\n\n        // moov/mvex/trex\n        createTrexBox(mvex);\n\n        if (contentProtection && protectionController) {\n            let supportedKS = protectionController.getSupportedKeySystemMetadataFromContentProtection(contentProtection);\n            createProtectionSystemSpecificHeaderBox(moov, supportedKS);\n        }\n    }\n\n    function createMvhdBox(moov) {\n\n        let mvhd = ISOBoxer.createFullBox('mvhd', moov);\n\n        mvhd.version = 1; // version = 1  in order to have 64bits duration value\n\n        mvhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\n        mvhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\n        mvhd.timescale = timescale; // the time-scale for the entire presentation => 10000000 for MSS\n        mvhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the length of the presentation (in the indicated timescale) =>  take duration of period\n        mvhd.rate = 1.0; // 16.16 number, '1.0' = normal playback\n        mvhd.volume = 1.0; // 8.8 number, '1.0' = full volume\n        mvhd.reserved1 = 0;\n        mvhd.reserved2 = [0x0, 0x0];\n        mvhd.matrix = [\n            1, 0, 0, // provides a transformation matrix for the video;\n            0, 1, 0, // (u,v,w) are restricted here to (0,0,1)\n            0, 0, 16384\n        ];\n        mvhd.pre_defined = [0, 0, 0, 0, 0, 0];\n        mvhd.next_track_ID = trackId + 1; // indicates a value to use for the track ID of the next track to be added to this presentation\n\n        return mvhd;\n    }\n\n    function createTkhdBox(trak) {\n\n        let tkhd = ISOBoxer.createFullBox('tkhd', trak);\n\n        tkhd.version = 1; // version = 1  in order to have 64bits duration value\n        tkhd.flags = 0x1 | // Track_enabled (0x000001): Indicates that the track is enabled\n            0x2 | // Track_in_movie (0x000002):  Indicates that the track is used in the presentation\n            0x4; // Track_in_preview (0x000004):  Indicates that the track is used when previewing the presentation\n\n        tkhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\n        tkhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\n        tkhd.track_ID = trackId; // uniquely identifies this track over the entire life-time of this presentation\n        tkhd.reserved1 = 0;\n        tkhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the duration of this track (in the timescale indicated in the Movie Header Box) =>  take duration of period\n        tkhd.reserved2 = [0x0, 0x0];\n        tkhd.layer = 0; // specifies the front-to-back ordering of video tracks; tracks with lower numbers are closer to the viewer => 0 since only one video track\n        tkhd.alternate_group = 0; // specifies a group or collection of tracks => ignore\n        tkhd.volume = 1.0; // '1.0' = full volume\n        tkhd.reserved3 = 0;\n        tkhd.matrix = [\n            1, 0, 0, // provides a transformation matrix for the video;\n            0, 1, 0, // (u,v,w) are restricted here to (0,0,1)\n            0, 0, 16384\n        ];\n        tkhd.width = representation.width; // visual presentation width\n        tkhd.height = representation.height; // visual presentation height\n\n        return tkhd;\n    }\n\n    function createMdhdBox(mdia) {\n\n        let mdhd = ISOBoxer.createFullBox('mdhd', mdia);\n\n        mdhd.version = 1; // version = 1  in order to have 64bits duration value\n\n        mdhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\n        mdhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\n        mdhd.timescale = timescale; // the time-scale for the entire presentation\n        mdhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the duration of this media (in the scale of the timescale). If the duration cannot be determined then duration is set to all 1s.\n        mdhd.language = adaptationSet.lang || 'und'; // declares the language code for this media\n        mdhd.pre_defined = 0;\n\n        return mdhd;\n    }\n\n    function createHdlrBox(mdia) {\n\n        let hdlr = ISOBoxer.createFullBox('hdlr', mdia);\n\n        hdlr.pre_defined = 0;\n        switch (adaptationSet.type) {\n            case constants.VIDEO:\n                hdlr.handler_type = 'vide';\n                break;\n            case constants.AUDIO:\n                hdlr.handler_type = 'soun';\n                break;\n            default:\n                hdlr.handler_type = 'meta';\n                break;\n        }\n        hdlr.name = representation.id;\n        hdlr.reserved = [0, 0, 0];\n\n        return hdlr;\n    }\n\n    function createVmhdBox(minf) {\n\n        let vmhd = ISOBoxer.createFullBox('vmhd', minf);\n\n        vmhd.flags = 1;\n\n        vmhd.graphicsmode = 0; // specifies a composition mode for this video track, from the following enumerated set, which may be extended by derived specifications: copy = 0 copy over the existing image\n        vmhd.opcolor = [0, 0, 0]; // is a set of 3 colour values (red, green, blue) available for use by graphics modes\n\n        return vmhd;\n    }\n\n    function createSmhdBox(minf) {\n\n        let smhd = ISOBoxer.createFullBox('smhd', minf);\n\n        smhd.flags = 1;\n\n        smhd.balance = 0; // is a fixed-point 8.8 number that places mono audio tracks in a stereo space; 0 is centre (the normal value); full left is -1.0 and full right is 1.0.\n        smhd.reserved = 0;\n\n        return smhd;\n    }\n\n    function createDrefBox(dinf) {\n\n        let dref = ISOBoxer.createFullBox('dref', dinf);\n\n        dref.entry_count = 1;\n        dref.entries = [];\n\n        let url = ISOBoxer.createFullBox('url ', dref, false);\n        url.location = '';\n        url.flags = 1;\n\n        dref.entries.push(url);\n\n        return dref;\n    }\n\n    function createStsdBox(stbl) {\n\n        let stsd = ISOBoxer.createFullBox('stsd', stbl);\n\n        stsd.entries = [];\n        switch (adaptationSet.type) {\n            case constants.VIDEO:\n            case constants.AUDIO:\n                stsd.entries.push(createSampleEntry(stsd));\n                break;\n            default:\n                break;\n        }\n\n        stsd.entry_count = stsd.entries.length; // is an integer that counts the actual entries\n        return stsd;\n    }\n\n    function createSampleEntry(stsd) {\n        let codec = representation.codecs.substring(0, representation.codecs.indexOf('.'));\n\n        switch (codec) {\n            case 'avc1':\n                return createAVCVisualSampleEntry(stsd, codec);\n            case 'mp4a':\n                return createMP4AudioSampleEntry(stsd, codec);\n            default:\n                throw {\n                    code: MssErrors.MSS_UNSUPPORTED_CODEC_CODE,\n                    message: MssErrors.MSS_UNSUPPORTED_CODEC_MESSAGE,\n                    data: {\n                        codec: codec\n                    }\n                };\n        }\n    }\n\n    function createAVCVisualSampleEntry(stsd, codec) {\n        let avc1;\n\n        if (contentProtection) {\n            avc1 = ISOBoxer.createBox('encv', stsd, false);\n        } else {\n            avc1 = ISOBoxer.createBox('avc1', stsd, false);\n        }\n\n        // SampleEntry fields\n        avc1.reserved1 = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\n        avc1.data_reference_index = 1;\n\n        // VisualSampleEntry fields\n        avc1.pre_defined1 = 0;\n        avc1.reserved2 = 0;\n        avc1.pre_defined2 = [0, 0, 0];\n        avc1.height = representation.height;\n        avc1.width = representation.width;\n        avc1.horizresolution = 72; // 72 dpi\n        avc1.vertresolution = 72; // 72 dpi\n        avc1.reserved3 = 0;\n        avc1.frame_count = 1; // 1 compressed video frame per sample\n        avc1.compressorname = [\n            0x0A, 0x41, 0x56, 0x43, 0x20, 0x43, 0x6F, 0x64, // = 'AVC Coding';\n            0x69, 0x6E, 0x67, 0x00, 0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n        ];\n        avc1.depth = 0x0018; // 0x0018 – images are in colour with no alpha.\n        avc1.pre_defined3 = 65535;\n        avc1.config = createAVC1ConfigurationRecord();\n        if (contentProtection) {\n            // Create and add Protection Scheme Info Box\n            let sinf = ISOBoxer.createBox('sinf', avc1);\n\n            // Create and add Original Format Box => indicate codec type of the encrypted content\n            createOriginalFormatBox(sinf, codec);\n\n            // Create and add Scheme Type box\n            createSchemeTypeBox(sinf);\n\n            // Create and add Scheme Information Box\n            createSchemeInformationBox(sinf);\n        }\n\n        return avc1;\n    }\n\n    function createAVC1ConfigurationRecord() {\n\n        let avcC = null;\n        let avcCLength = 15; // length = 15 by default (0 SPS and 0 PPS)\n\n        // First get all SPS and PPS from codecPrivateData\n        let sps = [];\n        let pps = [];\n        let AVCProfileIndication = 0;\n        let AVCLevelIndication = 0;\n        let profile_compatibility = 0;\n\n        let nalus = representation.codecPrivateData.split('00000001').slice(1);\n        let naluBytes, naluType;\n\n        for (let i = 0; i < nalus.length; i++) {\n            naluBytes = hexStringtoBuffer(nalus[i]);\n\n            naluType = naluBytes[0] & 0x1F;\n\n            switch (naluType) {\n                case NALUTYPE_SPS:\n                    sps.push(naluBytes);\n                    avcCLength += naluBytes.length + 2; // 2 = sequenceParameterSetLength field length\n                    break;\n                case NALUTYPE_PPS:\n                    pps.push(naluBytes);\n                    avcCLength += naluBytes.length + 2; // 2 = pictureParameterSetLength field length\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        // Get profile and level from SPS\n        if (sps.length > 0) {\n            AVCProfileIndication = sps[0][1];\n            profile_compatibility = sps[0][2];\n            AVCLevelIndication = sps[0][3];\n        }\n\n        // Generate avcC buffer\n        avcC = new Uint8Array(avcCLength);\n\n        let i = 0;\n        // length\n        avcC[i++] = (avcCLength & 0xFF000000) >> 24;\n        avcC[i++] = (avcCLength & 0x00FF0000) >> 16;\n        avcC[i++] = (avcCLength & 0x0000FF00) >> 8;\n        avcC[i++] = (avcCLength & 0x000000FF);\n        avcC.set([0x61, 0x76, 0x63, 0x43], i); // type = 'avcC'\n        i += 4;\n        avcC[i++] = 1; // configurationVersion = 1\n        avcC[i++] = AVCProfileIndication;\n        avcC[i++] = profile_compatibility;\n        avcC[i++] = AVCLevelIndication;\n        avcC[i++] = 0xFF; // '11111' + lengthSizeMinusOne = 3\n        avcC[i++] = 0xE0 | sps.length; // '111' + numOfSequenceParameterSets\n        for (let n = 0; n < sps.length; n++) {\n            avcC[i++] = (sps[n].length & 0xFF00) >> 8;\n            avcC[i++] = (sps[n].length & 0x00FF);\n            avcC.set(sps[n], i);\n            i += sps[n].length;\n        }\n        avcC[i++] = pps.length; // numOfPictureParameterSets\n        for (let n = 0; n < pps.length; n++) {\n            avcC[i++] = (pps[n].length & 0xFF00) >> 8;\n            avcC[i++] = (pps[n].length & 0x00FF);\n            avcC.set(pps[n], i);\n            i += pps[n].length;\n        }\n\n        return avcC;\n    }\n\n    function createMP4AudioSampleEntry(stsd, codec) {\n        let mp4a;\n\n        if (contentProtection) {\n            mp4a = ISOBoxer.createBox('enca', stsd, false);\n        } else {\n            mp4a = ISOBoxer.createBox('mp4a', stsd, false);\n        }\n\n        // SampleEntry fields\n        mp4a.reserved1 = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\n        mp4a.data_reference_index = 1;\n\n        // AudioSampleEntry fields\n        mp4a.reserved2 = [0x0, 0x0];\n        mp4a.channelcount = representation.audioChannels;\n        mp4a.samplesize = 16;\n        mp4a.pre_defined = 0;\n        mp4a.reserved_3 = 0;\n        mp4a.samplerate = representation.audioSamplingRate << 16;\n\n        mp4a.esds = createMPEG4AACESDescriptor();\n\n        if (contentProtection) {\n            // Create and add Protection Scheme Info Box\n            let sinf = ISOBoxer.createBox('sinf', mp4a);\n\n            // Create and add Original Format Box => indicate codec type of the encrypted content\n            createOriginalFormatBox(sinf, codec);\n\n            // Create and add Scheme Type box\n            createSchemeTypeBox(sinf);\n\n            // Create and add Scheme Information Box\n            createSchemeInformationBox(sinf);\n        }\n\n        return mp4a;\n    }\n\n    function createMPEG4AACESDescriptor() {\n\n        // AudioSpecificConfig (see ISO/IEC 14496-3, subpart 1) => corresponds to hex bytes contained in 'codecPrivateData' field\n        let audioSpecificConfig = hexStringtoBuffer(representation.codecPrivateData);\n\n        // ESDS length = esds box header length (= 12) +\n        //               ES_Descriptor header length (= 5) +\n        //               DecoderConfigDescriptor header length (= 15) +\n        //               decoderSpecificInfo header length (= 2) +\n        //               AudioSpecificConfig length (= codecPrivateData length)\n        let esdsLength = 34 + audioSpecificConfig.length;\n        let esds = new Uint8Array(esdsLength);\n\n        let i = 0;\n        // esds box\n        esds[i++] = (esdsLength & 0xFF000000) >> 24; // esds box length\n        esds[i++] = (esdsLength & 0x00FF0000) >> 16; // ''\n        esds[i++] = (esdsLength & 0x0000FF00) >> 8; // ''\n        esds[i++] = (esdsLength & 0x000000FF); // ''\n        esds.set([0x65, 0x73, 0x64, 0x73], i); // type = 'esds'\n        i += 4;\n        esds.set([0, 0, 0, 0], i); // version = 0, flags = 0\n        i += 4;\n        // ES_Descriptor (see ISO/IEC 14496-1 (Systems))\n        esds[i++] = 0x03; // tag = 0x03 (ES_DescrTag)\n        esds[i++] = 20 + audioSpecificConfig.length; // size\n        esds[i++] = (trackId & 0xFF00) >> 8; // ES_ID = track_id\n        esds[i++] = (trackId & 0x00FF); // ''\n        esds[i++] = 0; // flags and streamPriority\n\n        // DecoderConfigDescriptor (see ISO/IEC 14496-1 (Systems))\n        esds[i++] = 0x04; // tag = 0x04 (DecoderConfigDescrTag)\n        esds[i++] = 15 + audioSpecificConfig.length; // size\n        esds[i++] = 0x40; // objectTypeIndication = 0x40 (MPEG-4 AAC)\n        esds[i] = 0x05 << 2; // streamType = 0x05 (Audiostream)\n        esds[i] |= 0 << 1; // upStream = 0\n        esds[i++] |= 1; // reserved = 1\n        esds[i++] = 0xFF; // buffersizeDB = undefined\n        esds[i++] = 0xFF; // ''\n        esds[i++] = 0xFF; // ''\n        esds[i++] = (representation.bandwidth & 0xFF000000) >> 24; // maxBitrate\n        esds[i++] = (representation.bandwidth & 0x00FF0000) >> 16; // ''\n        esds[i++] = (representation.bandwidth & 0x0000FF00) >> 8; // ''\n        esds[i++] = (representation.bandwidth & 0x000000FF); // ''\n        esds[i++] = (representation.bandwidth & 0xFF000000) >> 24; // avgbitrate\n        esds[i++] = (representation.bandwidth & 0x00FF0000) >> 16; // ''\n        esds[i++] = (representation.bandwidth & 0x0000FF00) >> 8; // ''\n        esds[i++] = (representation.bandwidth & 0x000000FF); // ''\n\n        // DecoderSpecificInfo (see ISO/IEC 14496-1 (Systems))\n        esds[i++] = 0x05; // tag = 0x05 (DecSpecificInfoTag)\n        esds[i++] = audioSpecificConfig.length; // size\n        esds.set(audioSpecificConfig, i); // AudioSpecificConfig bytes\n\n        return esds;\n    }\n\n    function createOriginalFormatBox(sinf, codec) {\n        let frma = ISOBoxer.createBox('frma', sinf);\n        frma.data_format = stringToCharCode(codec);\n    }\n\n    function createSchemeTypeBox(sinf) {\n        let schm = ISOBoxer.createFullBox('schm', sinf);\n\n        schm.flags = 0;\n        schm.version = 0;\n        schm.scheme_type = 0x63656E63; // 'cenc' => common encryption\n        schm.scheme_version = 0x00010000; // version set to 0x00010000 (Major version 1, Minor version 0)\n    }\n\n    function createSchemeInformationBox(sinf) {\n        let schi = ISOBoxer.createBox('schi', sinf);\n\n        // Create and add Track Encryption Box\n        createTrackEncryptionBox(schi);\n    }\n\n    function createProtectionSystemSpecificHeaderBox(moov, keySystems) {\n        let pssh_bytes,\n            pssh,\n            i,\n            parsedBuffer;\n\n        for (i = 0; i < keySystems.length; i += 1) {\n            pssh_bytes = keySystems[i].initData;\n            if (pssh_bytes) {\n                parsedBuffer = ISOBoxer.parseBuffer(pssh_bytes);\n                pssh = parsedBuffer.fetch('pssh');\n                if (pssh) {\n                    ISOBoxer.Utils.appendBox(moov, pssh);\n                }\n            }\n        }\n    }\n\n    function createTrackEncryptionBox(schi) {\n        let tenc = ISOBoxer.createFullBox('tenc', schi);\n\n        tenc.flags = 0;\n        tenc.version = 0;\n\n        tenc.default_IsEncrypted = 0x1;\n        tenc.default_IV_size = 8;\n        tenc.default_KID = (contentProtection && (contentProtection.length) > 0 && contentProtection[0]['cenc:default_KID']) ?\n            contentProtection[0]['cenc:default_KID'] : [0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\n    }\n\n    function createTrexBox(moov) {\n        let trex = ISOBoxer.createFullBox('trex', moov);\n\n        trex.track_ID = trackId;\n        trex.default_sample_description_index = 1;\n        trex.default_sample_duration = 0;\n        trex.default_sample_size = 0;\n        trex.default_sample_flags = 0;\n\n        return trex;\n    }\n\n    function hexStringtoBuffer(str) {\n        let buf = new Uint8Array(str.length / 2);\n        let i;\n\n        for (i = 0; i < str.length / 2; i += 1) {\n            buf[i] = parseInt('' + str[i * 2] + str[i * 2 + 1], 16);\n        }\n        return buf;\n    }\n\n    function stringToCharCode(str) {\n        let code = 0;\n        let i;\n\n        for (i = 0; i < str.length; i += 1) {\n            code |= str.charCodeAt(i) << ((str.length - i - 1) * 8);\n        }\n        return code;\n    }\n\n    function generateMoov(rep) {\n        if (!rep || !rep.adaptation) {\n            return;\n        }\n\n        let isoFile,\n            arrayBuffer;\n\n        representation = rep;\n        adaptationSet = representation.adaptation;\n\n        period = adaptationSet.period;\n        trackId = adaptationSet.index + 1;\n        contentProtection = period.mpd.manifest.Period[period.index].AdaptationSet[adaptationSet.index].ContentProtection;\n\n        timescale = period.mpd.manifest.Period[period.index].AdaptationSet[adaptationSet.index].SegmentTemplate.timescale;\n\n        isoFile = ISOBoxer.createFile();\n        createFtypBox(isoFile);\n        createMoovBox(isoFile);\n\n        arrayBuffer = isoFile.write();\n\n        return arrayBuffer;\n    }\n\n    instance = {\n        generateMoov: generateMoov\n    };\n\n    return instance;\n}\n\nMssFragmentMoovProcessor.__dashjs_factory_name = 'MssFragmentMoovProcessor';\nexport default FactoryMaker.getClassFactory(MssFragmentMoovProcessor);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport MssFragmentMoofProcessor from './MssFragmentMoofProcessor.js';\nimport MssFragmentMoovProcessor from './MssFragmentMoovProcessor.js';\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest.js';\nimport FactoryMaker from '../core/FactoryMaker.js';\n\n\n// Add specific box processors not provided by codem-isoboxer library\n\nfunction arrayEqual(arr1, arr2) {\n    return (arr1.length === arr2.length) && arr1.every(function (element, index) {\n        return element === arr2[index];\n    });\n}\n\nfunction saioProcessor() {\n    this._procFullBox();\n    if (this.flags & 1) {\n        this._procField('aux_info_type', 'uint', 32);\n        this._procField('aux_info_type_parameter', 'uint', 32);\n    }\n    this._procField('entry_count', 'uint', 32);\n    this._procFieldArray('offset', this.entry_count, 'uint', (this.version === 1) ? 64 : 32);\n}\n\nfunction saizProcessor() {\n    this._procFullBox();\n    if (this.flags & 1) {\n        this._procField('aux_info_type', 'uint', 32);\n        this._procField('aux_info_type_parameter', 'uint', 32);\n    }\n    this._procField('default_sample_info_size', 'uint', 8);\n    this._procField('sample_count', 'uint', 32);\n    if (this.default_sample_info_size === 0) {\n        this._procFieldArray('sample_info_size', this.sample_count, 'uint', 8);\n    }\n}\n\nfunction sencProcessor() {\n    this._procFullBox();\n    this._procField('sample_count', 'uint', 32);\n    if (this.flags & 1) {\n        this._procField('IV_size', 'uint', 8);\n    }\n    this._procEntries('entry', this.sample_count, function (entry) {\n        this._procEntryField(entry, 'InitializationVector', 'data', 8);\n        if (this.flags & 2) {\n            this._procEntryField(entry, 'NumberOfEntries', 'uint', 16);\n            this._procSubEntries(entry, 'clearAndCryptedData', entry.NumberOfEntries, function (clearAndCryptedData) {\n                this._procEntryField(clearAndCryptedData, 'BytesOfClearData', 'uint', 16);\n                this._procEntryField(clearAndCryptedData, 'BytesOfEncryptedData', 'uint', 32);\n            });\n        }\n    });\n}\n\nfunction uuidProcessor() {\n    let tfxdUserType = [0x6D, 0x1D, 0x9B, 0x05, 0x42, 0xD5, 0x44, 0xE6, 0x80, 0xE2, 0x14, 0x1D, 0xAF, 0xF7, 0x57, 0xB2];\n    let tfrfUserType = [0xD4, 0x80, 0x7E, 0xF2, 0xCA, 0x39, 0x46, 0x95, 0x8E, 0x54, 0x26, 0xCB, 0x9E, 0x46, 0xA7, 0x9F];\n    let sepiffUserType = [0xA2, 0x39, 0x4F, 0x52, 0x5A, 0x9B, 0x4f, 0x14, 0xA2, 0x44, 0x6C, 0x42, 0x7C, 0x64, 0x8D, 0xF4];\n\n    if (arrayEqual(this.usertype, tfxdUserType)) {\n        this._procFullBox();\n        if (this._parsing) {\n            this.type = 'tfxd';\n        }\n        this._procField('fragment_absolute_time', 'uint', (this.version === 1) ? 64 : 32);\n        this._procField('fragment_duration', 'uint', (this.version === 1) ? 64 : 32);\n    }\n\n    if (arrayEqual(this.usertype, tfrfUserType)) {\n        this._procFullBox();\n        if (this._parsing) {\n            this.type = 'tfrf';\n        }\n        this._procField('fragment_count', 'uint', 8);\n        this._procEntries('entry', this.fragment_count, function (entry) {\n            this._procEntryField(entry, 'fragment_absolute_time', 'uint', (this.version === 1) ? 64 : 32);\n            this._procEntryField(entry, 'fragment_duration', 'uint', (this.version === 1) ? 64 : 32);\n        });\n    }\n\n    if (arrayEqual(this.usertype, sepiffUserType)) {\n        if (this._parsing) {\n            this.type = 'sepiff';\n        }\n        sencProcessor.call(this);\n    }\n}\n\nfunction MssFragmentProcessor(config) {\n\n    config = config || {};\n    const context = this.context;\n    const dashMetrics = config.dashMetrics;\n    const playbackController = config.playbackController;\n    const eventBus = config.eventBus;\n    const protectionController = config.protectionController;\n    const ISOBoxer = config.ISOBoxer;\n    const debug = config.debug;\n    let mssFragmentMoovProcessor,\n        mssFragmentMoofProcessor,\n        instance;\n\n    function setup() {\n        ISOBoxer.addBoxProcessor('uuid', uuidProcessor);\n        ISOBoxer.addBoxProcessor('saio', saioProcessor);\n        ISOBoxer.addBoxProcessor('saiz', saizProcessor);\n        ISOBoxer.addBoxProcessor('senc', sencProcessor);\n\n        mssFragmentMoovProcessor = MssFragmentMoovProcessor(context).create({\n            protectionController: protectionController,\n            constants: config.constants,\n            ISOBoxer: ISOBoxer});\n\n        mssFragmentMoofProcessor = MssFragmentMoofProcessor(context).create({\n            dashMetrics: dashMetrics,\n            playbackController: playbackController,\n            ISOBoxer: ISOBoxer,\n            eventBus: eventBus,\n            debug: debug,\n            errHandler: config.errHandler\n        });\n    }\n\n    function generateMoov(rep) {\n        return mssFragmentMoovProcessor.generateMoov(rep);\n    }\n\n    function processFragment(e, streamProcessor) {\n        if (!e || !e.request || !e.response) {\n            throw new Error('e parameter is missing or malformed');\n        }\n\n        if (e.request.type === 'MediaSegment') {\n            // MediaSegment => convert to Smooth Streaming moof format\n            mssFragmentMoofProcessor.convertFragment(e, streamProcessor);\n\n        } else if (e.request.type === HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE) {\n            // FragmentInfo (live) => update segments list\n            mssFragmentMoofProcessor.updateSegmentList(e, streamProcessor);\n\n            // Stop event propagation (FragmentInfo must not be added to buffer)\n            e.sender = null;\n        }\n    }\n\n    instance = {\n        generateMoov,\n        processFragment\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssFragmentProcessor.__dashjs_factory_name = 'MssFragmentProcessor';\nexport default FactoryMaker.getClassFactory(MssFragmentProcessor);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport DataChunk from '../streaming/vo/DataChunk.js';\nimport FragmentRequest from '../streaming/vo/FragmentRequest.js';\nimport MssFragmentInfoController from './MssFragmentInfoController.js';\nimport MssFragmentProcessor from './MssFragmentProcessor.js';\nimport MssParser from './parser/MssParser.js';\nimport MssErrors from './errors/MssErrors.js';\nimport DashJSError from '../streaming/vo/DashJSError.js';\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest.js';\n\nfunction MssHandler(config) {\n\n    config = config || {};\n    const context = this.context;\n    const eventBus = config.eventBus;\n    const events = config.events;\n    const constants = config.constants;\n    const initSegmentType = config.initSegmentType;\n    const playbackController = config.playbackController;\n    const streamController = config.streamController;\n    let mssParser,\n        mssFragmentProcessor,\n        fragmentInfoControllers,\n        instance;\n\n    function setup() {\n        fragmentInfoControllers = [];\n    }\n\n    function createMssFragmentProcessor() {\n        mssFragmentProcessor = MssFragmentProcessor(context).create(config);\n    }\n\n    function getStreamProcessor(type) {\n        return streamController.getActiveStreamProcessors().filter(processor => {\n            return processor.getType() === type;\n        })[0];\n    }\n\n    function getFragmentInfoController(type) {\n        return fragmentInfoControllers.filter(controller => {\n            return (controller.getType() === type);\n        })[0];\n    }\n\n    function createDataChunk(request, streamId, endFragment) {\n        const chunk = new DataChunk();\n\n        chunk.streamId = streamId;\n        chunk.segmentType = request.type;\n        chunk.start = request.startTime;\n        chunk.duration = request.duration;\n        chunk.end = chunk.start + chunk.duration;\n        chunk.index = request.index;\n        chunk.bandwidth = request.bandwidth;\n        chunk.representation = request.representation;\n        chunk.endFragment = endFragment;\n\n        return chunk;\n    }\n\n    function startFragmentInfoControllers() {\n\n        // Create MssFragmentInfoControllers for each StreamProcessor of active stream (only for audio, video or text)\n        let processors = streamController.getActiveStreamProcessors();\n        processors.forEach(function (processor) {\n            if (processor.getType() === constants.VIDEO ||\n                processor.getType() === constants.AUDIO ||\n                processor.getType() === constants.TEXT) {\n\n                let fragmentInfoController = getFragmentInfoController(processor.getType());\n                if (!fragmentInfoController) {\n                    fragmentInfoController = MssFragmentInfoController(context).create({\n                        streamProcessor: processor,\n                        baseURLController: config.baseURLController,\n                        debug: config.debug\n                    });\n                    fragmentInfoController.initialize();\n                    fragmentInfoControllers.push(fragmentInfoController);\n                }\n                fragmentInfoController.start();\n            }\n        });\n    }\n\n    function stopFragmentInfoControllers() {\n        fragmentInfoControllers.forEach(c => {\n            c.reset();\n        });\n        fragmentInfoControllers = [];\n    }\n\n    function onInitFragmentNeeded(e) {\n        let streamProcessor = getStreamProcessor(e.mediaType);\n        if (!streamProcessor) {\n            return;\n        }\n\n        // Create init segment request\n        let representationController = streamProcessor.getRepresentationController();\n        let representation = representationController.getCurrentRepresentation();\n        let mediaInfo = streamProcessor.getMediaInfo();\n\n        let request = new FragmentRequest();\n        request.mediaType = representation.adaptation.type;\n        request.type = initSegmentType;\n        request.range = representation.range;\n        request.bandwidth = representation.bandwidth;\n        request.representation = representation;\n\n        const chunk = createDataChunk(request, mediaInfo.streamInfo.id, e.type !== events.FRAGMENT_LOADING_PROGRESS);\n\n        try {\n            // Generate init segment (moov)\n            chunk.bytes = mssFragmentProcessor.generateMoov(representation);\n\n            // Notify init segment has been loaded\n            eventBus.trigger(events.INIT_FRAGMENT_LOADED,\n                { chunk: chunk },\n                { streamId: mediaInfo.streamInfo.id, mediaType: representation.adaptation.type }\n            );\n        } catch (e) {\n            config.errHandler.error(new DashJSError(e.code, e.message, e.data));\n        }\n\n        // Change the sender value to stop event to be propagated\n        e.sender = null;\n    }\n\n    function onSegmentMediaLoaded(e) {\n        if (e.error) {\n            return;\n        }\n\n        let streamProcessor = getStreamProcessor(e.request.mediaType);\n        if (!streamProcessor) {\n            return;\n        }\n\n        // Process moof to transcode it from MSS to DASH (or to update segment timeline for SegmentInfo fragments)\n        mssFragmentProcessor.processFragment(e, streamProcessor);\n\n        if (e.request.type === HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE) {\n            // If FragmentInfo loaded, then notify corresponding MssFragmentInfoController\n            let fragmentInfoController = getFragmentInfoController(e.request.mediaType);\n            if (fragmentInfoController) {\n                fragmentInfoController.fragmentInfoLoaded(e);\n            }\n        }\n\n        // Start MssFragmentInfoControllers in case of start-over streams\n        let manifestInfo = e.request.representation.mediaInfo.streamInfo.manifestInfo;\n        if (!manifestInfo.isDynamic && manifestInfo.dvrWindowSize !== Infinity) {\n            startFragmentInfoControllers();\n        }\n    }\n\n    function onPlaybackPaused() {\n        if (playbackController.getIsDynamic() && playbackController.getTime() !== 0) {\n            startFragmentInfoControllers();\n        }\n    }\n\n    function onPlaybackSeeking() {\n        if (playbackController.getIsDynamic() && playbackController.getTime() !== 0) {\n            startFragmentInfoControllers();\n        }\n    }\n\n    function onTTMLPreProcess(ttmlSubtitles) {\n        if (!ttmlSubtitles || !ttmlSubtitles.data) {\n            return;\n        }\n\n        ttmlSubtitles.data = ttmlSubtitles.data.replace(/http:\\/\\/www.w3.org\\/2006\\/10\\/ttaf1/gi, 'http://www.w3.org/ns/ttml');\n    }\n\n    function registerEvents() {\n        eventBus.on(events.INIT_FRAGMENT_NEEDED, onInitFragmentNeeded, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH });\n        eventBus.on(events.PLAYBACK_PAUSED, onPlaybackPaused, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH });\n        eventBus.on(events.PLAYBACK_SEEKING, onPlaybackSeeking, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH });\n        eventBus.on(events.FRAGMENT_LOADING_COMPLETED, onSegmentMediaLoaded, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH });\n        eventBus.on(events.TTML_TO_PARSE, onTTMLPreProcess, instance);\n    }\n\n    function reset() {\n        if (mssParser) {\n            mssParser.reset();\n            mssParser = undefined;\n        }\n\n        eventBus.off(events.INIT_FRAGMENT_NEEDED, onInitFragmentNeeded, this);\n        eventBus.off(events.PLAYBACK_PAUSED, onPlaybackPaused, this);\n        eventBus.off(events.PLAYBACK_SEEKING, onPlaybackSeeking, this);\n        eventBus.off(events.FRAGMENT_LOADING_COMPLETED, onSegmentMediaLoaded, this);\n        eventBus.off(events.TTML_TO_PARSE, onTTMLPreProcess, this);\n\n        // Reset FragmentInfoControllers\n        stopFragmentInfoControllers();\n    }\n\n    function createMssParser() {\n        mssParser = MssParser(context).create(config);\n        return mssParser;\n    }\n\n    instance = {\n        reset,\n        createMssParser,\n        createMssFragmentProcessor,\n        registerEvents\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssHandler.__dashjs_factory_name = 'MssHandler';\nconst factory = dashjs.FactoryMaker.getClassFactory(MssHandler);\nfactory.errors = MssErrors;\ndashjs.FactoryMaker.updateClassFactory(MssHandler.__dashjs_factory_name, factory);\nexport default factory;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport ErrorsBase from '../../core/errors/ErrorsBase.js';\n\n/**\n * @class\n *\n */\nclass MssErrors extends ErrorsBase {\n    constructor() {\n        super();\n        /**\n         * Error code returned when no tfrf box is detected in MSS live stream\n         */\n        this.MSS_NO_TFRF_CODE = 200;\n\n        /**\n         * Error code returned when one of the codecs defined in the manifest is not supported\n         */\n        this.MSS_UNSUPPORTED_CODEC_CODE = 201;\n\n        this.MSS_NO_TFRF_MESSAGE = 'Missing tfrf in live media segment';\n        this.MSS_UNSUPPORTED_CODEC_MESSAGE = 'Unsupported codec';\n    }\n}\n\nlet mssErrors = new MssErrors();\nexport default mssErrors;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * @module MssParser\n * @ignore\n * @param {Object} config object\n */\n\nimport BigInt from '../../../externals/BigInteger.js';\nimport FactoryMaker from '../../core/FactoryMaker.js';\nimport ProtectionConstants from '../../streaming/constants/ProtectionConstants.js';\n\nfunction MssParser(config) {\n    config = config || {};\n    const BASE64 = config.BASE64;\n    const debug = config.debug;\n    const constants = config.constants;\n    const manifestModel = config.manifestModel;\n    const settings = config.settings;\n\n    const DEFAULT_TIME_SCALE = 10000000.0;\n    const SUPPORTED_CODECS = ['AAC', 'AACL', 'AACH', 'AACP', 'AVC1', 'H264', 'TTML', 'DFXP'];\n    // MPEG-DASH Role and accessibility mapping for text tracks according to ETSI TS 103 285 v1.1.1 (section 7.1.2)\n    const ROLE = {\n        'CAPT': 'main',\n        'SUBT': 'alternate',\n        'DESC': 'main'\n    };\n    const ACCESSIBILITY = {\n        'DESC': '2'\n    };\n    const samplingFrequencyIndex = {\n        96000: 0x0,\n        88200: 0x1,\n        64000: 0x2,\n        48000: 0x3,\n        44100: 0x4,\n        32000: 0x5,\n        24000: 0x6,\n        22050: 0x7,\n        16000: 0x8,\n        12000: 0x9,\n        11025: 0xA,\n        8000: 0xB,\n        7350: 0xC\n    };\n    const mimeTypeMap = {\n        'video': 'video/mp4',\n        'audio': 'audio/mp4',\n        'text': 'application/mp4'\n    };\n\n    let instance,\n        logger,\n        initialBufferSettings;\n\n\n    function setup() {\n        logger = debug.getLogger(instance);\n    }\n\n    function getAttributeAsBoolean(node, attrName) {\n        const value = node.getAttribute(attrName);\n        if (!value) {\n            return false;\n        }\n        return value.toLowerCase() === 'true';\n    }\n\n    function mapPeriod(smoothStreamingMedia, timescale) {\n        const period = {};\n        let streams,\n            adaptation;\n\n        // For each StreamIndex node, create an AdaptationSet element\n        period.AdaptationSet = [];\n        streams = smoothStreamingMedia.getElementsByTagName('StreamIndex');\n        for (let i = 0; i < streams.length; i++) {\n            adaptation = mapAdaptationSet(streams[i], timescale);\n            if (adaptation !== null) {\n                period.AdaptationSet.push(adaptation);\n            }\n        }\n\n        return period;\n    }\n\n    function mapAdaptationSet(streamIndex, timescale) {\n        const adaptationSet = {};\n        const representations = [];\n        let segmentTemplate;\n        let qualityLevels,\n            representation,\n            i,\n            index;\n\n        const name = streamIndex.getAttribute('Name');\n        const type = streamIndex.getAttribute('Type');\n        const lang = streamIndex.getAttribute('Language');\n        const fallBackId = lang ? type + '_' + lang : type;\n\n        adaptationSet.id = name || fallBackId;\n        adaptationSet.contentType = type;\n        adaptationSet.lang = lang || 'und';\n        adaptationSet.mimeType = mimeTypeMap[type];\n        adaptationSet.subType = streamIndex.getAttribute('Subtype');\n        adaptationSet.maxWidth = streamIndex.getAttribute('MaxWidth');\n        adaptationSet.maxHeight = streamIndex.getAttribute('MaxHeight');\n\n        // Map text tracks subTypes to MPEG-DASH AdaptationSet role and accessibility (see ETSI TS 103 285 v1.1.1, section 7.1.2)\n        if (adaptationSet.subType) {\n            if (ROLE[adaptationSet.subType]) {\n                adaptationSet.Role = [{\n                    schemeIdUri: 'urn:mpeg:dash:role:2011',\n                    value: ROLE[adaptationSet.subType]\n                }];\n            }\n            if (ACCESSIBILITY[adaptationSet.subType]) {\n                adaptationSet.Accessibility = [{\n                    schemeIdUri: 'urn:tva:metadata:cs:AudioPurposeCS:2007',\n                    value: ACCESSIBILITY[adaptationSet.subType]\n                }];\n            }\n        }\n\n        // Create a SegmentTemplate with a SegmentTimeline\n        segmentTemplate = mapSegmentTemplate(streamIndex, timescale);\n\n        qualityLevels = streamIndex.getElementsByTagName('QualityLevel');\n        // For each QualityLevel node, create a Representation element\n        for (i = 0; i < qualityLevels.length; i++) {\n            // Propagate BaseURL and mimeType\n            qualityLevels[i].BaseURL = adaptationSet.BaseURL;\n            qualityLevels[i].mimeType = adaptationSet.mimeType;\n\n            // Set quality level id\n            index = qualityLevels[i].getAttribute('Index');\n            qualityLevels[i].Id = adaptationSet.id + ((index !== null) ? ('_' + index) : '');\n\n            // Map Representation to QualityLevel\n            representation = mapRepresentation(qualityLevels[i], streamIndex);\n\n            if (representation !== null) {\n                // Copy SegmentTemplate into Representation\n                representation.SegmentTemplate = segmentTemplate;\n\n                representations.push(representation);\n            }\n        }\n\n        if (representations.length === 0) {\n            return null;\n        }\n\n        adaptationSet.Representation = representations;\n\n        // Set SegmentTemplate\n        adaptationSet.SegmentTemplate = segmentTemplate;\n\n        return adaptationSet;\n    }\n\n    function mapRepresentation(qualityLevel, streamIndex) {\n        const representation = {};\n        const type = streamIndex.getAttribute('Type');\n        let fourCCValue = null;\n        let width = null;\n        let height = null;\n\n        representation.id = qualityLevel.Id;\n        representation.bandwidth = parseInt(qualityLevel.getAttribute('Bitrate'), 10);\n        representation.mimeType = qualityLevel.mimeType;\n\n        width = parseInt(qualityLevel.getAttribute('MaxWidth'), 10);\n        height = parseInt(qualityLevel.getAttribute('MaxHeight'), 10);\n        if (!isNaN(width)) {\n            representation.width = width;\n        }\n        if (!isNaN(height)) {\n            representation.height = height;\n        }\n\n\n        fourCCValue = qualityLevel.getAttribute('FourCC');\n\n        // If FourCC not defined at QualityLevel level, then get it from StreamIndex level\n        if (fourCCValue === null || fourCCValue === '') {\n            fourCCValue = streamIndex.getAttribute('FourCC');\n        }\n\n        // If still not defined (optionnal for audio stream, see https://msdn.microsoft.com/en-us/library/ff728116%28v=vs.95%29.aspx),\n        // then we consider the stream is an audio AAC stream\n        if (fourCCValue === null || fourCCValue === '') {\n            if (type === constants.AUDIO) {\n                fourCCValue = 'AAC';\n            } else if (type === constants.VIDEO) {\n                logger.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type \"video\"');\n                return null;\n            }\n        }\n\n        // Check if codec is supported\n        if (SUPPORTED_CODECS.indexOf(fourCCValue.toUpperCase()) === -1) {\n            // Do not send warning\n            logger.warn('Codec not supported: ' + fourCCValue);\n            return null;\n        }\n\n        // Get codecs value according to FourCC field\n        if (fourCCValue === 'H264' || fourCCValue === 'AVC1') {\n            representation.codecs = getH264Codec(qualityLevel);\n        } else if (fourCCValue.indexOf('AAC') >= 0) {\n            representation.codecs = getAACCodec(qualityLevel, fourCCValue);\n            representation.audioSamplingRate = parseInt(qualityLevel.getAttribute('SamplingRate'), 10);\n            representation.audioChannels = parseInt(qualityLevel.getAttribute('Channels'), 10);\n        } else if (fourCCValue.indexOf('TTML') || fourCCValue.indexOf('DFXP')) {\n            representation.codecs = constants.STPP;\n        }\n\n        representation.codecPrivateData = '' + qualityLevel.getAttribute('CodecPrivateData');\n        representation.BaseURL = qualityLevel.BaseURL;\n\n        return representation;\n    }\n\n    function getH264Codec(qualityLevel) {\n        let codecPrivateData = qualityLevel.getAttribute('CodecPrivateData').toString();\n        let nalHeader,\n            avcoti;\n\n\n        // Extract from the CodecPrivateData field the hexadecimal representation of the following\n        // three bytes in the sequence parameter set NAL unit.\n        // => Find the SPS nal header\n        nalHeader = /00000001[0-9]7/.exec(codecPrivateData);\n        // => Find the 6 characters after the SPS nalHeader (if it exists)\n        avcoti = nalHeader && nalHeader[0] ? (codecPrivateData.substr(codecPrivateData.indexOf(nalHeader[0]) + 10, 6)) : undefined;\n\n        return 'avc1.' + avcoti;\n    }\n\n    function getAACCodec(qualityLevel, fourCCValue) {\n        const samplingRate = parseInt(qualityLevel.getAttribute('SamplingRate'), 10);\n        let codecPrivateData = qualityLevel.getAttribute('CodecPrivateData').toString();\n        let objectType = 0;\n        let codecPrivateDataHex,\n            arr16,\n            indexFreq,\n            extensionSamplingFrequencyIndex;\n\n        //chrome problem, in implicit AAC HE definition, so when AACH is detected in FourCC\n        //set objectType to 5 => strange, it should be 2\n        if (fourCCValue === 'AACH') {\n            objectType = 0x05;\n        }\n        //if codecPrivateData is empty, build it :\n        if (codecPrivateData === undefined || codecPrivateData === '') {\n            objectType = 0x02; //AAC Main Low Complexity => object Type = 2\n            indexFreq = samplingFrequencyIndex[samplingRate];\n            if (fourCCValue === 'AACH') {\n                // 4 bytes :     XXXXX         XXXX          XXXX             XXXX                  XXXXX      XXX   XXXXXXX\n                //           ' ObjectType' 'Freq Index' 'Channels value'   'Extens Sampl Freq'  'ObjectType'  'GAS' 'alignment = 0'\n                objectType = 0x05; // High Efficiency AAC Profile = object Type = 5 SBR\n                codecPrivateData = new Uint8Array(4);\n                extensionSamplingFrequencyIndex = samplingFrequencyIndex[samplingRate * 2]; // in HE AAC Extension Sampling frequence\n                // equals to SamplingRate*2\n                //Freq Index is present for 3 bits in the first byte, last bit is in the second\n                codecPrivateData[0] = (objectType << 3) | (indexFreq >> 1);\n                codecPrivateData[1] = (indexFreq << 7) | (qualityLevel.Channels << 3) | (extensionSamplingFrequencyIndex >> 1);\n                codecPrivateData[2] = (extensionSamplingFrequencyIndex << 7) | (0x02 << 2); // origin object type equals to 2 => AAC Main Low Complexity\n                codecPrivateData[3] = 0x0; //alignment bits\n\n                arr16 = new Uint16Array(2);\n                arr16[0] = (codecPrivateData[0] << 8) + codecPrivateData[1];\n                arr16[1] = (codecPrivateData[2] << 8) + codecPrivateData[3];\n                //convert decimal to hex value\n                codecPrivateDataHex = arr16[0].toString(16);\n                codecPrivateDataHex = arr16[0].toString(16) + arr16[1].toString(16);\n\n            } else {\n                // 2 bytes :     XXXXX         XXXX          XXXX              XXX\n                //           ' ObjectType' 'Freq Index' 'Channels value'   'GAS = 000'\n                codecPrivateData = new Uint8Array(2);\n                //Freq Index is present for 3 bits in the first byte, last bit is in the second\n                codecPrivateData[0] = (objectType << 3) | (indexFreq >> 1);\n                codecPrivateData[1] = (indexFreq << 7) | (parseInt(qualityLevel.getAttribute('Channels'), 10) << 3);\n                // put the 2 bytes in an 16 bits array\n                arr16 = new Uint16Array(1);\n                arr16[0] = (codecPrivateData[0] << 8) + codecPrivateData[1];\n                //convert decimal to hex value\n                codecPrivateDataHex = arr16[0].toString(16);\n            }\n\n            codecPrivateData = '' + codecPrivateDataHex;\n            codecPrivateData = codecPrivateData.toUpperCase();\n            qualityLevel.setAttribute('CodecPrivateData', codecPrivateData);\n        } else if (objectType === 0) {\n            objectType = (parseInt(codecPrivateData.substr(0, 2), 16) & 0xF8) >> 3;\n        }\n\n        return 'mp4a.40.' + objectType;\n    }\n\n    function mapSegmentTemplate(streamIndex, timescale) {\n        const segmentTemplate = {};\n        let mediaUrl,\n            streamIndexTimeScale,\n            url;\n\n        url = streamIndex.getAttribute('Url');\n        mediaUrl = url ? url.replace('{bitrate}', '$Bandwidth$') : null;\n        mediaUrl = mediaUrl ? mediaUrl.replace('{start time}', '$Time$') : null;\n\n        streamIndexTimeScale = streamIndex.getAttribute('TimeScale');\n        streamIndexTimeScale = streamIndexTimeScale ? parseFloat(streamIndexTimeScale) : timescale;\n\n        segmentTemplate.media = mediaUrl;\n        segmentTemplate.timescale = streamIndexTimeScale;\n\n        segmentTemplate.SegmentTimeline = mapSegmentTimeline(streamIndex, segmentTemplate.timescale);\n\n        // Patch: set availabilityTimeOffset to Infinity since segments are available as long as they are present in timeline\n        segmentTemplate.availabilityTimeOffset = 'INF';\n\n        return segmentTemplate;\n    }\n\n    function mapSegmentTimeline(streamIndex, timescale) {\n        const segmentTimeline = {};\n        const chunks = streamIndex.getElementsByTagName('c');\n        const segments = [];\n        let segment,\n            prevSegment,\n            tManifest,\n            i, j, r;\n        let duration = 0;\n\n        for (i = 0; i < chunks.length; i++) {\n            segment = {};\n\n            // Get time 't' attribute value\n            tManifest = chunks[i].getAttribute('t');\n\n            // => segment.tManifest = original timestamp value as a string (for constructing the fragment request url, see DashHandler)\n            // => segment.t = number value of timestamp (maybe rounded value, but only for 0.1 microsecond)\n            if (tManifest && BigInt(tManifest).greater(BigInt(Number.MAX_SAFE_INTEGER))) {\n                segment.tManifest = tManifest;\n            }\n            segment.t = parseFloat(tManifest);\n\n            // Get duration 'd' attribute value\n            segment.d = parseFloat(chunks[i].getAttribute('d'));\n\n            // If 't' not defined for first segment then t=0\n            if ((i === 0) && !segment.t) {\n                segment.t = 0;\n            }\n\n            if (i > 0) {\n                prevSegment = segments[segments.length - 1];\n                // Update previous segment duration if not defined\n                if (!prevSegment.d) {\n                    if (prevSegment.tManifest) {\n                        prevSegment.d = BigInt(tManifest).subtract(BigInt(prevSegment.tManifest)).toJSNumber();\n                    } else {\n                        prevSegment.d = segment.t - prevSegment.t;\n                    }\n                    duration += prevSegment.d;\n                }\n                // Set segment absolute timestamp if not set in manifest\n                if (!segment.t) {\n                    if (prevSegment.tManifest) {\n                        segment.tManifest = BigInt(prevSegment.tManifest).add(BigInt(prevSegment.d)).toString();\n                        segment.t = parseFloat(segment.tManifest);\n                    } else {\n                        segment.t = prevSegment.t + prevSegment.d;\n                    }\n                }\n            }\n\n            if (segment.d) {\n                duration += segment.d;\n            }\n\n            // Create new segment\n            segments.push(segment);\n\n            // Support for 'r' attribute (i.e. \"repeat\" as in MPEG-DASH)\n            r = parseFloat(chunks[i].getAttribute('r'));\n            if (r) {\n\n                for (j = 0; j < (r - 1); j++) {\n                    prevSegment = segments[segments.length - 1];\n                    segment = {};\n                    segment.t = prevSegment.t + prevSegment.d;\n                    segment.d = prevSegment.d;\n                    if (prevSegment.tManifest) {\n                        segment.tManifest = BigInt(prevSegment.tManifest).add(BigInt(prevSegment.d)).toString();\n                    }\n                    duration += segment.d;\n                    segments.push(segment);\n                }\n            }\n        }\n\n        segmentTimeline.S = segments;\n        segmentTimeline.duration = duration / timescale;\n\n        return segmentTimeline;\n    }\n\n    function getKIDFromProtectionHeader(protectionHeader) {\n        let prHeader,\n            wrmHeader,\n            xmlReader,\n            KID;\n\n        // Get PlayReady header as byte array (base64 decoded)\n        prHeader = BASE64.decodeArray(protectionHeader.firstChild.data);\n\n        // Get Right Management header (WRMHEADER) from PlayReady header\n        wrmHeader = getWRMHeaderFromPRHeader(prHeader);\n\n        if (wrmHeader) {\n            // Convert from multi-byte to unicode\n            wrmHeader = new Uint16Array(wrmHeader.buffer);\n\n            // Convert to string\n            wrmHeader = String.fromCharCode.apply(null, wrmHeader);\n\n            // Parse <WRMHeader> to get KID field value\n            xmlReader = (new DOMParser()).parseFromString(wrmHeader, 'application/xml');\n            KID = xmlReader.querySelector('KID').textContent;\n\n            // Get KID (base64 decoded) as byte array\n            KID = BASE64.decodeArray(KID);\n\n            // Convert UUID from little-endian to big-endian\n            convertUuidEndianness(KID);\n        }\n\n        return KID;\n    }\n\n    function getWRMHeaderFromPRHeader(prHeader) {\n        let length,\n            recordCount,\n            recordType,\n            recordLength,\n            recordValue;\n        let i = 0;\n\n        // Parse PlayReady header\n\n        // Length - 32 bits (LE format)\n        length = (prHeader[i + 3] << 24) + (prHeader[i + 2] << 16) + (prHeader[i + 1] << 8) + prHeader[i]; // eslint-disable-line\n        i += 4;\n\n        // Record count - 16 bits (LE format)\n        recordCount = (prHeader[i + 1] << 8) + prHeader[i]; // eslint-disable-line\n        i += 2;\n\n        // Parse records\n        while (i < prHeader.length) {\n            // Record type - 16 bits (LE format)\n            recordType = (prHeader[i + 1] << 8) + prHeader[i];\n            i += 2;\n\n            // Check if Rights Management header (record type = 0x01)\n            if (recordType === 0x01) {\n\n                // Record length - 16 bits (LE format)\n                recordLength = (prHeader[i + 1] << 8) + prHeader[i];\n                i += 2;\n\n                // Record value => contains <WRMHEADER>\n                recordValue = new Uint8Array(recordLength);\n                recordValue.set(prHeader.subarray(i, i + recordLength));\n                return recordValue;\n            }\n        }\n\n        return null;\n    }\n\n    function convertUuidEndianness(uuid) {\n        swapBytes(uuid, 0, 3);\n        swapBytes(uuid, 1, 2);\n        swapBytes(uuid, 4, 5);\n        swapBytes(uuid, 6, 7);\n    }\n\n    function swapBytes(bytes, pos1, pos2) {\n        const temp = bytes[pos1];\n        bytes[pos1] = bytes[pos2];\n        bytes[pos2] = temp;\n    }\n\n\n    function createPRContentProtection(protectionHeader) {\n        let pro = {\n            __text: protectionHeader.firstChild.data,\n            __prefix: 'mspr'\n        };\n        return {\n            schemeIdUri: 'urn:uuid:' + ProtectionConstants.PLAYREADY_UUID,\n            value: ProtectionConstants.PLAYREADY_KEYSTEM_STRING,\n            pro: pro\n        };\n    }\n\n    function createWidevineContentProtection(KID) {\n        let widevineCP = {\n            schemeIdUri: 'urn:uuid:' + ProtectionConstants.WIDEVINE_UUID,\n            value: ProtectionConstants.WIDEVINE_KEYSTEM_STRING\n        };\n        if (!KID) {\n            return widevineCP;\n        }\n        // Create Widevine CENC header (Protocol Buffer) with KID value\n        const wvCencHeader = new Uint8Array(2 + KID.length);\n        wvCencHeader[0] = 0x12;\n        wvCencHeader[1] = 0x10;\n        wvCencHeader.set(KID, 2);\n\n        // Create a pssh box\n        const length = 12 /* box length, type, version and flags */ + 16 /* SystemID */ + 4 /* data length */ + wvCencHeader.length;\n        let pssh = new Uint8Array(length);\n        let i = 0;\n\n        // Set box length value\n        pssh[i++] = (length & 0xFF000000) >> 24;\n        pssh[i++] = (length & 0x00FF0000) >> 16;\n        pssh[i++] = (length & 0x0000FF00) >> 8;\n        pssh[i++] = (length & 0x000000FF);\n\n        // Set type ('pssh'), version (0) and flags (0)\n        pssh.set([0x70, 0x73, 0x73, 0x68, 0x00, 0x00, 0x00, 0x00], i);\n        i += 8;\n\n        // Set SystemID ('edef8ba9-79d6-4ace-a3c8-27dcd51d21ed')\n        pssh.set([0xed, 0xef, 0x8b, 0xa9, 0x79, 0xd6, 0x4a, 0xce, 0xa3, 0xc8, 0x27, 0xdc, 0xd5, 0x1d, 0x21, 0xed], i);\n        i += 16;\n\n        // Set data length value\n        pssh[i++] = (wvCencHeader.length & 0xFF000000) >> 24;\n        pssh[i++] = (wvCencHeader.length & 0x00FF0000) >> 16;\n        pssh[i++] = (wvCencHeader.length & 0x0000FF00) >> 8;\n        pssh[i++] = (wvCencHeader.length & 0x000000FF);\n\n        // Copy Widevine CENC header\n        pssh.set(wvCencHeader, i);\n\n        // Convert to BASE64 string\n        pssh = String.fromCharCode.apply(null, pssh);\n        pssh = BASE64.encodeASCII(pssh);\n\n        widevineCP.pssh = { __text: pssh };\n\n        return widevineCP;\n    }\n\n    function processManifest(xmlDoc) {\n        const manifest = {};\n        const contentProtections = [];\n        const smoothStreamingMedia = xmlDoc.getElementsByTagName('SmoothStreamingMedia')[0];\n        const protection = xmlDoc.getElementsByTagName('Protection')[0];\n        let protectionHeader = null;\n        let period,\n            adaptations,\n            contentProtection,\n            KID,\n            timestampOffset,\n            startTime,\n            segments,\n            timescale,\n            segmentDuration,\n            i, j;\n\n        // Set manifest node properties\n        manifest.protocol = 'MSS';\n        manifest.profiles = 'urn:mpeg:dash:profile:isoff-live:2011';\n        manifest.type = getAttributeAsBoolean(smoothStreamingMedia, 'IsLive') ? 'dynamic' : 'static';\n        timescale = smoothStreamingMedia.getAttribute('TimeScale');\n        manifest.timescale = timescale ? parseFloat(timescale) : DEFAULT_TIME_SCALE;\n        let dvrWindowLength = parseFloat(smoothStreamingMedia.getAttribute('DVRWindowLength'));\n        // If the DVRWindowLength field is omitted for a live presentation or set to 0, the DVR window is effectively infinite\n        if (manifest.type === 'dynamic' && (dvrWindowLength === 0 || isNaN(dvrWindowLength))) {\n            dvrWindowLength = Infinity;\n        }\n        // Star-over\n        if (dvrWindowLength === 0 && getAttributeAsBoolean(smoothStreamingMedia, 'CanSeek')) {\n            dvrWindowLength = Infinity;\n        }\n\n        if (dvrWindowLength > 0) {\n            manifest.timeShiftBufferDepth = dvrWindowLength / manifest.timescale;\n        }\n\n        let duration = parseFloat(smoothStreamingMedia.getAttribute('Duration'));\n        manifest.mediaPresentationDuration = (duration === 0) ? Infinity : duration / manifest.timescale;\n        // By default, set minBufferTime to 2 sec. (but set below according to video segment duration)\n        manifest.minBufferTime = 2;\n        manifest.ttmlTimeIsRelative = true;\n\n        // Live manifest with Duration = start-over\n        if (manifest.type === 'dynamic' && duration > 0) {\n            manifest.type = 'static';\n            // We set timeShiftBufferDepth to initial duration, to be used by MssFragmentController to update segment timeline\n            manifest.timeShiftBufferDepth = duration / manifest.timescale;\n            // Duration will be set according to current segment timeline duration (see below)\n        }\n\n        if (manifest.type === 'dynamic') {\n            manifest.refreshManifestOnSwitchTrack = true; // Refresh manifest when switching tracks\n            manifest.doNotUpdateDVRWindowOnBufferUpdated = true; // DVRWindow is update by MssFragmentMoofPocessor based on tfrf boxes\n            manifest.ignorePostponeTimePeriod = true; // Never update manifest\n            manifest.availabilityStartTime = new Date(null); // Returns 1970\n        }\n\n        // Map period node to manifest root node\n        period = mapPeriod(smoothStreamingMedia, manifest.timescale);\n        manifest.Period = [period];\n\n        // Initialize period start time\n        period.start = 0;\n\n        // Uncomment to test live to static manifests\n        // if (manifest.type !== 'static') {\n        //     manifest.type = 'static';\n        //     manifest.mediaPresentationDuration = manifest.timeShiftBufferDepth;\n        //     manifest.timeShiftBufferDepth = null;\n        // }\n\n        // ContentProtection node\n        if (protection !== undefined) {\n            protectionHeader = xmlDoc.getElementsByTagName('ProtectionHeader')[0];\n\n            // Some packagers put newlines into the ProtectionHeader base64 string, which is not good\n            // because this cannot be correctly parsed. Let's just filter out any newlines found in there.\n            protectionHeader.firstChild.data = protectionHeader.firstChild.data.replace(/\\n|\\r/g, '');\n\n            // Get KID (in CENC format) from protection header\n            KID = getKIDFromProtectionHeader(protectionHeader);\n\n            // Create ContentProtection for PlayReady\n            contentProtection = createPRContentProtection(protectionHeader);\n            contentProtection['cenc:default_KID'] = KID;\n            contentProtections.push(contentProtection);\n\n            // Create ContentProtection for Widevine (as a CENC protection)\n            contentProtection = createWidevineContentProtection(KID);\n            contentProtection['cenc:default_KID'] = KID;\n            contentProtections.push(contentProtection);\n\n            manifest.ContentProtection = contentProtections;\n        }\n\n        adaptations = period.AdaptationSet;\n\n        for (i = 0; i < adaptations.length; i += 1) {\n            adaptations[i].SegmentTemplate.initialization = '$Bandwidth$';\n            // Propagate content protection information into each adaptation\n            if (manifest.ContentProtection !== undefined) {\n                adaptations[i].ContentProtection = manifest.ContentProtection;\n                adaptations[i].ContentProtection = manifest.ContentProtection;\n            }\n\n            if (adaptations[i].contentType === 'video') {\n                // Get video segment duration\n                segmentDuration = adaptations[i].SegmentTemplate.SegmentTimeline.S[0].d / adaptations[i].SegmentTemplate.timescale;\n                // Set minBufferTime to one segment duration\n                manifest.minBufferTime = segmentDuration;\n\n                if (manifest.type === 'dynamic') {\n                    // Match timeShiftBufferDepth to video segment timeline duration\n                    if (manifest.timeShiftBufferDepth > 0 &&\n                        manifest.timeShiftBufferDepth !== Infinity &&\n                        manifest.timeShiftBufferDepth > adaptations[i].SegmentTemplate.SegmentTimeline.duration) {\n                        manifest.timeShiftBufferDepth = adaptations[i].SegmentTemplate.SegmentTimeline.duration;\n                    }\n                }\n            }\n        }\n\n        // Cap minBufferTime to timeShiftBufferDepth\n        manifest.minBufferTime = Math.min(manifest.minBufferTime, (manifest.timeShiftBufferDepth ? manifest.timeShiftBufferDepth : Infinity));\n\n        // In case of live streams:\n        // 1- configure player buffering properties according to target live delay\n        // 2- adapt live delay and then buffers length in case timeShiftBufferDepth is too small compared to target live delay (see PlaybackController.computeLiveDelay())\n        // 3- Set retry attempts and intervals for FragmentInfo requests\n        if (manifest.type === 'dynamic') {\n            let targetLiveDelay = settings.get().streaming.delay.liveDelay;\n            if (!targetLiveDelay) {\n                const liveDelayFragmentCount = settings.get().streaming.delay.liveDelayFragmentCount !== null && !isNaN(settings.get().streaming.delay.liveDelayFragmentCount) ? settings.get().streaming.delay.liveDelayFragmentCount : 4;\n                targetLiveDelay = segmentDuration * liveDelayFragmentCount;\n            }\n            let targetDelayCapping = Math.max(manifest.timeShiftBufferDepth - 10/*END_OF_PLAYLIST_PADDING*/, manifest.timeShiftBufferDepth / 2);\n            let liveDelay = Math.min(targetDelayCapping, targetLiveDelay);\n            // Consider a margin of more than one segment in order to avoid Precondition Failed errors (412), for example if audio and video are not correctly synchronized\n            let bufferTime = liveDelay - (segmentDuration * 1.5);\n\n            // Store initial buffer settings\n            initialBufferSettings = {\n                'streaming': {\n                    'buffer': {\n                        'bufferTimeDefault': settings.get().streaming.buffer.bufferTimeDefault,\n                        'bufferTimeAtTopQuality': settings.get().streaming.buffer.bufferTimeAtTopQuality,\n                        'bufferTimeAtTopQualityLongForm': settings.get().streaming.buffer.bufferTimeAtTopQualityLongForm\n                    },\n                    'timeShiftBuffer': {\n                        calcFromSegmentTimeline: settings.get().streaming.timeShiftBuffer.calcFromSegmentTimeline\n                    },\n                    'delay': {\n                        'liveDelay': settings.get().streaming.delay.liveDelay\n                    }\n                }\n            };\n\n            settings.update({\n                'streaming': {\n                    'buffer': {\n                        'bufferTimeDefault': bufferTime,\n                        'bufferTimeAtTopQuality': bufferTime,\n                        'bufferTimeAtTopQualityLongForm': bufferTime\n                    },\n                    'timeShiftBuffer': {\n                        calcFromSegmentTimeline: true\n                    },\n                    'delay': {\n                        'liveDelay': liveDelay\n                    }\n                }\n            });\n        }\n\n        // Delete Content Protection under root manifest node\n        delete manifest.ContentProtection;\n\n        // In case of VOD streams, check if start time is greater than 0\n        // Then determine timestamp offset according to higher audio/video start time\n        // (use case = live stream delinearization)\n        if (manifest.type === 'static') {\n            // In case of start-over stream and manifest reloading (due to track switch)\n            // we consider previous timestampOffset to keep timelines synchronized\n            var prevManifest = manifestModel.getValue();\n            if (prevManifest && prevManifest.timestampOffset) {\n                timestampOffset = prevManifest.timestampOffset;\n            } else {\n                for (i = 0; i < adaptations.length; i++) {\n                    if (adaptations[i].contentType === constants.AUDIO || adaptations[i].contentType === constants.VIDEO) {\n                        segments = adaptations[i].SegmentTemplate.SegmentTimeline.S;\n                        startTime = segments[0].t;\n                        if (timestampOffset === undefined) {\n                            timestampOffset = startTime;\n                        }\n                        timestampOffset = Math.min(timestampOffset, startTime);\n                        // Correct content duration according to minimum adaptation's segment timeline duration\n                        // in order to force <video> element sending 'ended' event\n                        manifest.mediaPresentationDuration = Math.min(manifest.mediaPresentationDuration, adaptations[i].SegmentTemplate.SegmentTimeline.duration);\n                    }\n                }\n            }\n            if (timestampOffset > 0) {\n                // Patch segment templates timestamps and determine period start time (since audio/video should not be aligned to 0)\n                manifest.timestampOffset = timestampOffset;\n                for (i = 0; i < adaptations.length; i++) {\n                    segments = adaptations[i].SegmentTemplate.SegmentTimeline.S;\n                    for (j = 0; j < segments.length; j++) {\n                        if (!segments[j].tManifest) {\n                            segments[j].tManifest = segments[j].t.toString();\n                        }\n                        segments[j].t -= timestampOffset;\n                    }\n                    if (adaptations[i].contentType === constants.AUDIO || adaptations[i].contentType === constants.VIDEO) {\n                        period.start = Math.max(segments[0].t, period.start);\n                        adaptations[i].SegmentTemplate.presentationTimeOffset = period.start;\n                    }\n                }\n                period.start /= manifest.timescale;\n            }\n        }\n\n        // Floor the duration to get around precision differences between segments timestamps and MSE buffer timestamps\n        // and then avoid 'ended' event not being raised\n        manifest.mediaPresentationDuration = Math.floor(manifest.mediaPresentationDuration * 1000) / 1000;\n        period.duration = manifest.mediaPresentationDuration;\n\n        return manifest;\n    }\n\n    function parseDOM(data) {\n        let xmlDoc = null;\n\n        if (window.DOMParser) {\n            const parser = new window.DOMParser();\n\n            xmlDoc = parser.parseFromString(data, 'text/xml');\n            if (xmlDoc.getElementsByTagName('parsererror').length > 0) {\n                throw new Error('parsing the manifest failed');\n            }\n        }\n\n        return xmlDoc;\n    }\n\n    function getIron() {\n        return null;\n    }\n\n    function internalParse(data) {\n        let xmlDoc = null;\n        let manifest = null;\n\n        const startTime = window.performance.now();\n\n        // Parse the MSS XML manifest\n        xmlDoc = parseDOM(data);\n\n        const xmlParseTime = window.performance.now();\n\n        if (xmlDoc === null) {\n            return null;\n        }\n\n        // Convert MSS manifest into DASH manifest\n        manifest = processManifest(xmlDoc, new Date());\n\n        const mss2dashTime = window.performance.now();\n\n        logger.info('Parsing complete: (xmlParsing: ' + (xmlParseTime - startTime).toPrecision(3) + 'ms, mss2dash: ' + (mss2dashTime - xmlParseTime).toPrecision(3) + 'ms, total: ' + ((mss2dashTime - startTime) / 1000).toPrecision(3) + 's)');\n\n        return manifest;\n    }\n\n    function reset() {\n        // Restore initial buffer settings\n        if (initialBufferSettings) {\n            settings.update(initialBufferSettings);\n        }\n    }\n\n    instance = {\n        parse: internalParse,\n        getIron: getIron,\n        reset: reset\n    };\n\n    setup();\n\n    return instance;\n}\n\nMssParser.__dashjs_factory_name = 'MssParser';\nexport default FactoryMaker.getClassFactory(MssParser);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport EventsBase from '../core/events/EventsBase.js';\n\n/**\n * @class\n * @implements EventsBase\n */\nclass MediaPlayerEvents extends EventsBase {\n\n    /**\n     * @description Public facing external events to be used when developing a player that implements dash.js.\n     */\n    constructor() {\n        super();\n        /**\n         * Triggered when playback will not start yet\n         * as the MPD's availabilityStartTime is in the future.\n         * Check delay property in payload to determine time before playback will start.\n         * @event MediaPlayerEvents#AST_IN_FUTURE\n         */\n        this.AST_IN_FUTURE = 'astInFuture';\n\n        /**\n         * Triggered when the BaseURLs have been updated.\n         * @event MediaPlayerEvents#BASE_URLS_UPDATED\n         */\n        this.BASE_URLS_UPDATED = 'baseUrlsUpdated';\n\n        /**\n         * Triggered when the video element's buffer state changes to stalled.\n         * Check mediaType in payload to determine type (Video, Audio, FragmentedText).\n         * @event MediaPlayerEvents#BUFFER_EMPTY\n         */\n        this.BUFFER_EMPTY = 'bufferStalled';\n\n        /**\n         * Triggered when the video element's buffer state changes to loaded.\n         * Check mediaType in payload to determine type (Video, Audio, FragmentedText).\n         * @event MediaPlayerEvents#BUFFER_LOADED\n         */\n        this.BUFFER_LOADED = 'bufferLoaded';\n\n        /**\n         * Triggered when the video element's buffer state changes, either stalled or loaded. Check payload for state.\n         * @event MediaPlayerEvents#BUFFER_LEVEL_STATE_CHANGED\n         */\n        this.BUFFER_LEVEL_STATE_CHANGED = 'bufferStateChanged';\n\n        /**\n         * Triggered when the buffer level of a media type has been updated\n         * @event MediaPlayerEvents#BUFFER_LEVEL_UPDATED\n         */\n        this.BUFFER_LEVEL_UPDATED = 'bufferLevelUpdated';\n\n        /**\n         * Triggered when a font signalled by a DVB Font Download has been added to the document FontFaceSet interface.\n         * @event MediaPlayerEvents#DVB_FONT_DOWNLOAD_ADDED\n         */\n        this.DVB_FONT_DOWNLOAD_ADDED = 'dvbFontDownloadAdded';\n\n        /**\n         * Triggered when a font signalled by a DVB Font Download has successfully downloaded and the FontFace can be used.\n         * @event MediaPlayerEvents#DVB_FONT_DOWNLOAD_COMPLETE\n         */\n        this.DVB_FONT_DOWNLOAD_COMPLETE = 'dvbFontDownloadComplete';\n\n        /**\n         * Triggered when a font signalled by a DVB Font Download could not be successfully downloaded, so the FontFace will not be used.\n         * @event MediaPlayerEvents#DVB_FONT_DOWNLOAD_FAILED\n         */\n        this.DVB_FONT_DOWNLOAD_FAILED = 'dvbFontDownloadFailed';\n\n        /**\n         * Triggered when a dynamic stream changed to static (transition phase between Live and On-Demand).\n         * @event MediaPlayerEvents#DYNAMIC_TO_STATIC\n         */\n        this.DYNAMIC_TO_STATIC = 'dynamicToStatic';\n\n        /**\n         * Triggered when there is an error from the element or MSE source buffer.\n         * @event MediaPlayerEvents#ERROR\n         */\n        this.ERROR = 'error';\n        /**\n         * Triggered when a fragment download has completed.\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_COMPLETED\n         */\n        this.FRAGMENT_LOADING_COMPLETED = 'fragmentLoadingCompleted';\n\n        /**\n         * Triggered when a partial fragment download has completed.\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_PROGRESS\n         */\n        this.FRAGMENT_LOADING_PROGRESS = 'fragmentLoadingProgress';\n        /**\n         * Triggered when a fragment download has started.\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_STARTED\n         */\n        this.FRAGMENT_LOADING_STARTED = 'fragmentLoadingStarted';\n\n        /**\n         * Triggered when a fragment download is abandoned due to detection of slow download base on the ABR abandon rule..\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_ABANDONED\n         */\n        this.FRAGMENT_LOADING_ABANDONED = 'fragmentLoadingAbandoned';\n\n        /**\n         * Triggered when {@link module:Debug} logger methods are called.\n         * @event MediaPlayerEvents#LOG\n         */\n        this.LOG = 'log';\n\n        /**\n         * Triggered when the manifest load is started\n         * @event MediaPlayerEvents#MANIFEST_LOADING_STARTED\n         */\n        this.MANIFEST_LOADING_STARTED = 'manifestLoadingStarted';\n\n        /**\n         * Triggered when the manifest loading is finished, providing the request object information\n         * @event MediaPlayerEvents#MANIFEST_LOADING_FINISHED\n         */\n        this.MANIFEST_LOADING_FINISHED = 'manifestLoadingFinished';\n\n        /**\n         * Triggered when the manifest load is complete, providing the payload\n         * @event MediaPlayerEvents#MANIFEST_LOADED\n         */\n        this.MANIFEST_LOADED = 'manifestLoaded';\n\n        /**\n         * Triggered anytime there is a change to the overall metrics.\n         * @event MediaPlayerEvents#METRICS_CHANGED\n         */\n        this.METRICS_CHANGED = 'metricsChanged';\n\n        /**\n         * Triggered when an individual metric is added, updated or cleared.\n         * @event MediaPlayerEvents#METRIC_CHANGED\n         */\n        this.METRIC_CHANGED = 'metricChanged';\n\n        /**\n         * Triggered every time a new metric is added.\n         * @event MediaPlayerEvents#METRIC_ADDED\n         */\n        this.METRIC_ADDED = 'metricAdded';\n\n        /**\n         * Triggered every time a metric is updated.\n         * @event MediaPlayerEvents#METRIC_UPDATED\n         */\n        this.METRIC_UPDATED = 'metricUpdated';\n\n        /**\n         * Triggered when a new stream (period) starts.\n         * @event MediaPlayerEvents#PERIOD_SWITCH_STARTED\n         */\n        this.PERIOD_SWITCH_STARTED = 'periodSwitchStarted';\n\n        /**\n         * Triggered at the stream end of a period.\n         * @event MediaPlayerEvents#PERIOD_SWITCH_COMPLETED\n         */\n        this.PERIOD_SWITCH_COMPLETED = 'periodSwitchCompleted';\n\n        /**\n         * Triggered when an ABR up /down switch is initiated; either by user in manual mode or auto mode via ABR rules.\n         * @event MediaPlayerEvents#QUALITY_CHANGE_REQUESTED\n         */\n        this.QUALITY_CHANGE_REQUESTED = 'qualityChangeRequested';\n\n        /**\n         * Triggered when the new ABR quality is being rendered on-screen.\n         * @event MediaPlayerEvents#QUALITY_CHANGE_RENDERED\n         */\n        this.QUALITY_CHANGE_RENDERED = 'qualityChangeRendered';\n\n        /**\n         * Triggered when the new track is being selected\n         * @event MediaPlayerEvents#NEW_TRACK_SELECTED\n         */\n        this.NEW_TRACK_SELECTED = 'newTrackSelected';\n\n        /**\n         * Triggered when the new track is being rendered.\n         * @event MediaPlayerEvents#TRACK_CHANGE_RENDERED\n         */\n        this.TRACK_CHANGE_RENDERED = 'trackChangeRendered';\n\n        /**\n         * Triggered when a stream (period) is being loaded\n         * @event MediaPlayerEvents#STREAM_INITIALIZING\n         */\n        this.STREAM_INITIALIZING = 'streamInitializing';\n\n        /**\n         * Triggered when a stream (period) is loaded\n         * @event MediaPlayerEvents#STREAM_UPDATED\n         */\n        this.STREAM_UPDATED = 'streamUpdated';\n\n        /**\n         * Triggered when a stream (period) is activated\n         * @event MediaPlayerEvents#STREAM_ACTIVATED\n         */\n        this.STREAM_ACTIVATED = 'streamActivated';\n\n        /**\n         * Triggered when a stream (period) is deactivated\n         * @event MediaPlayerEvents#STREAM_DEACTIVATED\n         */\n        this.STREAM_DEACTIVATED = 'streamDeactivated';\n\n        /**\n         * Triggered when a stream (period) is activated\n         * @event MediaPlayerEvents#STREAM_INITIALIZED\n         */\n        this.STREAM_INITIALIZED = 'streamInitialized';\n\n        /**\n         * Triggered when the player has been reset.\n         * @event MediaPlayerEvents#STREAM_TEARDOWN_COMPLETE\n         */\n        this.STREAM_TEARDOWN_COMPLETE = 'streamTeardownComplete';\n\n        /**\n         * Triggered once all text tracks detected in the MPD are added to the video element.\n         * @event MediaPlayerEvents#TEXT_TRACKS_ADDED\n         */\n        this.TEXT_TRACKS_ADDED = 'allTextTracksAdded';\n\n        /**\n         * Triggered when a text track is added to the video element's TextTrackList\n         * @event MediaPlayerEvents#TEXT_TRACK_ADDED\n         */\n        this.TEXT_TRACK_ADDED = 'textTrackAdded';\n\n        /**\n         * Triggered when a text track should be shown\n         * @event MediaPlayerEvents#CUE_ENTER\n         */\n        this.CUE_ENTER = 'cueEnter'\n\n        /**\n         * Triggered when a text track should be hidden\n         * @event MediaPlayerEvents#CUE_ENTER\n         */\n        this.CUE_EXIT = 'cueExit'\n\n        /**\n         * Triggered when a throughput measurement based on the last segment request has been stored\n         * @event MediaPlayerEvents#THROUGHPUT_MEASUREMENT_STORED\n         */\n        this.THROUGHPUT_MEASUREMENT_STORED = 'throughputMeasurementStored';\n\n        /**\n         * Triggered when a ttml chunk is parsed.\n         * @event MediaPlayerEvents#TTML_PARSED\n         */\n        this.TTML_PARSED = 'ttmlParsed';\n\n        /**\n         * Triggered when a ttml chunk has to be parsed.\n         * @event MediaPlayerEvents#TTML_TO_PARSE\n         */\n        this.TTML_TO_PARSE = 'ttmlToParse';\n\n        /**\n         * Triggered when a caption is rendered.\n         * @event MediaPlayerEvents#CAPTION_RENDERED\n         */\n        this.CAPTION_RENDERED = 'captionRendered';\n\n        /**\n         * Triggered when the caption container is resized.\n         * @event MediaPlayerEvents#CAPTION_CONTAINER_RESIZE\n         */\n        this.CAPTION_CONTAINER_RESIZE = 'captionContainerResize';\n\n        /**\n         * Sent when enough data is available that the media can be played,\n         * at least for a couple of frames.  This corresponds to the\n         * HAVE_ENOUGH_DATA readyState.\n         * @event MediaPlayerEvents#CAN_PLAY\n         */\n        this.CAN_PLAY = 'canPlay';\n\n        /**\n         * This corresponds to the CAN_PLAY_THROUGH readyState.\n         * @event MediaPlayerEvents#CAN_PLAY_THROUGH\n         */\n        this.CAN_PLAY_THROUGH = 'canPlayThrough';\n\n        /**\n         * Sent when playback completes.\n         * @event MediaPlayerEvents#PLAYBACK_ENDED\n         */\n        this.PLAYBACK_ENDED = 'playbackEnded';\n\n        /**\n         * Sent when an error occurs.  The element's error\n         * attribute contains more information.\n         * @event MediaPlayerEvents#PLAYBACK_ERROR\n         */\n        this.PLAYBACK_ERROR = 'playbackError';\n\n        /**\n         * This event is fired once the playback has been initialized by MediaPlayer.js.\n         * After that event methods such as setTextTrack() can be used.\n         * @event MediaPlayerEvents#PLAYBACK_INITIALIZED\n         */\n        this.PLAYBACK_INITIALIZED = 'playbackInitialized';\n\n        /**\n         * Sent when playback is not allowed (for example if user gesture is needed).\n         * @event MediaPlayerEvents#PLAYBACK_NOT_ALLOWED\n         */\n        this.PLAYBACK_NOT_ALLOWED = 'playbackNotAllowed';\n\n        /**\n         * The media's metadata has finished loading; all attributes now\n         * contain as much useful information as they're going to.\n         * @event MediaPlayerEvents#PLAYBACK_METADATA_LOADED\n         */\n        this.PLAYBACK_METADATA_LOADED = 'playbackMetaDataLoaded';\n\n        /**\n         * The event is fired when the frame at the current playback position of the media has finished loading;\n         * often the first frame\n         * @event MediaPlayerEvents#PLAYBACK_LOADED_DATA\n         */\n        this.PLAYBACK_LOADED_DATA = 'playbackLoadedData';\n\n        /**\n         * Sent when playback is paused.\n         * @event MediaPlayerEvents#PLAYBACK_PAUSED\n         */\n        this.PLAYBACK_PAUSED = 'playbackPaused';\n\n        /**\n         * Sent when the media begins to play (either for the first time, after having been paused,\n         * or after ending and then restarting).\n         *\n         * @event MediaPlayerEvents#PLAYBACK_PLAYING\n         */\n        this.PLAYBACK_PLAYING = 'playbackPlaying';\n\n        /**\n         * Sent periodically to inform interested parties of progress downloading\n         * the media. Information about the current amount of the media that has\n         * been downloaded is available in the media element's buffered attribute.\n         * @event MediaPlayerEvents#PLAYBACK_PROGRESS\n         */\n        this.PLAYBACK_PROGRESS = 'playbackProgress';\n\n        /**\n         * Sent when the playback speed changes.\n         * @event MediaPlayerEvents#PLAYBACK_RATE_CHANGED\n         */\n        this.PLAYBACK_RATE_CHANGED = 'playbackRateChanged';\n\n        /**\n         * Sent when a seek operation completes.\n         * @event MediaPlayerEvents#PLAYBACK_SEEKED\n         */\n        this.PLAYBACK_SEEKED = 'playbackSeeked';\n\n        /**\n         * Sent when a seek operation begins.\n         * @event MediaPlayerEvents#PLAYBACK_SEEKING\n         */\n        this.PLAYBACK_SEEKING = 'playbackSeeking';\n\n        /**\n         * Sent when the video element reports stalled\n         * @event MediaPlayerEvents#PLAYBACK_STALLED\n         */\n        this.PLAYBACK_STALLED = 'playbackStalled';\n\n        /**\n         * Sent when playback of the media starts after having been paused;\n         * that is, when playback is resumed after a prior pause event.\n         *\n         * @event MediaPlayerEvents#PLAYBACK_STARTED\n         */\n        this.PLAYBACK_STARTED = 'playbackStarted';\n\n        /**\n         * The time indicated by the element's currentTime attribute has changed.\n         * @event MediaPlayerEvents#PLAYBACK_TIME_UPDATED\n         */\n        this.PLAYBACK_TIME_UPDATED = 'playbackTimeUpdated';\n\n        /**\n         * Sent when the video element reports that the volume has changed\n         * @event MediaPlayerEvents#PLAYBACK_VOLUME_CHANGED\n         */\n        this.PLAYBACK_VOLUME_CHANGED = 'playbackVolumeChanged';\n\n        /**\n         * Sent when the media playback has stopped because of a temporary lack of data.\n         *\n         * @event MediaPlayerEvents#PLAYBACK_WAITING\n         */\n        this.PLAYBACK_WAITING = 'playbackWaiting';\n\n        /**\n         * Manifest validity changed - As a result of an MPD validity expiration event.\n         * @event MediaPlayerEvents#MANIFEST_VALIDITY_CHANGED\n         */\n        this.MANIFEST_VALIDITY_CHANGED = 'manifestValidityChanged';\n\n        /**\n         * Dash events are triggered at their respective start points on the timeline.\n         * @event MediaPlayerEvents#EVENT_MODE_ON_START\n         */\n        this.EVENT_MODE_ON_START = 'eventModeOnStart';\n\n        /**\n         * Dash events are triggered as soon as they were parsed.\n         * @event MediaPlayerEvents#EVENT_MODE_ON_RECEIVE\n         */\n        this.EVENT_MODE_ON_RECEIVE = 'eventModeOnReceive';\n\n        /**\n         * Event that is dispatched whenever the player encounters a potential conformance validation that might lead to unexpected/not optimal behavior\n         * @event MediaPlayerEvents#CONFORMANCE_VIOLATION\n         */\n        this.CONFORMANCE_VIOLATION = 'conformanceViolation';\n\n        /**\n         * Event that is dispatched whenever the player switches to a different representation\n         * @event MediaPlayerEvents#REPRESENTATION_SWITCH\n         */\n        this.REPRESENTATION_SWITCH = 'representationSwitch';\n\n        /**\n         * Event that is dispatched whenever an adaptation set is removed due to all representations not being supported.\n         * @event MediaPlayerEvents#ADAPTATION_SET_REMOVED_NO_CAPABILITIES\n         */\n        this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES = 'adaptationSetRemovedNoCapabilities';\n\n        /**\n         * Triggered when a content steering request has completed.\n         * @event MediaPlayerEvents#CONTENT_STEERING_REQUEST_COMPLETED\n         */\n        this.CONTENT_STEERING_REQUEST_COMPLETED = 'contentSteeringRequestCompleted';\n\n        /**\n         * Triggered when an inband prft (ProducerReferenceTime) boxes has been received.\n         * @event MediaPlayerEvents#INBAND_PRFT\n         */\n        this.INBAND_PRFT = 'inbandPrft';\n\n        /**\n         * The streaming attribute of the Managed Media Source is true\n         * @type {string}\n         */\n        this.MANAGED_MEDIA_SOURCE_START_STREAMING = 'managedMediaSourceStartStreaming';\n\n        /**\n         * The streaming attribute of the Managed Media Source is false\n         * @type {string}\n         */\n        this.MANAGED_MEDIA_SOURCE_END_STREAMING = 'managedMediaSourceEndStreaming';\n    }\n}\n\nlet mediaPlayerEvents = new MediaPlayerEvents();\nexport default mediaPlayerEvents;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES, LOSS OF USE, DATA, OR\n *  PROFITS, OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Protection Constants declaration\n * @ignore\n */\nexport default {\n    CLEARKEY_KEYSTEM_STRING: 'org.w3.clearkey',\n    WIDEVINE_KEYSTEM_STRING: 'com.widevine.alpha',\n    PLAYREADY_KEYSTEM_STRING: 'com.microsoft.playready',\n    PLAYREADY_RECOMMENDATION_KEYSTEM_STRING: 'com.microsoft.playready.recommendation',\n    WIDEVINE_UUID: 'edef8ba9-79d6-4ace-a3c8-27dcd51d21ed',\n    PLAYREADY_UUID: '9a04f079-9840-4286-ab92-e65be0885f95',\n    CLEARKEY_UUID: 'e2719d58-a985-b3c9-781a-b030af78d30e',\n    W3C_CLEARKEY_UUID: '1077efec-c0b2-4d02-ace3-3c1e52e2fb4b',\n    INITIALIZATION_DATA_TYPE_CENC: 'cenc',\n    INITIALIZATION_DATA_TYPE_KEYIDS: 'keyids',\n    INITIALIZATION_DATA_TYPE_WEBM: 'webm',\n    ENCRYPTION_SCHEME_CENC: 'cenc',\n    ENCRYPTION_SCHEME_CBCS: 'cbcs',\n    MEDIA_KEY_MESSAGE_TYPES: {\n        LICENSE_REQUEST: 'license-request',\n        LICENSE_RENEWAL: 'license-renewal',\n        LICENSE_RELEASE: 'license-release',\n        INDIVIDUALIZATION_REQUEST: 'individualization-request',\n    },\n    ROBUSTNESS_STRINGS: {\n        WIDEVINE: {\n            SW_SECURE_CRYPTO: 'SW_SECURE_CRYPTO',\n            SW_SECURE_DECODE: 'SW_SECURE_DECODE',\n            HW_SECURE_CRYPTO: 'HW_SECURE_CRYPTO',\n            HW_SECURE_DECODE: 'HW_SECURE_DECODE',\n            HW_SECURE_ALL: 'HW_SECURE_ALL'\n        }\n    },\n    MEDIA_KEY_STATUSES: {\n        USABLE: 'usable',\n        EXPIRED: 'expired',\n        RELEASED: 'released',\n        OUTPUT_RESTRICTED: 'output-restricted',\n        OUTPUT_DOWNSCALED: 'output-downscaled',\n        STATUS_PENDING: 'status-pending',\n        INTERNAL_ERROR: 'internal-error',\n    }\n}\n\n\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass DashJSError {\n    constructor(code, message, data) {\n        this.code = code || null;\n        this.message = message || null;\n        this.data = data || null;\n    }\n}\n\nexport default DashJSError;","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * @class\n * @ignore\n */\nclass DataChunk {\n    //Represents a data structure that keep all the necessary info about a single init/media segment\n    constructor() {\n        this.streamId = null;\n        this.segmentType = null;\n        this.quality = NaN;\n        this.index = NaN;\n        this.bytes = null;\n        this.start = NaN;\n        this.end = NaN;\n        this.duration = NaN;\n        this.representation = null;\n        this.endFragment = null;\n    }\n}\n\nexport default DataChunk;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { HTTPRequest } from './metrics/HTTPRequest.js';\n\n/**\n * @class\n * @ignore\n */\nclass FragmentRequest {\n    constructor(url) {\n        this.action = FragmentRequest.ACTION_DOWNLOAD;\n        this.availabilityEndTime = null;\n        this.availabilityStartTime = null;\n        this.bandwidth = NaN;\n        this.bytesLoaded = NaN;\n        this.bytesTotal = NaN;\n        this.delayLoadingTime = NaN;\n        this.duration = NaN;\n        this.endDate = null;\n        this.firstByteDate = null;\n        this.index = NaN;\n        this.mediaStartTime = NaN;\n        this.mediaType = null;\n        this.quality = NaN;\n        this.range = null;\n        this.representation = null;\n        this.responseType = 'arraybuffer';\n        this.serviceLocation = null;\n        this.startDate = null;\n        this.startTime = NaN;\n        this.timescale = NaN;\n        this.type = null;\n        this.url = url || null;\n        this.wallStartTime = null;\n    }\n\n    isInitializationRequest() {\n        return (this.type && this.type === HTTPRequest.INIT_SEGMENT_TYPE);\n    }\n\n    setInfo(info) {\n        this.type = info && info.init ? HTTPRequest.INIT_SEGMENT_TYPE : HTTPRequest.MEDIA_SEGMENT_TYPE;\n        this.url = info && info.url ? info.url : null;\n        this.range = info && info.range ? info.range.start + '-' + info.range.end : null;\n        this.mediaType = info && info.mediaType ? info.mediaType : null;\n    }\n}\n\nFragmentRequest.ACTION_DOWNLOAD = 'download';\nFragmentRequest.ACTION_COMPLETE = 'complete';\n\nexport default FragmentRequest;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc This Object holds reference to the HTTPRequest for manifest, fragment and xlink loading.\n * Members which are not defined in ISO23009-1 Annex D should be prefixed by a _ so that they are ignored\n * by Metrics Reporting code.\n * @ignore\n */\nclass HTTPRequest {\n    /**\n     * @class\n     */\n    constructor() {\n        /**\n         * Identifier of the TCP connection on which the HTTP request was sent.\n         * @public\n         */\n        this.tcpid = null;\n        /**\n         * This is an optional parameter and should not be included in HTTP request/response transactions for progressive download.\n         * The type of the request:\n         * - MPD\n         * - XLink expansion\n         * - Initialization Fragment\n         * - Index Fragment\n         * - Media Fragment\n         * - Bitstream Switching Fragment\n         * - other\n         * @public\n         */\n        this.type = null;\n        /**\n         * The original URL (before any redirects or failures)\n         * @public\n         */\n        this.url = null;\n        /**\n         * The actual URL requested, if different from above\n         * @public\n         */\n        this.actualurl = null;\n        /**\n         * The contents of the byte-range-spec part of the HTTP Range header.\n         * @public\n         */\n        this.range = null;\n        /**\n         * Real-Time | The real time at which the request was sent.\n         * @public\n         */\n        this.trequest = null;\n        /**\n         * Real-Time | The real time at which the first byte of the response was received.\n         * @public\n         */\n        this.tresponse = null;\n        /**\n         * The HTTP response code.\n         * @public\n         */\n        this.responsecode = null;\n        /**\n         * The duration of the throughput trace intervals (ms), for successful requests only.\n         * @public\n         */\n        this.interval = null;\n        /**\n         * Throughput traces, for successful requests only.\n         * @public\n         */\n        this.trace = [];\n        /**\n         * The CMSD static and dynamic values retrieved from CMSD response headers.\n         * @public\n         */\n        this.cmsd = null;\n\n        /**\n         * Type of stream (\"audio\" | \"video\" etc..)\n         * @public\n         */\n        this._stream = null;\n        /**\n         * Real-Time | The real time at which the request finished.\n         * @public\n         */\n        this._tfinish = null;\n        /**\n         * The duration of the media requests, if available, in seconds.\n         * @public\n         */\n        this._mediaduration = null;\n        /**\n         * The media segment quality\n         * @public\n         */\n        this._quality = null;\n        /**\n         * all the response headers from request.\n         * @public\n         */\n        this._responseHeaders = null;\n        /**\n         * The selected service location for the request. string.\n         * @public\n         */\n        this._serviceLocation = null;\n        /**\n         * The type of the loader that was used. Distinguish between fetch loader and xhr loader\n         */\n        this._fileLoaderType = null;\n        /**\n         * The values derived from the ResourceTimingAPI.\n         */\n        this._resourceTimingValues = null;\n    }\n}\n\n/**\n * @classdesc This Object holds reference to the progress of the HTTPRequest.\n * @ignore\n */\nclass HTTPRequestTrace {\n    /**\n     * @class\n     */\n    constructor() {\n        /**\n         * Real-Time | Measurement stream start.\n         * @public\n         */\n        this.s = null;\n        /**\n         * Measurement stream duration (ms).\n         * @public\n         */\n        this.d = null;\n        /**\n         * List of integers counting the bytes received in each trace interval within the measurement stream.\n         * @public\n         */\n        this.b = [];\n    }\n}\n\nHTTPRequest.GET = 'GET';\nHTTPRequest.HEAD = 'HEAD';\nHTTPRequest.MPD_TYPE = 'MPD';\nHTTPRequest.XLINK_EXPANSION_TYPE = 'XLinkExpansion';\nHTTPRequest.INIT_SEGMENT_TYPE = 'InitializationSegment';\nHTTPRequest.INDEX_SEGMENT_TYPE = 'IndexSegment';\nHTTPRequest.MEDIA_SEGMENT_TYPE = 'MediaSegment';\nHTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE = 'BitstreamSwitchingSegment';\nHTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE = 'FragmentInfoSegment';\nHTTPRequest.DVB_REPORTING_TYPE = 'DVBReporting';\nHTTPRequest.LICENSE = 'license';\nHTTPRequest.CONTENT_STEERING_TYPE = 'ContentSteering';\nHTTPRequest.OTHER_TYPE = 'other';\n\nexport {HTTPRequest, HTTPRequestTrace};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport MssHandler from './MssHandler.js';\n\n// Shove both of these into the global scope\nvar context = (typeof window !== 'undefined' && window) || global;\n\nvar dashjs = context.dashjs;\nif (!dashjs) {\n    dashjs = context.dashjs = {};\n}\n\ndashjs.MssHandler = MssHandler;\n\nexport default dashjs;\nexport { MssHandler };\n"],"names":["bigInt","undefined","BASE","LOG_BASE","MAX_INT","MAX_INT_ARR","smallToArray","DEFAULT_ALPHABET","supportsNativeBigInt","BigInt","Integer","v","radix","alphabet","caseSensitive","parseValue","parseBase","BigInteger","value","sign","isSmall","prototype","Object","create","SmallInteger","NativeBigInt","isPrecise","n","Math","floor","arrayToSmall","arr","trim","length","compareAbs","i","createArray","x","Array","truncate","ceil","add","a","b","l_a","l_b","r","carry","base","sum","push","addAny","addSmall","l","subtract","negate","abs","plus","a_l","b_l","borrow","difference","subtractAny","subtractSmall","minus","small","multiplyLong","product","a_i","b_j","j","multiplySmall","shiftLeft","concat","multiplyKaratsuba","y","max","slice","d","c","ac","bd","abcd","useKaratsuba","l1","l2","multiply","times","multiplySmallAndArray","_multiplyBySmall","square","a_j","divMod1","result","divisorMostSignificantDigit","lambda","remainder","divisor","quotientDigit","shift","q","divModSmall","divMod2","part","guess","xlen","highx","highy","check","unshift","reverse","quotient","divModAny","self","Error","comparison","qSign","mod","mSign","divmod","divide","over","pow","isEven","toString","_0","_1","_2","isNegative","modPow","exp","isZero","isPositive","isOdd","compare","Infinity","compareTo","equals","eq","notEquals","neq","greater","gt","lesser","lt","greaterOrEquals","geq","lesserOrEquals","leq","isUnit","isDivisibleBy","isBasicPrime","millerRabinTest","nPrev","prev","t","next","isPrime","strict","bits","bitLength","logN","log","toJSNumber","isProbablePrime","iterations","randBetween","modInv","zero","newT","one","newR","lastT","lastR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","String","shiftRight","remQuo","bitwise","fn","xSign","ySign","xRem","not","yRem","xDigit","yDigit","xDivMod","yDivMod","and","or","xor","LOBMASK_I","LOBMASK_BI","roughLOB","integerLogarithm","tmp","p","e","min","gcd","lcm","low","high","range","random","digits","toBase","restricted","top","digit","fromArray","text","toLowerCase","absBase","alphabetValues","start","parseBaseFromArray","val","stringify","apply","map","valueOf","neg","Number","out","left","toBaseString","join","toArray","str","zeros","toJSON","parseInt","parseStringValue","split","decimalPlace","indexOf","isValid","test","parseNumberValue","minusOne","isInstance","module","hasOwnProperty","exports","define","amd","FactoryMaker","instance","singletonContexts","singletonFactories","classFactories","extend","name","childInstance","override","context","getSingletonInstance","className","obj","setSingletonInstance","deleteSingletonInstances","filter","getFactoryByName","factoriesArray","updateFactory","factory","updateClassFactory","getClassFactoryByName","getClassFactory","classConstructor","__dashjs_factory_name","merge","arguments","updateSingletonFactory","getSingletonFactoryByName","getSingletonFactory","getInstance","args","classInstance","extensionObject","extension","parent","prop","getClassName","ErrorsBase","errors","config","publicOnly","err","EventsBase","events","evt","FragmentRequest","HTTPRequest","MssFragmentInfoController","logger","fragmentModel","started","type","loadFragmentTimeout","startTime","startFragmentTime","index","streamProcessor","baseURLController","debug","controllerType","setup","getLogger","initialize","getType","getFragmentModel","loadNextFragmentInfo","stop","clearTimeout","reset","representation","getCurrentRepresentation","manifest","adaptation","period","mpd","Period","AdaptationSet","segments","SegmentTemplate","SegmentTimeline","S","segment","request","getRequestForSegment","requestFragment","call","timescale","mediaType","MSS_FRAGMENT_INFO_SEGMENT_TYPE","duration","bandwidth","adaptationIndex","url","resolve","path","media","replace","tManifest","representationController","getRepresentationController","isFragmentLoadedOrPending","executeRequest","fragmentInfoLoaded","response","error","deltaFragmentTime","deltaTime","delay","Date","getTime","setTimeout","DashJSError","MssErrors","Events","MssFragmentMoofProcessor","dashMetrics","playbackController","errorHandler","errHandler","eventBus","ISOBoxer","processTfrf","tfrf","tfdt","timeShiftBufferDepth","MSS_NO_TFRF_CODE","MSS_NO_TFRF_MESSAGE","entries","entry","segmentTime","endTime","availabilityStartTime","parseFloat","fragment_absolute_time","end","baseMediaDecodeTime","updateDVR","getStreamInfo","manifestInfo","fragment_duration","lastSegment","trigger","MANIFEST_VALIDITY_CHANGED","sender","newDuration","isPaused","splice","dvrInfos","getCurrentDVRInfo","addDVRInfo","updateCurrentTime","getBoxOffset","offset","boxes","size","convertFragment","isoFile","parseBuffer","tfhd","fetch","track_ID","mediaInfo","traf","createFullBox","version","flags","trun","tfxd","_parent","sepiff","usertype","saio","entry_count","saiz","sample_count","default_sample_info_size","sample_info_size","NumberOfEntries","moof","getLength","data_offset","trafPosInMoof","sencPosInTraf","write","updateSegmentList","MssFragmentMoovProcessor","NALUTYPE_SPS","NALUTYPE_PPS","constants","protectionController","adaptationSet","contentProtection","trackId","createFtypBox","ftyp","createBox","major_brand","minor_version","compatible_brands","createMoovBox","moov","createMvhdBox","trak","createTkhdBox","mdia","createMdhdBox","createHdlrBox","minf","VIDEO","createVmhdBox","AUDIO","createSmhdBox","dinf","createDrefBox","stbl","stts","_data","stsc","stco","stsz","createStsdBox","mvex","createTrexBox","supportedKS","getSupportedKeySystemMetadataFromContentProtection","createProtectionSystemSpecificHeaderBox","mvhd","creation_time","modification_time","round","rate","volume","reserved1","reserved2","matrix","pre_defined","next_track_ID","tkhd","layer","alternate_group","reserved3","width","height","mdhd","language","lang","hdlr","handler_type","id","reserved","vmhd","graphicsmode","opcolor","smhd","balance","dref","location","stsd","createSampleEntry","codec","codecs","substring","createAVCVisualSampleEntry","createMP4AudioSampleEntry","code","MSS_UNSUPPORTED_CODEC_CODE","message","MSS_UNSUPPORTED_CODEC_MESSAGE","data","avc1","data_reference_index","pre_defined1","pre_defined2","horizresolution","vertresolution","frame_count","compressorname","depth","pre_defined3","createAVC1ConfigurationRecord","sinf","createOriginalFormatBox","createSchemeTypeBox","createSchemeInformationBox","avcC","avcCLength","sps","pps","AVCProfileIndication","AVCLevelIndication","profile_compatibility","nalus","codecPrivateData","naluBytes","naluType","hexStringtoBuffer","Uint8Array","set","mp4a","channelcount","audioChannels","samplesize","reserved_3","samplerate","audioSamplingRate","esds","createMPEG4AACESDescriptor","audioSpecificConfig","esdsLength","frma","data_format","stringToCharCode","schm","scheme_type","scheme_version","schi","createTrackEncryptionBox","keySystems","pssh_bytes","pssh","parsedBuffer","initData","Utils","appendBox","tenc","default_IsEncrypted","default_IV_size","default_KID","trex","default_sample_description_index","default_sample_duration","default_sample_size","default_sample_flags","buf","charCodeAt","generateMoov","rep","arrayBuffer","ContentProtection","createFile","arrayEqual","arr1","arr2","every","element","saioProcessor","_procFullBox","_procField","_procFieldArray","saizProcessor","sencProcessor","_procEntries","_procEntryField","_procSubEntries","clearAndCryptedData","uuidProcessor","tfxdUserType","tfrfUserType","sepiffUserType","_parsing","fragment_count","MssFragmentProcessor","mssFragmentMoovProcessor","mssFragmentMoofProcessor","addBoxProcessor","processFragment","DataChunk","MssParser","MssHandler","initSegmentType","streamController","mssParser","mssFragmentProcessor","fragmentInfoControllers","createMssFragmentProcessor","getStreamProcessor","getActiveStreamProcessors","processor","getFragmentInfoController","controller","createDataChunk","streamId","endFragment","chunk","segmentType","startFragmentInfoControllers","processors","forEach","TEXT","fragmentInfoController","stopFragmentInfoControllers","onInitFragmentNeeded","getMediaInfo","streamInfo","FRAGMENT_LOADING_PROGRESS","bytes","INIT_FRAGMENT_LOADED","onSegmentMediaLoaded","isDynamic","dvrWindowSize","onPlaybackPaused","getIsDynamic","onPlaybackSeeking","onTTMLPreProcess","ttmlSubtitles","registerEvents","on","INIT_FRAGMENT_NEEDED","priority","dashjs","EVENT_PRIORITY_HIGH","PLAYBACK_PAUSED","PLAYBACK_SEEKING","FRAGMENT_LOADING_COMPLETED","TTML_TO_PARSE","off","createMssParser","constructor","mssErrors","ProtectionConstants","BASE64","manifestModel","settings","DEFAULT_TIME_SCALE","SUPPORTED_CODECS","ROLE","ACCESSIBILITY","samplingFrequencyIndex","mimeTypeMap","initialBufferSettings","getAttributeAsBoolean","node","attrName","getAttribute","mapPeriod","smoothStreamingMedia","streams","getElementsByTagName","mapAdaptationSet","streamIndex","representations","segmentTemplate","qualityLevels","fallBackId","contentType","mimeType","subType","maxWidth","maxHeight","Role","schemeIdUri","Accessibility","mapSegmentTemplate","BaseURL","Id","mapRepresentation","Representation","qualityLevel","fourCCValue","isNaN","toUpperCase","warn","getH264Codec","getAACCodec","STPP","nalHeader","avcoti","exec","substr","samplingRate","objectType","codecPrivateDataHex","arr16","indexFreq","extensionSamplingFrequencyIndex","Channels","Uint16Array","setAttribute","mediaUrl","streamIndexTimeScale","mapSegmentTimeline","availabilityTimeOffset","segmentTimeline","chunks","prevSegment","MAX_SAFE_INTEGER","getKIDFromProtectionHeader","protectionHeader","prHeader","wrmHeader","xmlReader","KID","decodeArray","firstChild","getWRMHeaderFromPRHeader","buffer","fromCharCode","DOMParser","parseFromString","querySelector","textContent","convertUuidEndianness","recordCount","recordType","recordLength","recordValue","subarray","uuid","swapBytes","pos1","pos2","temp","createPRContentProtection","pro","__text","__prefix","PLAYREADY_UUID","PLAYREADY_KEYSTEM_STRING","createWidevineContentProtection","widevineCP","WIDEVINE_UUID","WIDEVINE_KEYSTEM_STRING","wvCencHeader","encodeASCII","processManifest","xmlDoc","contentProtections","protection","adaptations","timestampOffset","segmentDuration","protocol","profiles","dvrWindowLength","mediaPresentationDuration","minBufferTime","ttmlTimeIsRelative","refreshManifestOnSwitchTrack","doNotUpdateDVRWindowOnBufferUpdated","ignorePostponeTimePeriod","initialization","targetLiveDelay","get","streaming","liveDelay","liveDelayFragmentCount","targetDelayCapping","bufferTime","bufferTimeDefault","bufferTimeAtTopQuality","bufferTimeAtTopQualityLongForm","calcFromSegmentTimeline","timeShiftBuffer","update","prevManifest","getValue","presentationTimeOffset","parseDOM","window","parser","getIron","internalParse","performance","now","xmlParseTime","mss2dashTime","info","toPrecision","parse","MediaPlayerEvents","AST_IN_FUTURE","BASE_URLS_UPDATED","BUFFER_EMPTY","BUFFER_LOADED","BUFFER_LEVEL_STATE_CHANGED","BUFFER_LEVEL_UPDATED","DVB_FONT_DOWNLOAD_ADDED","DVB_FONT_DOWNLOAD_COMPLETE","DVB_FONT_DOWNLOAD_FAILED","DYNAMIC_TO_STATIC","ERROR","FRAGMENT_LOADING_STARTED","FRAGMENT_LOADING_ABANDONED","LOG","MANIFEST_LOADING_STARTED","MANIFEST_LOADING_FINISHED","MANIFEST_LOADED","METRICS_CHANGED","METRIC_CHANGED","METRIC_ADDED","METRIC_UPDATED","PERIOD_SWITCH_STARTED","PERIOD_SWITCH_COMPLETED","QUALITY_CHANGE_REQUESTED","QUALITY_CHANGE_RENDERED","NEW_TRACK_SELECTED","TRACK_CHANGE_RENDERED","STREAM_INITIALIZING","STREAM_UPDATED","STREAM_ACTIVATED","STREAM_DEACTIVATED","STREAM_INITIALIZED","STREAM_TEARDOWN_COMPLETE","TEXT_TRACKS_ADDED","TEXT_TRACK_ADDED","CUE_ENTER","CUE_EXIT","THROUGHPUT_MEASUREMENT_STORED","TTML_PARSED","CAPTION_RENDERED","CAPTION_CONTAINER_RESIZE","CAN_PLAY","CAN_PLAY_THROUGH","PLAYBACK_ENDED","PLAYBACK_ERROR","PLAYBACK_INITIALIZED","PLAYBACK_NOT_ALLOWED","PLAYBACK_METADATA_LOADED","PLAYBACK_LOADED_DATA","PLAYBACK_PLAYING","PLAYBACK_PROGRESS","PLAYBACK_RATE_CHANGED","PLAYBACK_SEEKED","PLAYBACK_STALLED","PLAYBACK_STARTED","PLAYBACK_TIME_UPDATED","PLAYBACK_VOLUME_CHANGED","PLAYBACK_WAITING","EVENT_MODE_ON_START","EVENT_MODE_ON_RECEIVE","CONFORMANCE_VIOLATION","REPRESENTATION_SWITCH","ADAPTATION_SET_REMOVED_NO_CAPABILITIES","CONTENT_STEERING_REQUEST_COMPLETED","INBAND_PRFT","MANAGED_MEDIA_SOURCE_START_STREAMING","MANAGED_MEDIA_SOURCE_END_STREAMING","mediaPlayerEvents","CLEARKEY_KEYSTEM_STRING","PLAYREADY_RECOMMENDATION_KEYSTEM_STRING","CLEARKEY_UUID","W3C_CLEARKEY_UUID","INITIALIZATION_DATA_TYPE_CENC","INITIALIZATION_DATA_TYPE_KEYIDS","INITIALIZATION_DATA_TYPE_WEBM","ENCRYPTION_SCHEME_CENC","ENCRYPTION_SCHEME_CBCS","MEDIA_KEY_MESSAGE_TYPES","LICENSE_REQUEST","LICENSE_RENEWAL","LICENSE_RELEASE","INDIVIDUALIZATION_REQUEST","ROBUSTNESS_STRINGS","WIDEVINE","SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL","MEDIA_KEY_STATUSES","USABLE","EXPIRED","RELEASED","OUTPUT_RESTRICTED","OUTPUT_DOWNSCALED","STATUS_PENDING","INTERNAL_ERROR","quality","NaN","action","ACTION_DOWNLOAD","availabilityEndTime","bytesLoaded","bytesTotal","delayLoadingTime","endDate","firstByteDate","mediaStartTime","responseType","serviceLocation","startDate","wallStartTime","isInitializationRequest","INIT_SEGMENT_TYPE","setInfo","init","MEDIA_SEGMENT_TYPE","ACTION_COMPLETE","tcpid","actualurl","trequest","tresponse","responsecode","interval","trace","cmsd","_stream","_tfinish","_mediaduration","_quality","_responseHeaders","_serviceLocation","_fileLoaderType","_resourceTimingValues","HTTPRequestTrace","s","GET","HEAD","MPD_TYPE","XLINK_EXPANSION_TYPE","INDEX_SEGMENT_TYPE","BITSTREAM_SWITCHING_SEGMENT_TYPE","DVB_REPORTING_TYPE","LICENSE","CONTENT_STEERING_TYPE","OTHER_TYPE","global"],"sourceRoot":""}
>>>>>>> Stashed changes
